<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>前端小技术集合 - H.L Frontend</title><link rel="icon" href="/frontend/favicon.ico"/><meta name="description" content="H.L Frontend，前端技术和工具网站，提供了一系列实用的前端开发工具和功能，技术网站汇总，旨在帮助开发者更加高效地进行前端开发。"/><meta name="keywords" content="前端工具,前端开发,前端开发工具,前端开发工具集合,toolbox,frontend,卡鲁秋,Hank,HankLiu"/><meta name="author" content="Hank.Liu"/><meta name="copyright" content="卡鲁秋"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="next-head-count" content="9"/><link rel="stylesheet" href="/frontend/styles/animate.css/@4.1.1/animate.css"/><link rel="preload" href="/frontend/_next/static/css/48e12760546808a2.css" as="style"/><link rel="stylesheet" href="/frontend/_next/static/css/48e12760546808a2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/frontend/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/frontend/_next/static/chunks/webpack-93c0980eb9a5a364.js" defer=""></script><script src="/frontend/_next/static/chunks/framework-0e8d27528ba61906.js" defer=""></script><script src="/frontend/_next/static/chunks/main-d236bc00457e5dc2.js" defer=""></script><script src="/frontend/_next/static/chunks/pages/_app-d90534c1986642b8.js" defer=""></script><script src="/frontend/_next/static/chunks/5367-33ed0c98355cb6dc.js" defer=""></script><script src="/frontend/_next/static/chunks/4853-4e02ebf21637e379.js" defer=""></script><script src="/frontend/_next/static/chunks/3239-4699acf95684b42e.js" defer=""></script><script src="/frontend/_next/static/chunks/1664-e769dc1505626ddd.js" defer=""></script><script src="/frontend/_next/static/chunks/418-4f5393ca512af857.js" defer=""></script><script src="/frontend/_next/static/chunks/7202-08c1445bfc3a1826.js" defer=""></script><script src="/frontend/_next/static/chunks/pages/questions/%5Bid%5D-41ea2e32e7cffd3d.js" defer=""></script><script src="/frontend/_next/static/MQUtFiptr90W41domt60c/_buildManifest.js" defer=""></script><script src="/frontend/_next/static/MQUtFiptr90W41domt60c/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex h-full min-h-[100vh] w-full flex-col" style="flex-direction:column;min-height:100vh"><main class="flex flex-1 grow-[1] flex-col" style="flex:1"><div class="flex h-full flex-1 flex-col" style="position:relative"><div class="flex space-x-6 bg-white p-6"><div class="flex-1"><div class="ant-card ant-card-bordered article-card min-h-full !border-[#d9d9d9] css-1okl62o"><div class="ant-card-body"><article><header><h1 class="mb-5 text-4xl font-bold">webpack 打包优化的四种方法（多进程打包，多进程压缩，资源 CDN，动态 polyfill）</h1></header><section class="mb-12 flex items-center space-x-8"><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small group cursor-pointer"><div class="ant-space-item"><span role="img" aria-label="branches" class="anticon anticon-branches group-hover:text-[#1171ee]"><svg viewBox="64 64 896 896" focusable="false" data-icon="branches" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span></div><div class="ant-space-item"><span class="group-hover:text-[#1171ee]">#95</span></div></div><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small group cursor-pointer"><div class="ant-space-item"><span class="group-hover:text-sky-500">hankliu62</span></div></div><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small"><div class="ant-space-item"><span class="text-[#8a919f]">2024-02-12 05:31:03</span></div></div><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small"><div class="ant-space-item"><div class="flex items-center justify-start"><span class="ant-tag ant-tag-has-color css-1okl62o" style="background-color:#923874">webpack</span></div></div></div><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small"><div class="ant-space-item"><ul class="ant-rate css-1okl62o ant-rate-disabled" tabindex="-1" role="radiogroup"><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="1" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="2" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="3" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="4" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="5" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li></ul></div></div></section><section><div><div class="ant-skeleton ant-skeleton-active css-1okl62o"><div class="ant-skeleton-content"><h3 class="ant-skeleton-title" style="width:38%"></h3><ul class="ant-skeleton-paragraph"><li></li><li></li><li style="width:61%"></li></ul></div></div></div></section></article></div></div></div><div class="w-64 bg-white"><div><div class=""><div class="ant-collapse ant-collapse-icon-position-end question-menus-collapse css-1okl62o"><div class="ant-collapse-item ant-collapse-item-active"><div class="ant-collapse-header" aria-expanded="true" aria-disabled="false" role="button" tabindex="0"><div class="ant-collapse-expand-icon"><span role="img" aria-label="right" class="anticon anticon-right ant-collapse-arrow"><svg viewBox="64 64 896 896" focusable="false" style="-ms-transform:rotate(90deg);transform:rotate(90deg)" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></div><span class="ant-collapse-header-text"><span class="text-base">目录</span></span><div class="ant-collapse-extra"><div class="-mr-2">收起</div></div></div><div class="ant-collapse-content ant-collapse-content-active"><div class="ant-collapse-content-box"><ul class="max-h-[620px] list-none space-y-3 overflow-y-auto text-slate-500 dark:text-slate-400"><li id="### 打包分析" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base !border-sky-500"><a class="w-full overflow-hidden !text-[#515767] !text-sky-500" href="/frontend/questions/95#%E6%89%93%E5%8C%85%E5%88%86%E6%9E%90"><div class="truncate" style="padding-left:16px">打包分析</div></a></li><li id="#### 1. 速度分析" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/95#1.-%E9%80%9F%E5%BA%A6%E5%88%86%E6%9E%90"><div class="truncate" style="padding-left:32px">1. 速度分析</div></a></li><li id="#### 2. 体积分析" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/95#2.-%E4%BD%93%E7%A7%AF%E5%88%86%E6%9E%90"><div class="truncate" style="padding-left:32px">2. 体积分析</div></a></li><li id="### 打包优化" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/95#%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96"><div class="truncate" style="padding-left:16px">打包优化</div></a></li><li id="#### 1. 多进程多实例构建，资源并行解析" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/95#1.-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%A4%9A%E5%AE%9E%E4%BE%8B%E6%9E%84%E5%BB%BA%E8%B5%84%E6%BA%90%E5%B9%B6%E8%A1%8C%E8%A7%A3%E6%9E%90"><div class="truncate" style="padding-left:32px">1. 多进程多实例构建，资源并行解析</div></a></li><li id="#### 2. 公用代码提取，使用 CDN 加载" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/95#2.-%E5%85%AC%E7%94%A8%E4%BB%A3%E7%A0%81%E6%8F%90%E5%8F%96%E4%BD%BF%E7%94%A8-cdn-%E5%8A%A0%E8%BD%BD"><div class="truncate" style="padding-left:32px">2. 公用代码提取，使用 CDN 加载</div></a></li><li id="#### 3. 多进程多实例并行压缩" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/95#3.-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%A4%9A%E5%AE%9E%E4%BE%8B%E5%B9%B6%E8%A1%8C%E5%8E%8B%E7%BC%A9"><div class="truncate" style="padding-left:32px">3. 多进程多实例并行压缩</div></a></li><li id="#### 4. 使用 polyfill 动态服务" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/95#4.-%E4%BD%BF%E7%94%A8-polyfill-%E5%8A%A8%E6%80%81%E6%9C%8D%E5%8A%A1"><div class="truncate" style="padding-left:32px">4. 使用 polyfill 动态服务</div></a></li></ul></div></div></div></div></div></div></div></div></div><div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"url":"https://api.github.com/repos/hankliu62/interview/issues/95","repository_url":"https://api.github.com/repos/hankliu62/interview","labels_url":"https://api.github.com/repos/hankliu62/interview/issues/95/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/interview/issues/95/comments","events_url":"https://api.github.com/repos/hankliu62/interview/issues/95/events","html_url":"https://github.com/hankliu62/interview/issues/95","id":2129448414,"node_id":"I_kwDOLNphd85-7M3e","number":95,"title":"webpack 打包优化的四种方法（多进程打包，多进程压缩，资源 CDN，动态 polyfill）","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":6547468588,"node_id":"LA_kwDOLNphd88AAAABhkJxLA","url":"https://api.github.com/repos/hankliu62/interview/labels/webpack","name":"webpack","color":"923874","default":false,"description":"Webpack相关"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-02-12T05:31:03Z","updated_at":"2024-02-12T05:31:03Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"### 打包分析\r\n\r\n#### 1. 速度分析\r\n\r\n我们的目的是优化打包速度，那肯定需要一个速度分析插件，此时 `speed-measure-webpack-plugin` 就派上用场了。它的作用如下：\r\n\r\n- 分析整个打包总耗时\r\n- 每个 plugin 和 loader 的耗时情况\r\n\r\n安装插件\r\n\r\n``` shell\r\nnpm install --save-dev speed-measure-webpack-plugin\r\n```\r\n\r\n使用插件\r\n\r\n修改配置webpack.config.js文件\r\n\r\n``` js\r\n// 导入速度分析插件\r\nconst SpeedMeasurePlugin = require(\"speed-measure-webpack-plugin\");\r\n\r\n// 实例化速度分析插件\r\nconst smp = new SpeedMeasurePlugin();\r\n\r\nconst webpackConfig = smp.wrap({\r\n  entry: {\r\n    // ...\r\n  },\r\n  output: {\r\n    // ...\r\n  },\r\n  resolve: {\r\n    // ...\r\n  },\r\n  module: {\r\n    rules: [\r\n      // ....\r\n    ]\r\n  },\r\n  plugins: [new MyPlugin(), new MyOtherPlugin()],\r\n});\r\n\r\nmodule.exports = webpackConfig;\r\n```\r\n\r\n运行打包命令之后，可以看到，打包总耗时为 `15.48 secs`\r\n\r\n效果如下所示:\r\n\r\n![Webpack优化_speed-measure-webpack-plugin 打包速度](https://user-images.githubusercontent.com/8088864/126053799-541740e0-922b-45c0-949d-6a91fc64f759.png)\r\n\r\n\r\n#### 2. 体积分析\r\n\r\n分析完打包速度之后，接着我们来分析打包之后每个文件以及每个模块对应的体积大小。使用到的插件为 `webpack-bundle-analyzer`，构建完成后会在 8888 端口展示大小。\r\n\r\n安装插件\r\n\r\n``` shell\r\nnpm install --save-dev webpack-bundle-analyzer\r\n```\r\n\r\n使用插件\r\n\r\n修改配置webpack.config.js文件\r\n\r\n``` js\r\n// 导入速度分析插件\r\nconst SpeedMeasurePlugin = require(\"speed-measure-webpack-plugin\");\r\n\r\n// 导入体积分析插件\r\nconst BundleAnalyzerPlugin = require(\"webpack-bundle-analyzer\").BundleAnalyzerPlugin;\r\n\r\n// 实例化速度分析插件\r\nconst smp = new SpeedMeasurePlugin();\r\n\r\nconst webpackConfig = smp.wrap({\r\n  entry: {\r\n    // ...\r\n  },\r\n  output: {\r\n    // ...\r\n  },\r\n  resolve: {\r\n    // ...\r\n  },\r\n  module: {\r\n    rules: [\r\n      // ....\r\n    ]\r\n  },\r\n  plugins: [\r\n    // 实例化体积分析插件\r\n    new BundleAnalyzerPlugin(),\r\n    new MyPlugin(),\r\n    new MyOtherPlugin(),\r\n  ],\r\n});\r\n\r\nmodule.exports = webpackConfig;\r\n```\r\n\r\n构建之后可以看到，其中黄色块 `chunk-vendors` 文件占比最大，为 `1.34MB`\r\n\r\n效果如下所示:\r\n\r\n![Webpack优化_webpack-bundle-analyzer 打包体积分析](https://user-images.githubusercontent.com/8088864/126053872-dca114ab-7a88-44ad-8456-6be4a4ce5510.png)\r\n\r\n### 打包优化\r\n\r\n#### 1. 多进程多实例构建，资源并行解析\r\n\r\n多进程构建的方案比较知名的有以下三个：\r\n\r\n- thread-loader (推荐使用这个)\r\n- parallel-webpack\r\n- HappyPack\r\n\r\n这里以 `thread-loader` 为例配置多进程多实例构建\r\n\r\n安装 loader\r\n\r\n``` shell\r\nnpm install --save-dev thread-loader\r\n```\r\n\r\n使用 loader\r\n\r\n修改配置webpack.config.js文件\r\n\r\n``` js\r\nconst path = require(\"path\");\r\n// 导入速度分析插件\r\nconst SpeedMeasurePlugin = require(\"speed-measure-webpack-plugin\");\r\n\r\n// 实例化速度分析插件\r\nconst smp = new SpeedMeasurePlugin();\r\n\r\nconst webpackConfig = smp.wrap({\r\n  entry: {\r\n    // ...\r\n  },\r\n  output: {\r\n    // ...\r\n  },\r\n  resolve: {\r\n    // ...\r\n  },\r\n  module: {\r\n    rules: [\r\n      rules: [\r\n        {\r\n          test: /\\.js$/,\r\n          include: path.resolve('src'),\r\n          use: [\r\n            'thread-loader',\r\n            // your expensive loader (e.g babel-loader)\r\n          ],\r\n        }\r\n      ]\r\n    ]\r\n  },\r\n  plugins: [\r\n    new MyPlugin(),\r\n    new MyOtherPlugin(),\r\n  ],\r\n});\r\n\r\nmodule.exports = webpackConfig;\r\n```\r\n\r\n#### 2. 公用代码提取，使用 CDN 加载\r\n\r\n以vue.js构建的项目为例，里面很多的第三方库只要不升级对应的版本其内容是不变的，我们可以将这些内用文件不通过webpack打包到模块里面，而是使用CDN加载，例如对于vue，vuex，vue-router，axios，echarts，swiper等第三方库我们可以利用webpack的externals参数来配置，这里我们设定只需要在生产环境中才需要使用。\r\n\r\n这里需要使用 `html-webpack-plugin` 和 `webpack-cdn-plugin` 两个插件\r\n\r\n安装插件\r\n\r\n``` shell\r\nnpm install --save-dev html-webpack-plugin, webpack-cdn-plugin\r\n```\r\n\r\n使用插件\r\n\r\n修改配置webpack.config.js文件\r\n\r\n``` js\r\nconst path = require(\"path\");\r\n// 导入速度分析插件\r\nconst SpeedMeasurePlugin = require(\"speed-measure-webpack-plugin\");\r\n\r\n// 导入体积分析插件\r\nconst BundleAnalyzerPlugin = require(\"webpack-bundle-analyzer\").BundleAnalyzerPlugin;\r\n\r\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\r\n\r\n//判断是否为生产环境\r\nconst isProduction = process.env.NODE_ENV === 'production';\r\n\r\n// 实例化速度分析插件\r\nconst smp = new SpeedMeasurePlugin();\r\n\r\n//定义 CDN 路径，这里采用 bootstrap 的 cdn\r\nconst cdn = {\r\n    css: [\r\n        'https://cdn.bootcss.com/Swiper/4.5.1/css/swiper.min.css'\r\n    ],\r\n    js: [\r\n        'https://cdn.bootcss.com/vue/2.6.10/vue.min.js',\r\n        'https://cdn.bootcss.com/vue-router/3.1.3/vue-router.min.js',\r\n        'https://cdn.bootcss.com/vuex/3.1.1/vuex.min.js',\r\n        'https://cdn.bootcss.com/axios/0.19.0/axios.min.js',\r\n        'https://cdn.bootcss.com/echarts/4.3.0/echarts.min.js',\r\n        'https://cdn.bootcss.com/Swiper/4.5.1/js/swiper.min.js',\r\n    ]\r\n}\r\n\r\nconst webpackConfig = smp.wrap({\r\n  entry: {\r\n    // ...\r\n  },\r\n  output: {\r\n    // ...\r\n  },\r\n  resolve: {\r\n    // ...\r\n  },\r\n  //生产环境注入 cdn\r\n  externals: isProduction \u0026\u0026 {\r\n    'vue': 'Vue',\r\n    'vuex': 'Vuex',\r\n    'vue-router': 'VueRouter',\r\n    'axios': 'axios',\r\n    'echarts': 'echarts',\r\n    'swiper': 'Swiper'\r\n  } || {},\r\n  module: {\r\n    rules: [\r\n      rules: [\r\n        {\r\n          test: /\\.js$/,\r\n          include: path.resolve('src'),\r\n          use: [\r\n            'thread-loader',\r\n            // your expensive loader (e.g babel-loader)\r\n          ],\r\n        }\r\n      ]\r\n    ]\r\n  },\r\n  plugins: [\r\n    new HtmlWebpackPlugin({ filename: '../index.html' }), // output file relative to output.path\r\n    new WebpackCdnPlugin({\r\n      modules: [\r\n        {\r\n          name: 'vue',\r\n          var: 'Vue',\r\n          path: 'vue.min.js'\r\n        },\r\n        {\r\n          name: 'vuex',\r\n          var: 'Vuex',\r\n          path: 'vuex.min.js'\r\n        }\r\n        {\r\n          name: 'vue-router',\r\n          var: 'VueRouter',\r\n          path: 'vue-router.min.js'\r\n        },\r\n        {\r\n          name: 'axios',\r\n          var: 'axios',\r\n          path: 'axios.min.js'\r\n        }\r\n        {\r\n          name: 'echarts',\r\n          var: 'echarts',\r\n          path: 'echarts.min.js'\r\n        },\r\n        {\r\n          name: 'swiper',\r\n          var: 'Swiper',\r\n          path: 'swiper.min.js'\r\n        },\r\n      ],\r\n      prod: isProduction,\r\n      prodUrl: '//cdn.bootcdn.net/ajax/libs/:name/:version/:path' // =\u003e https://cdn.bootcdn.net/ajax/libs/xxx/xxx/xxx(`:name`,`:version`和`:path`为模板变量)\r\n      publicPath: '/node_modules/dist', // override when prod is false\r\n    }),\r\n    new MyPlugin(),\r\n    new MyOtherPlugin(),\r\n  ],\r\n});\r\n\r\nmodule.exports = webpackConfig;\r\n```\r\n\r\n最终生成的inde.html文件如下所示:\r\n\r\n``` html\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml\u003e\r\n  \u003chead\u003e\r\n    \u003cmeta charset=\"UTF-8\"\u003e\r\n    \u003ctitle\u003eWebpack App\u003c/title\u003e\r\n    \u003clink href=\"https://cdn.bootcdn.net/ajax/libs/Swiper/6.7.5/swiper-bundle.min.css\" rel=\"stylesheet\"\u003e\r\n  \u003c/head\u003e\r\n  \u003cbody\u003e\r\n  \u003cscript type=\"text/javascript\" src=\"https://cdn.bootcdn.net/ajax/libs/vue/2.6.13/vue.min.js\"\u003e\u003c/script\u003e\r\n  \u003cscript type=\"text/javascript\" src=\"https://cdn.bootcdn.net/ajax/libs/vue-router/3.1.3/vue-router.min.js\"\u003e\u003c/script\u003e\r\n  \u003cscript type=\"text/javascript\" src=\"https://cdn.bootcdn.net/ajax/libs/vuex/3.1.1/vuex.min.js\"\u003e\u003c/script\u003e\r\n  \u003cscript type=\"text/javascript\" src=\"https://cdn.bootcdn.net/ajax/libs/axios/0.19.0/axios.min.js\"\u003e\u003c/script\u003e\r\n  \u003cscript type=\"text/javascript\" src=\"https://cdn.bootcdn.net/ajax/libs/echarts/4.3.0/echarts.min.js\"\u003e\u003c/script\u003e\r\n  \u003cscript type=\"text/javascript\" src=\"https://cdn.bootcdn.net/ajax/libs/Swiper/6.7.5/js/swiper.min.js\"\u003e\u003c/script\u003e\r\n  \u003cscript type=\"text/javascript\" src=\"/assets/app.js\"\u003e\u003c/script\u003e\r\n  \u003c/body\u003e\r\n\u003c/html\u003e\r\n```\r\n\r\n#### 3. 多进程多实例并行压缩\r\n\r\n并行压缩主流有以下三种方案\r\n\r\n- 使用 parallel-uglify-plugin 插件\r\n- uglifyjs-webpack-plugin 开启 parallel 参数\r\n- terser-webpack-plugin 开启 parallel 参数 （推荐使用这个，支持 ES6 语法压缩）\r\n\r\n安装插件\r\n\r\n``` shell\r\nnpm install --save-dev terser-webpack-plugin\r\n```\r\n\r\n使用插件\r\n\r\n修改配置webpack.config.js文件\r\n\r\n``` js\r\nconst path = require(\"path\");\r\n// 导入速度分析插件\r\nconst SpeedMeasurePlugin = require(\"speed-measure-webpack-plugin\");\r\n\r\n// 导入代码压缩插件\r\nconst TerserPlugin = require(\"terser-webpack-plugin\");\r\n\r\n// 导入体积分析插件\r\nconst BundleAnalyzerPlugin = require(\"webpack-bundle-analyzer\").BundleAnalyzerPlugin;\r\n\r\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\r\n\r\n//判断是否为生产环境\r\nconst isProduction = process.env.NODE_ENV === 'production';\r\n\r\n// 实例化速度分析插件\r\nconst smp = new SpeedMeasurePlugin();\r\n\r\n//定义 CDN 路径，这里采用 bootstrap 的 cdn\r\nconst cdn = {\r\n    css: [\r\n        'https://cdn.bootcss.com/Swiper/4.5.1/css/swiper.min.css'\r\n    ],\r\n    js: [\r\n        'https://cdn.bootcss.com/vue/2.6.10/vue.min.js',\r\n        'https://cdn.bootcss.com/vue-router/3.1.3/vue-router.min.js',\r\n        'https://cdn.bootcss.com/vuex/3.1.1/vuex.min.js',\r\n        'https://cdn.bootcss.com/axios/0.19.0/axios.min.js',\r\n        'https://cdn.bootcss.com/echarts/4.3.0/echarts.min.js',\r\n        'https://cdn.bootcss.com/Swiper/4.5.1/js/swiper.min.js',\r\n    ]\r\n}\r\n\r\nconst webpackConfig = smp.wrap({\r\n  entry: {\r\n    // ...\r\n  },\r\n  output: {\r\n    // ...\r\n  },\r\n  resolve: {\r\n    // ...\r\n  },\r\n  module: {\r\n    rules: [\r\n      rules: [\r\n        {\r\n          test: /\\.js$/,\r\n          include: path.resolve('src'),\r\n          use: [\r\n            'thread-loader',\r\n            // your expensive loader (e.g babel-loader)\r\n          ],\r\n        }\r\n      ]\r\n    ]\r\n  },\r\n  //生产环境注入 cdn\r\n  externals: isProduction \u0026\u0026 {\r\n    'vue': 'Vue',\r\n    'vuex': 'Vuex',\r\n    'vue-router': 'VueRouter',\r\n    'axios': 'axios',\r\n    'echarts': 'echarts',\r\n    'swiper': 'Swiper'\r\n  } || {},\r\n  optimization: {\r\n    minimizer: [\r\n      new TerserPlugin({\r\n        parallel: 4\r\n      })\r\n    ]\r\n  },\r\n  plugins: [\r\n    new HtmlWebpackPlugin({ filename: '../index.html' }), // output file relative to output.path\r\n    new WebpackCdnPlugin({\r\n      modules: [\r\n        {\r\n          name: 'vue',\r\n          var: 'Vue',\r\n          path: 'vue.min.js'\r\n        },\r\n        {\r\n          name: 'vuex',\r\n          var: 'Vuex',\r\n          path: 'vuex.min.js'\r\n        }\r\n        {\r\n          name: 'vue-router',\r\n          var: 'VueRouter',\r\n          path: 'vue-router.min.js'\r\n        },\r\n        {\r\n          name: 'axios',\r\n          var: 'axios',\r\n          path: 'axios.min.js'\r\n        }\r\n        {\r\n          name: 'echarts',\r\n          var: 'echarts',\r\n          path: 'echarts.min.js'\r\n        },\r\n        {\r\n          name: 'swiper',\r\n          var: 'Swiper',\r\n          path: 'swiper.min.js'\r\n        },\r\n      ],\r\n      prod: isProduction,\r\n      prodUrl: '//cdn.bootcdn.net/ajax/libs/:name/:version/:path' // =\u003e https://cdn.bootcdn.net/ajax/libs/xxx/xxx/xxx(`:name`,`:version`和`:path`为模板变量)\r\n      publicPath: '/node_modules/dist', // override when prod is false\r\n    }),\r\n    new MyPlugin(),\r\n    new MyOtherPlugin(),\r\n  ],\r\n});\r\n\r\nmodule.exports = webpackConfig;\r\n```\r\n\r\n#### 4. 使用 polyfill 动态服务\r\n\r\nPolyfill 可以为旧浏览器提供和标准 API 一样的功能。比如你想要 IE 浏览器实现 Promise 和 fetch 功能，你需要手动引入 es6-promise、whatwg-fetch。而通过 Polyfill.io，你只需要引入一个 JS 文件。\r\n\r\nPolyfill.io 通过分析请求头信息中的 UserAgent 实现自动加载浏览器所需的 polyfills。 Polyfill.io 有一份默认功能列表，包括了最常见的 polyfills：document.querySelector、Element.classList、ES5 新增的 Array 方法、Date.now、ES6 中的 Object.assign、Promise 等。\r\n\r\n动态 `polyfill` 指的是根据不同的浏览器，动态载入需要的 `polyfill`。 `Polyfill.io` 通过尝试使用 `polyfill` 重新创建缺少的功能，可以更轻松地支持不同的浏览器，并且可以大幅度的减少构建体积。\r\n\r\nPolyfill Service 原理\r\n\r\n识别 User Agent，下发不同的 Polyfill\r\n\r\n![Webpack polyfill 服务](https://user-images.githubusercontent.com/8088864/126054825-2e1a0e44-2eb7-4668-b044-de846427e577.png)\r\n\r\n使用方法：\r\n\r\n在 index.html 中引入如下 script 标签\r\n\r\n``` html\r\n\u003c!DOCTYPE html\u003e\r\n\u003chtml lang=\"en\"\u003e\r\n\u003chead\u003e\r\n\u003cmeta charset=\"UTF-8\"\u003e\r\n\u003ctitle\u003eDocument\u003c/title\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n\u003c/body\u003e\r\n\u003cscript src=\"https://cdn.polyfill.io/v2/polyfill.min.js?callback=main\" async defer\u003e\u003c/script\u003e\r\n\u003cscript\u003e\r\nfunction main () {\r\n  var node=document.createElement(\"script\");\r\n  node.src=\"index.js\";\r\n  document.body.appendChild(node);\r\n}\r\n\u003c/script\u003e\r\n\u003c/html\u003e\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/interview/issues/95/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/interview/issues/95/timeline","performed_via_github_app":null,"state_reason":null},"menus":["### 打包分析","#### 1. 速度分析","#### 2. 体积分析","### 打包优化","#### 1. 多进程多实例构建，资源并行解析","#### 2. 公用代码提取，使用 CDN 加载","#### 3. 多进程多实例并行压缩","#### 4. 使用 polyfill 动态服务"]},"__N_SSG":true},"page":"/questions/[id]","query":{"id":"95"},"buildId":"MQUtFiptr90W41domt60c","assetPrefix":"/frontend","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>