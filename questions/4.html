<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>卡鲁秋 - 前端小工具</title><link rel="icon" href="/frontend/favicon.ico"/><meta name="description" content="卡鲁秋的前端工具网站，提供了一系列实用的前端开发工具和功能，技术网站汇总，旨在帮助开发者更加高效地进行前端开发。"/><meta name="keywords" content="前端工具,前端开发,前端开发工具,前端开发工具集合,toolbox,frontend,卡鲁秋,Hank,HankLiu"/><meta name="author" content="Hank.Liu"/><meta name="next-head-count" content="7"/><link rel="stylesheet" href="/frontend/styles/animate.css/@4.1.1/animate.css"/><link rel="preload" href="/frontend/_next/static/css/f5460a021fc371e8.css" as="style"/><link rel="stylesheet" href="/frontend/_next/static/css/f5460a021fc371e8.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/frontend/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/frontend/_next/static/chunks/webpack-1bf31be8095fc118.js" defer=""></script><script src="/frontend/_next/static/chunks/framework-aec4381329cec0e4.js" defer=""></script><script src="/frontend/_next/static/chunks/main-899fdecfa3f91f4c.js" defer=""></script><script src="/frontend/_next/static/chunks/pages/_app-f9f0bae13d326327.js" defer=""></script><script src="/frontend/_next/static/chunks/9691-52831ba1a45a37ee.js" defer=""></script><script src="/frontend/_next/static/chunks/8490-9c9cad1e305c687c.js" defer=""></script><script src="/frontend/_next/static/chunks/1664-f865873e77459860.js" defer=""></script><script src="/frontend/_next/static/chunks/2555-5e820ef97119b9c3.js" defer=""></script><script src="/frontend/_next/static/chunks/pages/questions/%5Bid%5D-b2a1ba3fa917fcf8.js" defer=""></script><script src="/frontend/_next/static/tROOKkd8JQS2v5FcY7ODr/_buildManifest.js" defer=""></script><script src="/frontend/_next/static/tROOKkd8JQS2v5FcY7ODr/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex h-full min-h-[100vh] w-full flex-col" style="flex-direction:column;min-height:100vh"><main class="flex flex-1 grow-[1] flex-col" style="flex:1"><div class="flex h-full flex-1 flex-col" style="position:relative"><div class="flex space-x-6 bg-white p-6"><div class="flex-1"><div class="ant-card ant-card-bordered article-card min-h-full !border-[#d9d9d9] css-12jzuas"><div class="ant-card-body"><article><header><h1 class="mb-5 text-4xl font-bold">前端性能优化</h1></header><section class="mb-12 flex items-center space-x-8"><div class="ant-space css-12jzuas ant-space-horizontal ant-space-align-center group cursor-pointer"><div class="ant-space-item" style="margin-right:8px"><span role="img" aria-label="branches" class="anticon anticon-branches group-hover:text-[#1171ee]"><svg viewBox="64 64 896 896" focusable="false" data-icon="branches" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span></div><div class="ant-space-item"><span class="group-hover:text-[#1171ee]">#4</span></div></div><div class="ant-space css-12jzuas ant-space-horizontal ant-space-align-center group cursor-pointer"><div class="ant-space-item"><span class="group-hover:text-sky-500">hankliu62</span></div></div><div class="ant-space css-12jzuas ant-space-horizontal ant-space-align-center"><div class="ant-space-item"><span class="text-[#8a919f]">2024-02-12 05:11:37</span></div></div><div class="ant-space css-12jzuas ant-space-horizontal ant-space-align-center"><div class="ant-space-item"><div class="flex items-center justify-start"><span class="ant-tag ant-tag-has-color css-12jzuas" style="background-color:#1d76db">engine</span><span class="ant-tag ant-tag-has-color css-12jzuas" style="background-color:#383040">javascript</span></div></div></div><div class="ant-space css-12jzuas ant-space-horizontal ant-space-align-center"><div class="ant-space-item"><ul class="ant-rate css-12jzuas ant-rate-disabled" tabindex="-1" role="radiogroup"><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="1" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="2" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="3" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="4" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="5" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li></ul></div></div></section><section><div><div class="ant-skeleton ant-skeleton-active css-12jzuas"><div class="ant-skeleton-content"><h3 class="ant-skeleton-title" style="width:38%"></h3><ul class="ant-skeleton-paragraph"><li></li><li></li><li style="width:61%"></li></ul></div></div></div></section></article></div></div></div><div class="w-64 bg-white"><div><div class=""><div class="ant-collapse ant-collapse-icon-position-end question-menus-collapse css-12jzuas"><div class="ant-collapse-item ant-collapse-item-active"><div class="ant-collapse-header" aria-expanded="true" aria-disabled="false" role="button" tabindex="0"><div class="ant-collapse-expand-icon"><span role="img" aria-label="right" class="anticon anticon-right ant-collapse-arrow"><svg viewBox="64 64 896 896" focusable="false" style="-ms-transform:rotate(90deg);transform:rotate(90deg)" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></div><span class="ant-collapse-header-text"><span class="text-base">目录</span></span><div class="ant-collapse-extra"><div class="-mr-2">收起</div></div></div><div class="ant-collapse-content ant-collapse-content-active"><div class="ant-collapse-content-box"><ul class="max-h-[620px] list-none space-y-3 overflow-y-auto text-slate-500 dark:text-slate-400"><li id="### 1. 减少 HTTP 请求" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base !border-sky-500"><a class="w-full overflow-hidden !text-[#515767] !text-sky-500" href="/frontend/questions/4#1.-%E5%87%8F%E5%B0%91-http-%E8%AF%B7%E6%B1%82"><div class="truncate" style="padding-left:16px">1. 减少 HTTP 请求</div></a></li><li id="### 2. 使用 HTTP2" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#2.-%E4%BD%BF%E7%94%A8-http2"><div class="truncate" style="padding-left:16px">2. 使用 HTTP2</div></a></li><li id="#### 解析速度快" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E8%A7%A3%E6%9E%90%E9%80%9F%E5%BA%A6%E5%BF%AB"><div class="truncate" style="padding-left:32px">解析速度快</div></a></li><li id="#### 多路复用" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8"><div class="truncate" style="padding-left:32px">多路复用</div></a></li><li id="#### 首部压缩" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E9%A6%96%E9%83%A8%E5%8E%8B%E7%BC%A9"><div class="truncate" style="padding-left:32px">首部压缩</div></a></li><li id="#### 优先级" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E4%BC%98%E5%85%88%E7%BA%A7"><div class="truncate" style="padding-left:32px">优先级</div></a></li><li id="#### 流量控制" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><div class="truncate" style="padding-left:32px">流量控制</div></a></li><li id="#### 服务器推送" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81"><div class="truncate" style="padding-left:32px">服务器推送</div></a></li><li id="### 3. 使用服务端渲染" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#3.-%E4%BD%BF%E7%94%A8%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93"><div class="truncate" style="padding-left:16px">3. 使用服务端渲染</div></a></li><li id="#### 客户端渲染过程" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B"><div class="truncate" style="padding-left:32px">客户端渲染过程</div></a></li><li id="#### 服务端渲染过程" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%B8%B2%E6%9F%93%E8%BF%87%E7%A8%8B"><div class="truncate" style="padding-left:32px">服务端渲染过程</div></a></li><li id="### 4. 静态资源使用 CDN" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#4.-%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E4%BD%BF%E7%94%A8-cdn"><div class="truncate" style="padding-left:16px">4. 静态资源使用 CDN</div></a></li><li id="#### CDN 原理" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#cdn-%E5%8E%9F%E7%90%86"><div class="truncate" style="padding-left:32px">CDN 原理</div></a></li><li id="### 5. 将 CSS 放在文件头部，JavaScript 文件放在底部" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#5.-%E5%B0%86-css-%E6%94%BE%E5%9C%A8%E6%96%87%E4%BB%B6%E5%A4%B4%E9%83%A8javascript-%E6%96%87%E4%BB%B6%E6%94%BE%E5%9C%A8%E5%BA%95%E9%83%A8"><div class="truncate" style="padding-left:16px">5. 将 CSS 放在文件头部，JavaScript 文件放在底部</div></a></li><li id="### 6. 使用字体图标 iconfont 代替图片图标" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#6.-%E4%BD%BF%E7%94%A8%E5%AD%97%E4%BD%93%E5%9B%BE%E6%A0%87-iconfont-%E4%BB%A3%E6%9B%BF%E5%9B%BE%E7%89%87%E5%9B%BE%E6%A0%87"><div class="truncate" style="padding-left:16px">6. 使用字体图标 iconfont 代替图片图标</div></a></li><li id="#### 压缩字体文件" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E5%8E%8B%E7%BC%A9%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6"><div class="truncate" style="padding-left:32px">压缩字体文件</div></a></li><li id="### 7. 善用缓存，不重复加载相同的资源" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#7.-%E5%96%84%E7%94%A8%E7%BC%93%E5%AD%98%E4%B8%8D%E9%87%8D%E5%A4%8D%E5%8A%A0%E8%BD%BD%E7%9B%B8%E5%90%8C%E7%9A%84%E8%B5%84%E6%BA%90"><div class="truncate" style="padding-left:16px">7. 善用缓存，不重复加载相同的资源</div></a></li><li id="### 8. 压缩文件" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#8.-%E5%8E%8B%E7%BC%A9%E6%96%87%E4%BB%B6"><div class="truncate" style="padding-left:16px">8. 压缩文件</div></a></li><li id="### 9. 图片优化" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#9.-%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96"><div class="truncate" style="padding-left:16px">9. 图片优化</div></a></li><li id="#### (1). 图片延迟加载" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#(1).-%E5%9B%BE%E7%89%87%E5%BB%B6%E8%BF%9F%E5%8A%A0%E8%BD%BD"><div class="truncate" style="padding-left:32px">(1). 图片延迟加载</div></a></li><li id="#### (2). 响应式图片" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#(2).-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%9B%BE%E7%89%87"><div class="truncate" style="padding-left:32px">(2). 响应式图片</div></a></li><li id="#### (3). 调整图片大小" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#(3).-%E8%B0%83%E6%95%B4%E5%9B%BE%E7%89%87%E5%A4%A7%E5%B0%8F"><div class="truncate" style="padding-left:32px">(3). 调整图片大小</div></a></li><li id="#### (4). 降低图片质量" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#(4).-%E9%99%8D%E4%BD%8E%E5%9B%BE%E7%89%87%E8%B4%A8%E9%87%8F"><div class="truncate" style="padding-left:32px">(4). 降低图片质量</div></a></li><li id="#### (5). 尽可能利用 CSS3 效果代替图片" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#(5).-%E5%B0%BD%E5%8F%AF%E8%83%BD%E5%88%A9%E7%94%A8-css3-%E6%95%88%E6%9E%9C%E4%BB%A3%E6%9B%BF%E5%9B%BE%E7%89%87"><div class="truncate" style="padding-left:32px">(5). 尽可能利用 CSS3 效果代替图片</div></a></li><li id="#### (6). 使用 webp 格式的图片" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#(6).-%E4%BD%BF%E7%94%A8-webp-%E6%A0%BC%E5%BC%8F%E7%9A%84%E5%9B%BE%E7%89%87"><div class="truncate" style="padding-left:32px">(6). 使用 webp 格式的图片</div></a></li><li id="### 10. 通过 webpack 按需加载代码，提取第三库代码，减少 ES6 转为 ES5 的冗余代码" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#10.-%E9%80%9A%E8%BF%87-webpack-%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD%E4%BB%A3%E7%A0%81%E6%8F%90%E5%8F%96%E7%AC%AC%E4%B8%89%E5%BA%93%E4%BB%A3%E7%A0%81%E5%87%8F%E5%B0%91-es6-%E8%BD%AC%E4%B8%BA-es5-%E7%9A%84%E5%86%97%E4%BD%99%E4%BB%A3%E7%A0%81"><div class="truncate" style="padding-left:16px">10. 通过 webpack 按需加载代码，提取第三库代码，减少 ES6 转为 ES5 的冗余代码</div></a></li><li id="#### 根据文件内容生成文件名，结合 import 动态引入组件实现按需加载" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E6%A0%B9%E6%8D%AE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6%E5%90%8D%E7%BB%93%E5%90%88-import-%E5%8A%A8%E6%80%81%E5%BC%95%E5%85%A5%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD"><div class="truncate" style="padding-left:32px">根据文件内容生成文件名，结合 import 动态引入组件实现按需加载</div></a></li><li id="#### 提取第三方库" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E6%8F%90%E5%8F%96%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93"><div class="truncate" style="padding-left:32px">提取第三方库</div></a></li><li id="#### 减少 ES6 转为 ES5 的冗余代码" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E5%87%8F%E5%B0%91-es6-%E8%BD%AC%E4%B8%BA-es5-%E7%9A%84%E5%86%97%E4%BD%99%E4%BB%A3%E7%A0%81"><div class="truncate" style="padding-left:32px">减少 ES6 转为 ES5 的冗余代码</div></a></li><li id="### 11. 减少重绘重排" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#11.-%E5%87%8F%E5%B0%91%E9%87%8D%E7%BB%98%E9%87%8D%E6%8E%92"><div class="truncate" style="padding-left:16px">11. 减少重绘重排</div></a></li><li id="#### 重排" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E9%87%8D%E6%8E%92"><div class="truncate" style="padding-left:32px">重排</div></a></li><li id="#### 重绘" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E9%87%8D%E7%BB%98"><div class="truncate" style="padding-left:32px">重绘</div></a></li><li id="### 12. 使用事件委托" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#12.-%E4%BD%BF%E7%94%A8%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98"><div class="truncate" style="padding-left:16px">12. 使用事件委托</div></a></li><li id="### 13. 注意程序的局部性" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#13.-%E6%B3%A8%E6%84%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%B1%80%E9%83%A8%E6%80%A7"><div class="truncate" style="padding-left:16px">13. 注意程序的局部性</div></a></li><li id="### 14. if-else 对比 switch" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#14.-if-else-%E5%AF%B9%E6%AF%94-switch"><div class="truncate" style="padding-left:16px">14. if-else 对比 switch</div></a></li><li id="### 15. 查找表" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#15.-%E6%9F%A5%E6%89%BE%E8%A1%A8"><div class="truncate" style="padding-left:16px">15. 查找表</div></a></li><li id="### 16. 避免页面卡顿" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#16.-%E9%81%BF%E5%85%8D%E9%A1%B5%E9%9D%A2%E5%8D%A1%E9%A1%BF"><div class="truncate" style="padding-left:16px">16. 避免页面卡顿</div></a></li><li id="### 17. 使用 requestAnimationFrame 来实现视觉变化" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#17.-%E4%BD%BF%E7%94%A8-requestanimationframe-%E6%9D%A5%E5%AE%9E%E7%8E%B0%E8%A7%86%E8%A7%89%E5%8F%98%E5%8C%96"><div class="truncate" style="padding-left:16px">17. 使用 requestAnimationFrame 来实现视觉变化</div></a></li><li id="### 18. 使用 Web Workers" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#18.-%E4%BD%BF%E7%94%A8-web-workers"><div class="truncate" style="padding-left:16px">18. 使用 Web Workers</div></a></li><li id="### 19. 使用位操作" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#19.-%E4%BD%BF%E7%94%A8%E4%BD%8D%E6%93%8D%E4%BD%9C"><div class="truncate" style="padding-left:16px">19. 使用位操作</div></a></li><li id="#### 取模" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E5%8F%96%E6%A8%A1"><div class="truncate" style="padding-left:32px">取模</div></a></li><li id="#### 取整" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E5%8F%96%E6%95%B4"><div class="truncate" style="padding-left:32px">取整</div></a></li><li id="#### 位掩码" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E4%BD%8D%E6%8E%A9%E7%A0%81"><div class="truncate" style="padding-left:32px">位掩码</div></a></li><li id="### 20. 不要覆盖原生方法" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#20.-%E4%B8%8D%E8%A6%81%E8%A6%86%E7%9B%96%E5%8E%9F%E7%94%9F%E6%96%B9%E6%B3%95"><div class="truncate" style="padding-left:16px">20. 不要覆盖原生方法</div></a></li><li id="### 21. 降低 CSS 选择器的复杂性" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#21.-%E9%99%8D%E4%BD%8E-css-%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E5%A4%8D%E6%9D%82%E6%80%A7"><div class="truncate" style="padding-left:16px">21. 降低 CSS 选择器的复杂性</div></a></li><li id="#### (1). 浏览器读取选择器，遵循的原则是从选择器的右边到左边读取" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#(1).-%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AF%BB%E5%8F%96%E9%80%89%E6%8B%A9%E5%99%A8%E9%81%B5%E5%BE%AA%E7%9A%84%E5%8E%9F%E5%88%99%E6%98%AF%E4%BB%8E%E9%80%89%E6%8B%A9%E5%99%A8%E7%9A%84%E5%8F%B3%E8%BE%B9%E5%88%B0%E5%B7%A6%E8%BE%B9%E8%AF%BB%E5%8F%96"><div class="truncate" style="padding-left:32px">(1). 浏览器读取选择器，遵循的原则是从选择器的右边到左边读取</div></a></li><li id="#### (2). CSS 选择器优先级" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#(2).-css-%E9%80%89%E6%8B%A9%E5%99%A8%E4%BC%98%E5%85%88%E7%BA%A7"><div class="truncate" style="padding-left:32px">(2). CSS 选择器优先级</div></a></li><li id="### 22. 使用 flexbox 而不是较早的布局模型" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#22.-%E4%BD%BF%E7%94%A8-flexbox-%E8%80%8C%E4%B8%8D%E6%98%AF%E8%BE%83%E6%97%A9%E7%9A%84%E5%B8%83%E5%B1%80%E6%A8%A1%E5%9E%8B"><div class="truncate" style="padding-left:16px">22. 使用 flexbox 而不是较早的布局模型</div></a></li><li id="### 23. 使用 transform 和 opacity 属性更改来实现动画" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#23.-%E4%BD%BF%E7%94%A8-transform-%E5%92%8C-opacity-%E5%B1%9E%E6%80%A7%E6%9B%B4%E6%94%B9%E6%9D%A5%E5%AE%9E%E7%8E%B0%E5%8A%A8%E7%94%BB"><div class="truncate" style="padding-left:16px">23. 使用 transform 和 opacity 属性更改来实现动画</div></a></li><li id="### 24. 合理使用规则，避免过度优化" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#24.-%E5%90%88%E7%90%86%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99%E9%81%BF%E5%85%8D%E8%BF%87%E5%BA%A6%E4%BC%98%E5%8C%96"><div class="truncate" style="padding-left:16px">24. 合理使用规则，避免过度优化</div></a></li><li id="#### 检查加载性能" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E6%A3%80%E6%9F%A5%E5%8A%A0%E8%BD%BD%E6%80%A7%E8%83%BD"><div class="truncate" style="padding-left:32px">检查加载性能</div></a></li><li id="#### 检查运行性能" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/4#%E6%A3%80%E6%9F%A5%E8%BF%90%E8%A1%8C%E6%80%A7%E8%83%BD"><div class="truncate" style="padding-left:32px">检查运行性能</div></a></li></ul></div></div></div></div></div></div></div></div></div><div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"url":"https://api.github.com/repos/hankliu62/interview/issues/4","repository_url":"https://api.github.com/repos/hankliu62/interview","labels_url":"https://api.github.com/repos/hankliu62/interview/issues/4/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/interview/issues/4/comments","events_url":"https://api.github.com/repos/hankliu62/interview/issues/4/events","html_url":"https://github.com/hankliu62/interview/issues/4","id":2129432750,"node_id":"I_kwDOLNphd85-7JCu","number":4,"title":"前端性能优化","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":6547468011,"node_id":"LA_kwDOLNphd88AAAABhkJu6w","url":"https://api.github.com/repos/hankliu62/interview/labels/engine","name":"engine","color":"1d76db","default":false,"description":"工程化相关"},{"id":6547468110,"node_id":"LA_kwDOLNphd88AAAABhkJvTg","url":"https://api.github.com/repos/hankliu62/interview/labels/javascript","name":"javascript","color":"383040","default":false,"description":"Javascript相关"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-02-12T05:11:37Z","updated_at":"2024-02-12T05:11:37Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"性能优化是把双刃剑，有好的一面也有坏的一面。好的一面就是能提升网站性能，坏的一面就是配置麻烦，或者要遵守的规则太多。并且某些性能优化规则并不适用所有场景，需要谨慎使用。\r\n\r\n下面列出来了前端性能的24条建议:\r\n\r\n### 1. 减少 HTTP 请求\r\n\r\n一个完整的 HTTP 请求需要经历 DNS 查找，TCP 握手，浏览器发出 HTTP 请求，服务器接收请求，服务器处理请求并发回响应，浏览器接收响应等过程。\r\n\r\n接下来看一个具体的例子帮助理解 HTTP ：\r\n\r\n![http请求瀑布图](https://user-images.githubusercontent.com/8088864/125281253-957bc880-e348-11eb-97bf-464d4531ce8e.png)\r\n\r\n这是一个 HTTP 请求，请求的文件大小为 28.4KB。\r\n\r\n名词解释：\r\n\r\n- Queueing: 在请求队列中的时间。\r\n- Stalled: 从TCP 连接建立完成，到真正可以传输数据之间的时间差，此时间包括代理协商时间。\r\n- Proxy negotiation: 与代理服务器连接进行协商所花费的时间。\r\n- DNS Lookup: 执行DNS查找所花费的时间，页面上的每个不同的域都需要进行DNS查找。\r\n- Initial Connection / Connecting: 建立连接所花费的时间，包括TCP握手，重试和协商SSL。\r\n- SSL: 完成SSL握手所花费的时间。\r\n- Request sent: 发出网络请求所花费的时间，通常为一毫秒的时间。\r\n- Waiting(TFFB): TFFB 是发出页面请求到接收到应答数据第一个字节的时间。\r\n- Content Download: 接收响应数据所花费的时间。\r\n\r\n从这个例子可以看出，真正下载数据的时间占比为 13.05 / 204.16 = 6.39%，文件越小，这个比例越小，文件越大，比例就越高。这就是为什么要建议将多个小文件合并为一个大文件，从而减少 HTTP 请求次数的原因。\r\n\r\n### 2. 使用 HTTP2\r\n\r\nHTTP2 相比 HTTP1.1 有如下几个优点：\r\n\r\n#### 解析速度快\r\n\r\n服务器解析 HTTP1.1 的请求时，必须不断地读入字节，直到遇到分隔符 CRLF 为止。而解析 HTTP2 的请求就不用这么麻烦，因为 HTTP2 是基于帧的协议，每个帧都有表示帧长度的字段。\r\n\r\n#### 多路复用\r\n\r\nHTTP1.1 如果要同时发起多个请求，就得建立多个 TCP 连接，因为一个 TCP 连接同时只能处理一个 HTTP1.1 的请求。\r\n\r\n在 HTTP2 上，多个请求可以共用一个 TCP 连接，这称为多路复用。同一个请求和响应用一个流来表示，并有唯一的流 ID 来标识。 多个请求和响应在 TCP 连接中可以乱序发送，到达目的地后再通过流 ID 重新组建。\r\n\r\n#### 首部压缩\r\n\r\nHTTP2 提供了首部压缩功能。\r\n\r\n例如有如下两个请求：\r\n\r\n```\r\n// 请求1\r\n:authority: unpkg.zhimg.com\r\n:method: GET\r\n:path: /za-js-sdk@2.16.0/dist/zap.js\r\n:scheme: https\r\naccept: */*\r\naccept-encoding: gzip, deflate, br\r\naccept-language: zh-CN,zh;q=0.9\r\ncache-control: no-cache\r\npragma: no-cache\r\nreferer: https://www.zhihu.com/\r\nsec-fetch-dest: script\r\nsec-fetch-mode: no-cors\r\nsec-fetch-site: cross-site\r\nuser-agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36\r\n\r\n// 请求2\r\n:authority: zz.bdstatic.com\r\n:method: GET\r\n:path: /linksubmit/push.js\r\n:scheme: https\r\naccept: */*\r\naccept-encoding: gzip, deflate, br\r\naccept-language: zh-CN,zh;q=0.9\r\ncache-control: no-cache\r\npragma: no-cache\r\nreferer: https://www.zhihu.com/\r\nsec-fetch-dest: script\r\nsec-fetch-mode: no-cors\r\nsec-fetch-site: cross-site\r\nuser-agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.122 Safari/537.36\r\n```\r\n\r\n从上面两个请求可以看出来，有很多数据都是重复的。如果可以把相同的首部存储起来，仅发送它们之间不同的部分，就可以节省不少的流量，加快请求的时间。\r\n\r\nHTTP/2 在客户端和服务器端使用“首部表”来跟踪和存储之前发送的键－值对，对于相同的数据，不再通过每次请求和响应发送。\r\n\r\n下面再来看一个简化的例子，假设客户端按顺序发送如下请求首部：\r\n\r\n```\r\nHeader1:foo\r\nHeader2:bar\r\nHeader3:bat\r\n```\r\n\r\n当客户端发送请求时，它会根据首部值创建一张表：\r\n\r\n| 索引 | 首部名称 | 值 |\r\n| ---- | ---- | ---- |\r\n| 62 | Header1 | foo |\r\n| 63 | Header2 | bar |\r\n| 64 | Header3 | bar |\r\n\r\n如果服务器收到了请求，它会照样创建一张表。 当客户端发送下一个请求的时候，如果首部相同，它可以直接发送这样的首部块：\r\n\r\n```\r\n62 63 64\r\n```\r\n\r\n服务器会查找先前建立的表格，并把这些数字还原成索引对应的完整首部。\r\n\r\n#### 优先级\r\n\r\nHTTP2 可以对比较紧急的请求设置一个较高的优先级，服务器在收到这样的请求后，可以优先处理。\r\n\r\n#### 流量控制\r\n\r\n由于一个 TCP 连接流量带宽（根据客户端到服务器的网络带宽而定）是固定的，当有多个请求并发时，一个请求占的流量多，另一个请求占的流量就会少。流量控制可以对不同的流的流量进行精确控制。\r\n\r\n#### 服务器推送\r\n\r\nHTTP2 新增的一个强大的新功能，就是服务器可以对一个客户端请求发送多个响应。换句话说，除了对最初请求的响应外，服务器还可以额外向客户端推送资源，而无需客户端明确地请求。\r\n\r\n例如当浏览器请求一个网站时，除了返回 HTML 页面外，服务器还可以根据 HTML 页面中的资源的 URL，来提前推送资源。\r\n\r\n现在有很多网站已经开始使用 HTTP2 了，例如知乎：\r\n\r\n![服务器推送](https://user-images.githubusercontent.com/8088864/125283274-d83ea000-e34a-11eb-95d5-7881c4af0403.jpg)\r\n\r\n其中 h2 是指 HTTP2 协议，http/1.1 则是指 HTTP1.1 协议。\r\n\r\n参考资料：\r\n\r\n- [半小时搞懂 HTTP、HTTPS和HTTP2](https://github.com/woai3c/Front-end-articles/blob/master/http-https-http2.md)\r\n\r\n### 3. 使用服务端渲染\r\n\r\n客户端渲染: 获取 HTML 文件，根据需要下载 JavaScript 文件，运行文件，生成 DOM，再渲染。\r\n\r\n服务端渲染：服务端返回 HTML 文件，客户端只需解析 HTML。\r\n\r\n- 优点：首屏渲染快，SEO 好。\r\n- 缺点：配置麻烦，增加了服务器的计算压力。\r\n\r\n下面我用 Vue SSR 做示例，简单的描述一下 SSR 过程。\r\n\r\n#### 客户端渲染过程\r\n\r\n1. 访问客户端渲染的网站。\r\n2. 服务器返回一个包含了引入资源语句和 \\\u003cdiv id=\"app\"\u003e\\\u003c/div\u003e 的 HTML 文件。\r\n3. 客户端通过 HTTP 向服务器请求资源，当必要的资源都加载完毕后，执行 new Vue() 开始实例化并渲染页面。\r\n\r\n#### 服务端渲染过程\r\n\r\n1. 访问服务端渲染的网站。\r\n2. 服务器会查看当前路由组件需要哪些资源文件，然后将这些文件的内容填充到 HTML 文件。如果有 ajax 请求，就会执行它进行数据预取并填充到 HTML 文件里，最后返回这个 HTML 页面。\r\n3. 当客户端接收到这个 HTML 页面时，可以马上就开始渲染页面。与此同时，页面也会加载资源，当必要的资源都加载完毕后，开始执行 new Vue() 开始实例化并接管页面。\r\n\r\n从上述两个过程中可以看出，区别就在于第二步。客户端渲染的网站会直接返回 HTML 文件，而服务端渲染的网站则会渲染完页面再返回这个 HTML 文件。\r\n\r\n这样做的好处是什么？是更快的内容到达时间 (time-to-content)。\r\n\r\n假设你的网站需要加载完 abcd 四个文件才能渲染完毕。并且每个文件大小为 1 M。\r\n\r\n这样一算：客户端渲染的网站需要加载 4 个文件和 HTML 文件才能完成首页渲染，总计大小为 4M（忽略 HTML 文件大小）。而服务端渲染的网站只需要加载一个渲染完毕的 HTML 文件就能完成首页渲染，总计大小为已经渲染完毕的 HTML 文件（这种文件不会太大，一般为几百K，我的个人博客网站（SSR）加载的 HTML 文件为 400K）。这就是服务端渲染更快的原因。\r\n\r\n参考资料：\r\n\r\n- [vue-ssr-demo](https://github.com/woai3c/vue-ssr-demo)\r\n- [Vue.js 服务器端渲染指南](https://ssr.vuejs.org/zh/)\r\n\r\n### 4. 静态资源使用 CDN\r\n\r\n内容分发网络（CDN）是一组分布在多个不同地理位置的 Web 服务器。我们都知道，当服务器离用户越远时，延迟越高。CDN 就是为了解决这一问题，在多个位置部署服务器，让用户离服务器更近，从而缩短请求时间。\r\n\r\n#### CDN 原理\r\n\r\n当用户访问一个网站时，如果没有 CDN，过程是这样的：\r\n\r\n1. 浏览器要将域名解析为 IP 地址，所以需要向本地 DNS 发出请求。\r\n2. 本地 DNS 依次向根服务器、顶级域名服务器、权限服务器发出请求，得到网站服务器的 IP 地址。\r\n3. 本地 DNS 将 IP 地址发回给浏览器，浏览器向网站服务器 IP 地址发出请求并得到资源。\r\n\r\n![没有CDN的资源请求](https://user-images.githubusercontent.com/8088864/125375921-8171ae80-e3bc-11eb-9d66-adb57433b67a.jpg)\r\n\r\n如果用户访问的网站部署了 CDN，过程是这样的：\r\n\r\n1. 浏览器要将域名解析为 IP 地址，所以需要向本地 DNS 发出请求。\r\n2. 本地 DNS 依次向根服务器、顶级域名服务器、权限服务器发出请求，得到全局负载均衡系统（GSLB）的 IP 地址。\r\n3. 本地 DNS 再向 GSLB 发出请求，GSLB 的主要功能是根据本地 DNS 的 IP 地址判断用户的位置，筛选出距离用户较近的本地负载均衡系统（SLB），并将该 SLB 的 IP 地址作为结果返回给本地 DNS。\r\n4. 本地 DNS 将 SLB 的 IP 地址发回给浏览器，浏览器向 SLB 发出请求。\r\n5. SLB 根据浏览器请求的资源和地址，选出最优的缓存服务器发回给浏览器。\r\n6. 浏览器再根据 SLB 发回的地址重定向到缓存服务器。\r\n7. 如果缓存服务器有浏览器需要的资源，就将资源发回给浏览器。如果没有，就向源服务器请求资源，再发给浏览器并缓存在本地。\r\n\r\n![有CDN的资源请求](https://user-images.githubusercontent.com/8088864/125376046-baaa1e80-e3bc-11eb-84ba-c86cd8d63a7f.jpg)\r\n\r\n参考资料：\r\n\r\n- [CDN是什么？使用CDN有什么优势？](https://www.zhihu.com/question/36514327/answer/193768864)\r\n- [CDN原理简析](https://juejin.cn/post/6844903873518239752)\r\n\r\n### 5. 将 CSS 放在文件头部，JavaScript 文件放在底部\r\n\r\n所有放在 head 标签里的 CSS 和 JS 文件都会堵塞渲染。如果这些 CSS 和 JS 需要加载和解析很久的话，那么页面就空白了。所以 JS 文件要放在底部，等 HTML 解析完了再加载 JS 文件。\r\n\r\n那为什么 CSS 文件还要放在头部呢？\r\n\r\n因为先加载 HTML 再加载 CSS，会让用户第一时间看到的页面是没有样式的、“丑陋”的，为了避免这种情况发生，就要将 CSS 文件放在头部了。\r\n\r\n另外，JS 文件也不是不可以放在头部，只要给 script 标签加上 defer 属性就可以了，异步下载，延迟执行。\r\n\r\n### 6. 使用字体图标 iconfont 代替图片图标\r\n\r\n字体图标就是将图标制作成一个字体，使用时就跟字体一样，可以设置属性，例如 font-size、color 等等，非常方便。并且字体图标是矢量图，不会失真。还有一个优点是生成的文件特别小。\r\n\r\n#### 压缩字体文件\r\n\r\n使用 [fontmin-webpack](https://github.com/patrickhulce/fontmin-webpack) 插件对字体文件进行压缩。\r\n\r\n![fontmin-webpack](https://user-images.githubusercontent.com/8088864/125377089-efb77080-e3be-11eb-845b-d8992de47838.png)\r\n\r\n参考资料：\r\n\r\n- [fontmin-webpack](https://github.com/patrickhulce/fontmin-webpack)\r\n- [Iconfont-阿里巴巴矢量图标库](https://www.iconfont.cn/)\r\n\r\n### 7. 善用缓存，不重复加载相同的资源\r\n\r\n为了避免用户每次访问网站都得请求文件，我们可以通过添加 Expires 或 max-age 来控制这一行为。Expires 设置了一个时间，只要在这个时间之前，浏览器都不会请求文件，而是直接使用缓存。而 max-age 是一个相对时间，建议使用 max-age 代替 Expires 。\r\n\r\n不过这样会产生一个问题，当文件更新了怎么办？怎么通知浏览器重新请求文件？\r\n\r\n可以通过更新页面中引用的资源链接地址，让浏览器主动放弃缓存，加载新资源。\r\n\r\n具体做法是把资源地址 URL 的修改与文件内容关联起来，也就是说，只有文件内容变化，才会导致相应 URL 的变更，从而实现文件级别的精确缓存控制。什么东西与文件内容相关呢？我们会很自然的联想到利用[数据摘要要算法](https://cloud.tencent.com/developer/article/1584742)对文件求摘要信息，摘要信息与文件内容一一对应，就有了一种可以精确到单个文件粒度的缓存控制依据了。\r\n\r\n参考资料：\r\n\r\n- [webpack + express 实现文件精确缓存](https://github.com/woai3c/node-blog/blob/master/doc/node-blog7.md)\r\n- [webpack-缓存](https://www.webpackjs.com/guides/caching/)\r\n- [张云龙--大公司里怎样开发和部署前端代码？](https://www.zhihu.com/question/20790576/answer/32602154)\r\n\r\n### 8. 压缩文件\r\n\r\n压缩文件可以减少文件下载时间，让用户体验性更好。\r\n\r\n得益于 webpack 和 node 的发展，现在压缩文件已经非常方便了。\r\n\r\n在 webpack 可以使用如下插件进行压缩：\r\n\r\n- JavaScript：UglifyPlugin\r\n- CSS ：MiniCssExtractPlugin\r\n- HTML：HtmlWebpackPlugin\r\n\r\n其实，我们还可以做得更好。那就是使用 gzip 压缩。可以通过向 HTTP 请求头中的 Accept-Encoding 头添加 gzip 标识来开启这一功能。当然，服务器也得支持这一功能。\r\n\r\ngzip 是目前最流行和最有效的压缩方法。举个例子，我用 Vue 开发的项目构建后生成的 app.js 文件大小为 1.4MB，使用 gzip 压缩后只有 573KB，体积减少了将近 60%。\r\n\r\n附上 webpack 和 node 配置 gzip 的使用方法。\r\n\r\n下载插件\r\n\r\n``` shell\r\nnpm install compression-webpack-plugin --save-dev\r\nnpm install compression\r\n```\r\n\r\nwebpack 配置\r\n\r\n``` js\r\nconst CompressionPlugin = require('compression-webpack-plugin');\r\n\r\nmodule.exports = {\r\n  plugins: [new CompressionPlugin()],\r\n}\r\n```\r\n\r\nnode 配置\r\n\r\n``` js\r\nconst compression = require('compression')\r\n// 在其他中间件前使用\r\napp.use(compression())\r\n```\r\n\r\n### 9. 图片优化\r\n\r\n#### (1). 图片延迟加载\r\n\r\n在页面中，先不给图片设置路径，只有当图片出现在浏览器的可视区域时，才去加载真正的图片，这就是延迟加载。对于图片很多的网站来说，一次性加载全部图片，会对用户体验造成很大的影响，所以需要使用图片延迟加载。\r\n\r\n首先可以将图片这样设置，在页面不可见时图片不会加载：\r\n\r\n``` html\r\n\u003cimg data-src=\"https://avatars0.githubusercontent.com/u/22117876?s=460\u0026u=7bd8f32788df6988833da6bd155c3cfbebc68006\u0026v=4\"\u003e\r\n```\r\n\r\n等页面可见时，使用 JS 加载图片：\r\n\r\n``` js\r\nconst img = document.querySelector('img')\r\nimg.src = img.dataset.src\r\n```\r\n\r\n这样图片就加载出来了，完整的代码可以看一下参考资料。\r\n\r\n参考资料：\r\n\r\n- [web 前端图片懒加载实现原理](https://juejin.cn/post/6844903482164510734)\r\n\r\n#### (2). 响应式图片\r\n\r\n响应式图片的优点是浏览器能够根据屏幕大小自动加载合适的图片。\r\n\r\n通过 picture 实现\r\n\r\n``` html\r\n\u003cpicture\u003e\r\n  \u003csource srcset=\"banner_w1000.jpg\" media=\"(min-width: 801px)\"\u003e\r\n  \u003csource srcset=\"banner_w800.jpg\" media=\"(max-width: 800px)\"\u003e\r\n  \u003cimg src=\"banner_w800.jpg\" alt=\"\"\u003e\r\n\u003c/picture\u003e\r\n```\r\n\r\n通过 @media 实现\r\n\r\n``` css\r\n@media (min-width: 769px) {\r\n  .bg {\r\n    background-image: url(bg1080.jpg);\r\n  }\r\n}\r\n@media (max-width: 768px) {\r\n  .bg {\r\n    background-image: url(bg768.jpg);\r\n  }\r\n}\r\n```\r\n\r\n#### (3). 调整图片大小\r\n\r\n例如，你有一个 1920 * 1080 大小的图片，用缩略图的方式展示给用户，并且当用户鼠标悬停在上面时才展示全图。如果用户从未真正将鼠标悬停在缩略图上，则浪费了下载图片的时间。\r\n\r\n所以，我们可以用两张图片来实行优化。一开始，只加载缩略图，当用户悬停在图片上时，才加载大图。还有一种办法，即对大图进行延迟加载，在所有元素都加载完成后手动更改大图的 src 进行下载。\r\n\r\n#### (4). 降低图片质量\r\n\r\n例如 JPG 格式的图片，100% 的质量和 90% 质量的通常看不出来区别，尤其是用来当背景图的时候。我经常用 PS 切背景图时， 将图片切成 JPG 格式，并且将它压缩到 60% 的质量，基本上看不出来区别。\r\n\r\n压缩方法有两种，一是通过 webpack 插件 image-webpack-loader，二是通过在线网站进行压缩。\r\n\r\n以下附上 webpack 插件 image-webpack-loader 的用法。\r\n\r\n``` shell\r\nnpm install --save-dev image-webpack-loader\r\n```\r\n\r\nwebpack 配置\r\n\r\n``` js\r\n{\r\n  test: /\\.(png|jpe?g|gif|svg)(\\?.*)?$/,\r\n  use:[\r\n    {\r\n    loader: 'url-loader',\r\n    options: {\r\n      limit: 10000, /* 图片大小小于1000字节限制时会自动转成 base64 码引用*/\r\n      name: utils.assetsPath('img/[name].[hash:7].[ext]')\r\n      }\r\n    },\r\n    /*对图片进行压缩*/\r\n    {\r\n      loader: 'image-webpack-loader',\r\n      options: {\r\n        bypassOnDebug: true,\r\n      }\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n参考资料：\r\n\r\n- [img图片在webpack中使用](https://juejin.cn/post/6844903816081457159)\r\n\r\n#### (5). 尽可能利用 CSS3 效果代替图片\r\n\r\n有很多图片使用 CSS 效果（渐变、阴影等）就能画出来，这种情况选择 CSS3 效果更好。因为代码大小通常是图片大小的几分之一甚至几十分之一。\r\n\r\n#### (6). 使用 webp 格式的图片\r\n\r\nWebP 的优势体现在它具有更优的图像数据压缩算法，能带来更小的图片体积，而且拥有肉眼识别无差异的图像质量；同时具备了无损和有损的压缩模式、Alpha 透明以及动画的特性，在 JPEG 和 PNG 上的转化效果都相当优秀、稳定和统一。\r\n\r\n参考资料：\r\n\r\n- [WebP 相对于 PNG、JPG 有什么优势？](https://www.zhihu.com/question/27201061)\r\n\r\n### 10. 通过 webpack 按需加载代码，提取第三库代码，减少 ES6 转为 ES5 的冗余代码\r\n\r\n懒加载或者按需加载，是一种很好的优化网页或应用的方式。这种方式实际上是先把你的代码在一些逻辑断点处分离开，然后在一些代码块中完成某些操作后，立即引用或即将引用另外一些新的代码块。这样加快了应用的初始加载速度，减轻了它的总体体积，因为某些代码块可能永远不会被加载。\r\n\r\n#### 根据文件内容生成文件名，结合 import 动态引入组件实现按需加载\r\n\r\n通过配置 output 的 filename 属性可以实现这个需求。filename 属性的值选项中有一个 [contenthash]，它将根据文件内容创建出唯一 hash。当文件内容发生变化时，[contenthash] 也会发生变化。\r\n\r\n``` js\r\n{\r\n  output: {\r\n    filename: '[name].[contenthash].js',\r\n    chunkFilename: '[name].[contenthash].js',\r\n    path: path.resolve(__dirname, '../dist'),\r\n  },\r\n}\r\n```\r\n\r\n#### 提取第三方库\r\n\r\n由于引入的第三方库一般都比较稳定，不会经常改变。所以将它们单独提取出来，作为长期缓存是一个更好的选择。 这里需要使用 webpack4 的 splitChunk 插件 cacheGroups 选项。\r\n\r\n``` js\r\noptimization: {\r\n  runtimeChunk: {\r\n    name: 'manifest' // 将 webpack 的 runtime 代码拆分为一个单独的 chunk。\r\n  },\r\n  splitChunks: {\r\n    cacheGroups: {\r\n      vendor: {\r\n        name: 'chunk-vendors',\r\n        test: /[\\\\/]node_modules[\\\\/]/,\r\n        priority: -10,\r\n        chunks: 'initial'\r\n      },\r\n      common: {\r\n        name: 'chunk-common',\r\n        minChunks: 2,\r\n        priority: -20,\r\n        chunks: 'initial',\r\n        reuseExistingChunk: true\r\n      }\r\n    },\r\n  }\r\n},\r\n```\r\n\r\n- **test**: 过滤 modules，默认为所有的 modules，可匹配模块路径或 chunk 名字，当匹配到某个 chunk 的名字时，这个 chunk 里面引入的所有 module 都会选中。可以传递的值类型：RegExp、String和Function。\r\n- **priority**: 权重，数字越大表示优先级越高。一个 module 可能会满足多个 cacheGroups 的正则匹配，到底将哪个缓存组应用于这个 module，取决于优先级。\r\n- **reuseExistingChunk**: 表示是否使用已有的 chunk，true 则表示如果当前的 chunk 包含的模块已经被抽取出去了，那么将不会重新生成新的，即几个 chunk 复用被拆分出去的一个 module。\r\n- **minChunks**(默认是1): 在分割之前，这个代码块最小应该被引用的次数（译注：保证代码块复用性，默认配置的策略是不需要多次引用也可以被分割）\r\n- **chunks**(默认是async): initial、async和all。chunks改为all，表示同时对静态加载(initial)和动态加载(async)起作用。\r\n- **name**(打包的chunks的名字): 字符串或者函数(函数可以根据条件自定义名字)\r\n\r\n#### 减少 ES6 转为 ES5 的冗余代码\r\n\r\nBabel 转化后的代码想要实现和原来代码一样的功能需要借助一些帮助函数，比如\r\n\r\n``` js\r\nclass Person {}\r\n```\r\n\r\n会被转换为：\r\n\r\n``` js\r\n\"use strict\";\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n  if (!(instance instanceof Constructor)) {\r\n    throw new TypeError(\"Cannot call a class as a function\");\r\n  }\r\n}\r\n\r\nvar Person = function Person() {\r\n  _classCallCheck(this, Person);\r\n};\r\n```\r\n\r\n这里 `_classCallCheck` 就是一个 `helper` 函数，如果在很多文件里都声明了类，那么就会产生很多个这样的 `helper` 函数。\r\n\r\n这里的 `@babel/runtime` 包就声明了所有需要用到的帮助函数，而 `@babel/plugin-transform-runtime` 的作用就是将所有需要 `helper` 函数的文件，从 `@babel/runtime`包引进来：\r\n\r\n``` js\r\n\"use strict\";\r\n\r\nvar _classCallCheck2 = require(\"@babel/runtime/helpers/classCallCheck\");\r\n\r\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\r\n\r\nfunction _interopRequireDefault(obj) {\r\n  return obj \u0026\u0026 obj.__esModule ? obj : { default: obj };\r\n}\r\n\r\nvar Person = function Person() {\r\n  (0, _classCallCheck3.default)(this, Person);\r\n};\r\n```\r\n\r\n这里就没有再编译出 helper 函数 classCallCheck 了，而是直接引用了 @babel/runtime 中的 helpers/classCallCheck。\r\n\r\n**安装**\r\n\r\n``` shell\r\nnpm install --save-dev @babel/plugin-transform-runtime @babel/runtime\r\n```\r\n\r\n**使用** 在 .babelrc 文件中\r\n\r\n``` json\r\n{\r\n  \"plugins\": [\r\n    \"@babel/plugin-transform-runtime\"\r\n  ]\r\n}\r\n```\r\n\r\n参考资料：\r\n\r\n- [Babel 7.1介绍 transform-runtime polyfill env](https://www.jianshu.com/p/d078b5f3036a)\r\n- [webpack 懒加载](https://webpack.docschina.org/guides/lazy-loading/)\r\n- [Vue 路由懒加载](https://router.vuejs.org/zh/guide/advanced/lazy-loading.html#%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD)\r\n- [webpack 缓存](https://webpack.docschina.org/guides/caching/)\r\n- [一步一步的了解webpack4的splitChunk插件](https://juejin.cn/post/6844903614759043079)\r\n\r\n### 11. 减少重绘重排\r\n\r\n浏览器渲染过程\r\n\r\n1. 解析HTML生成DOM树。\r\n2. 解析CSS生成CSSOM规则树。\r\n3. 将DOM树与CSSOM规则树合并在一起生成渲染树。\r\n4. 遍历渲染树开始布局，计算每个节点的位置大小信息。\r\n5. 将渲染树每个节点绘制到屏幕。\r\n\r\n![渲染树生成](https://user-images.githubusercontent.com/8088864/125440124-9cc83d52-c342-4959-af1e-dc67cfe7d312.png)\r\n\r\n#### 重排\r\n\r\n当改变 DOM 元素位置或大小时，会导致浏览器重新生成渲染树，这个过程叫重排。\r\n\r\n#### 重绘\r\n\r\n当重新生成渲染树后，就要将渲染树每个节点绘制到屏幕，这个过程叫重绘。不是所有的动作都会导致重排，例如改变字体颜色，只会导致重绘。记住，重排会导致重绘，重绘不会导致重排。\r\n\r\n重排和重绘这两个操作都是非常昂贵的，因为 **JavaScript** 引擎线程与 **GUI** 渲染线程是互斥，它们同时只能一个在工作。\r\n\r\n什么操作会导致重排？\r\n\r\n- 添加或删除可见的 **DOM** 元素\r\n- 元素位置改变\r\n- 元素尺寸改变\r\n- 内容改变\r\n- 浏览器窗口尺寸改变\r\n\r\n如何减少重排重绘？\r\n\r\n- 用 **JavaScript** 修改样式时，最好不要直接写样式，而是替换 **class** 来改变样式。\r\n- 如果要对 **DOM** 元素执行一系列操作，可以将 **DOM** 元素脱离文档流，修改完成后，再将它带回文档。推荐使用隐藏元素（**display:none**）或文档碎片（**DocumentFragment**），都能很好的实现这个方案。\r\n\r\n### 12. 使用事件委托\r\n\r\n事件委托利用了事件冒泡，只指定一个事件处理程序，就可以管理某一类型的所有事件。所有用到按钮的事件（多数鼠标事件和键盘事件）都适合采用事件委托技术， 使用事件委托可以节省内存。\r\n\r\n``` html\r\n\u003cul\u003e\r\n  \u003cli\u003e苹果\u003c/li\u003e\r\n  \u003cli\u003e香蕉\u003c/li\u003e\r\n  \u003cli\u003e凤梨\u003c/li\u003e\r\n\u003c/ul\u003e\r\n```\r\n\r\n``` js\r\n// good\r\ndocument.querySelector('ul').onclick = (event) =\u003e {\r\n  const target = event.target;\r\n  if (target.nodeName === 'LI') {\r\n    console.log(target.innerHTML);\r\n  }\r\n}\r\n\r\n// bad\r\ndocument.querySelectorAll('li').forEach((e) =\u003e {\r\n  e.onclick = function() {\r\n    console.log(this.innerHTML);\r\n  }\r\n})\r\n```\r\n\r\n### 13. 注意程序的局部性\r\n\r\n一个编写良好的计算机程序常常具有良好的局部性，它们倾向于引用最近引用过的数据项附近的数据项，或者最近引用过的数据项本身，这种倾向性，被称为局部性原理。有良好局部性的程序比局部性差的程序运行得更快。\r\n\r\n**局部性通常有两种不同的形式：**\r\n\r\n- 时间局部性: 在一个具有良好时间局部性的程序中，被引用过一次的内存位置很可能在不远的将来被多次引用。\r\n- 空间局部性: 在一个具有良好空间局部性的程序中，如果一个内存位置被引用了一次，那么程序很可能在不远的将来引用附近的一个内存位置。\r\n\r\n时间局部性示例\r\n\r\n``` js\r\nfunction sum(arry) {\r\n  let i, sum = 0;\r\n  let len = arry.length;\r\n\r\n  for (i = 0; i \u003c len; i++) {\r\n    sum += arry[i];\r\n  }\r\n\r\n  return sum;\r\n}\r\n```\r\n\r\n在这个例子中，变量sum在每次循环迭代中被引用一次，因此，对于sum来说，具有良好的时间局部性\r\n\r\n空间局部性示例\r\n\r\n**具有良好空间局部性的程序**\r\n\r\n``` js\r\n// 二维数组\r\nfunction sum1(arry, rows, cols) {\r\n  let i, j, sum = 0;\r\n\r\n  for (i = 0; i \u003c rows; i++) {\r\n    for (j = 0; j \u003c cols; j++) {\r\n      sum += arry[i][j];\r\n    }\r\n  }\r\n\r\n  return sum;\r\n}\r\n```\r\n\r\n**空间局部性差的程序**\r\n\r\n``` js\r\n// 二维数组\r\nfunction sum2(arry, rows, cols) {\r\n  let i, j, sum = 0;\r\n\r\n  for (j = 0; j \u003c cols; j++) {\r\n    for (i = 0; i \u003c rows; i++) {\r\n      sum += arry[i][j];\r\n    }\r\n  }\r\n\r\n  return sum;\r\n}\r\n```\r\n\r\n看一下上面的两个空间局部性示例，像示例中从每行开始按顺序访问数组每个元素的方式，称为具有步长为1的引用模式。 如果在数组中，每隔k个元素进行访问，就称为步长为k的引用模式。 一般而言，随着步长的增加，空间局部性下降。\r\n\r\n这两个例子有什么区别？区别在于第一个示例是按行扫描数组，每扫描完一行再去扫下一行；第二个示例是按列来扫描数组，扫完一行中的一个元素，马上就去扫下一行中的同一列元素。\r\n\r\n数组在内存中是按照行顺序来存放的，结果就是逐行扫描数组的示例得到了步长为 1 引用模式，具有良好的空间局部性；而另一个示例步长为 rows，空间局部性极差。\r\n\r\n**性能测试**\r\n\r\n运行环境：\r\n\r\n- cpu: i7-10510U\r\n- 浏览器: 83.0.4103.61\r\n\r\n对一个长度为9000的二维数组（子数组长度也为9000）进行10次空间局部性测试，时间（毫秒）取平均值，结果如下：\r\n\r\n``` js\r\nfunction sum2(arry, rows, cols) {\r\n  let i, j, sum = 0;\r\n\r\n  for (j = 0; j \u003c cols; j++) {\r\n    for (i = 0; i \u003c rows; i++) {\r\n      sum += arry[i][j];\r\n    }\r\n  }\r\n\r\n  return sum;\r\n}\r\n\r\n// 二维数组\r\nfunction sum1(arry, rows, cols) {\r\n  let i, j, sum = 0;\r\n\r\n  for (i = 0; i \u003c rows; i++) {\r\n    for (j = 0; j \u003c cols; j++) {\r\n      sum += arry[i][j];\r\n    }\r\n  }\r\n\r\n  return sum;\r\n}\r\n\r\nvar arry = new Array(9000).fill(new Array(9000).fill(1));\r\n\r\nlet ts = 0;\r\nfor (let i = 0; i \u003c 10; i++) {\r\n  const startTime = new Date().valueOf();\r\n  sum1(arry, 9000, 9000);\r\n  ts += (new Date().valueOf() - startTime);\r\n}\r\n\r\nconsole.log('sum1: ' + (ts / 10)); // 81.5ms\r\n\r\nlet ts2 = 0;\r\nfor (let i = 0; i \u003c 10; i++) {\r\n  const startTime = new Date().valueOf();\r\n  sum2(arry, 9000, 9000);\r\n  ts2 += (new Date().valueOf() - startTime);\r\n}\r\n\r\nconsole.log('sum2: ' + (ts2 / 10)); // 167.3ms\r\n```\r\n\r\n所用示例为上述两个空间局部性示例\r\n\r\n| 步长为1(sum1) | 步长为9000(sum2) |\r\n| ---- | ---- |\r\n| 81.5ms | 167.3ms |\r\n\r\n从以上测试结果来看，步长为 1 的数组执行时间比步长为 9000 的数组快了一个数量级。\r\n\r\n总结：\r\n\r\n- 重复引用相同变量的程序具有良好的时间局部性\r\n- 对于具有步长为 k 的引用模式的程序，步长越小，空间局部性越好；而在内存中以大步长跳来跳去的程序空间局部性会很差\r\n\r\n参考资料：\r\n\r\n- [深入理解计算机系统](https://book.douban.com/subject/26912767/)\r\n\r\n### 14. if-else 对比 switch\r\n\r\n当判断条件数量越来越多时，越倾向于使用 switch 而不是 if-else。\r\n\r\n``` js\r\nif (color == 'blue') {\r\n\r\n} else if (color == 'yellow') {\r\n\r\n} else if (color == 'white') {\r\n\r\n} else if (color == 'black') {\r\n\r\n} else if (color == 'green') {\r\n\r\n} else if (color == 'orange') {\r\n\r\n} else if (color == 'pink') {\r\n\r\n}\r\n\r\nswitch (color) {\r\n  case 'blue':\r\n\r\n    break;\r\n  case 'yellow':\r\n\r\n    break;\r\n  case 'white':\r\n\r\n    break;\r\n  case 'black':\r\n\r\n    break;\r\n  case 'green':\r\n\r\n    break;\r\n  case 'orange':\r\n\r\n    break;\r\n  case 'pink':\r\n\r\n    break;\r\n}\r\n```\r\n\r\n像以上这种情况，使用 switch 是最好的。假设 color 的值为 pink，则 if-else 语句要进行 7 次判断，switch 只需要进行一次判断。 从可读性来说，switch 语句也更好。\r\n\r\n从使用时机来说，当条件值大于两个的时候，使用 switch 更好。不过 if-else 也有 switch 无法做到的事情，例如有多个判断条件的情况下，无法使用 switch。\r\n\r\n### 15. 查找表\r\n\r\n当条件语句特别多时，使用 switch 和 if-else 不是最佳的选择，这时不妨试一下查找表。查找表可以使用数组和对象来构建。\r\n\r\n``` js\r\nswitch (index) {\r\n  case '0':\r\n    return result0;\r\n  case '1':\r\n    return result1;\r\n  case '2':\r\n    return result2;\r\n  case '3':\r\n    return result3;\r\n  case '4':\r\n    return result4;\r\n  case '5':\r\n    return result5;\r\n  case '6':\r\n    return result6;\r\n  case '7':\r\n    return result7;\r\n  case '8':\r\n    return result8;\r\n  case '9':\r\n    return result9;\r\n  case '10':\r\n    return result10;\r\n  case '11':\r\n    return result11;\r\n}\r\n```\r\n\r\n可以将这个 switch 语句转换为查找表\r\n\r\n``` js\r\nconst results = [result0,result1,result2,result3,result4,result5,result6,result7,result8,result9,result10,result11];\r\n\r\nreturn results[index];\r\n```\r\n\r\n如果条件语句不是数值而是字符串，可以用对象来建立查找表\r\n\r\n``` js\r\nconst map = {\r\n  red: result0,\r\n  green: result1,\r\n};\r\n\r\nreturn map[color];\r\n```\r\n\r\n### 16. 避免页面卡顿\r\n\r\n**60fps 与设备刷新率**\r\n\r\n目前大多数设备的屏幕刷新率为 60 次/秒。因此，如果在页面中有一个动画或渐变效果，或者用户正在滚动页面，那么浏览器渲染动画或页面的每一帧的速率也需要跟设备屏幕的刷新率保持一致。 其中每个帧的预算时间仅比 16 毫秒多一点 (1 秒/ 60 = 16.66 毫秒)。但实际上，浏览器有整理工作要做，因此您的所有工作需要在 10 毫秒内完成。如果无法符合此预算，帧率将下降，并且内容会在屏幕上抖动。 此现象通常称为卡顿，会对用户体验产生负面影响。\r\n\r\n![网页渲染流程](https://user-images.githubusercontent.com/8088864/125445172-29d132ea-e485-49c7-b32d-172956c4349b.jpeg)\r\n\r\n假如你用 JavaScript 修改了 DOM，并触发样式修改，经历重排重绘最后画到屏幕上。如果这其中任意一项的执行时间过长，都会导致渲染这一帧的时间过长，平均帧率就会下降。假设这一帧花了 50 ms，那么此时的帧率为 1s / 50ms = 20fps，页面看起来就像卡顿了一样。\r\n\r\n对于一些长时间运行的 JavaScript，我们可以使用定时器进行切分，延迟执行。\r\n\r\n``` js\r\nfor (let i = 0, len = arry.length; i \u003c len; i++) {\r\n  process(arry[i]);\r\n}\r\n```\r\n\r\n假设上面的循环结构由于 process() 复杂度过高或数组元素太多，甚至两者都有，可以尝试一下切分。\r\n\r\n``` js\r\nconst todo = arry.concat();\r\nsetTimeout(function(){\r\n  process(todo.shift());\r\n  if (todo.length) {\r\n    setTimeout(arguments.callee, 25);\r\n  } else {\r\n    callback(arry);\r\n  }\r\n}, 25);\r\n```\r\n\r\n如果有兴趣了解更多，可以查看一下高性能JavaScript第 6 章和[高效前端：Web高效编程与优化实践](https://book.douban.com/subject/30170670/)第 3 章。\r\n\r\n### 17. 使用 requestAnimationFrame 来实现视觉变化\r\n\r\n从第 16 点我们可以知道，大多数设备屏幕刷新率为 60 次/秒，也就是说每一帧的平均时间为 16.66 毫秒。在使用 JavaScript 实现动画效果的时候，最好的情况就是每次代码都是在帧的开头开始执行。而保证 JavaScript 在帧开始时运行的唯一方式是使用 `requestAnimationFrame`。\r\n\r\n``` js\r\n/**\r\n * If run as a requestAnimationFrame callback, this\r\n * will be run at the start of the frame.\r\n */\r\nfunction updateScreen(time) {\r\n  // Make visual updates here.\r\n}\r\n\r\nrequestAnimationFrame(updateScreen);\r\n```\r\n\r\n如果采取 setTimeout 或 setInterval 来实现动画的话，回调函数将在帧中的某个时点运行，可能刚好在末尾，而这可能经常会使我们丢失帧，导致卡顿。\r\n\r\n![requestAnimationFrame执行点](https://user-images.githubusercontent.com/8088864/125448006-c889aac7-f5d6-4a21-a4fe-b4c6c0cdf197.jpg)\r\n\r\n### 18. 使用 Web Workers\r\n\r\nWeb Worker 使用其他工作线程从而独立于主线程之外，它可以执行任务而不干扰用户界面。一个 worker 可以将消息发送到创建它的 JavaScript 代码, 通过将消息发送到该代码指定的事件处理程序（反之亦然）。\r\n\r\nWeb Worker 适用于那些处理纯数据，或者与浏览器 UI 无关的长时间运行脚本。\r\n\r\n创建一个新的 worker 很简单，指定一个脚本的 URI 来执行 worker 线程（main.js）：\r\n\r\n``` js\r\nvar myWorker = new Worker('worker.js');\r\n// 你可以通过postMessage() 方法和onmessage事件向worker发送消息。\r\nfirst.onchange = function() {\r\n  myWorker.postMessage([first.value,second.value]);\r\n  console.log('Message posted to worker');\r\n}\r\n\r\nsecond.onchange = function() {\r\n  myWorker.postMessage([first.value,second.value]);\r\n  console.log('Message posted to worker');\r\n}\r\n```\r\n\r\n在 worker 中接收到消息后，我们可以写一个事件处理函数代码作为响应（worker.js）：\r\n\r\n``` js\r\nonmessage = function(e) {\r\n  console.log('Message received from main script');\r\n  var workerResult = 'Result: ' + (e.data[0] * e.data[1]);\r\n  console.log('Posting message back to main script');\r\n  postMessage(workerResult);\r\n}\r\n```\r\n\r\nonmessage处理函数在接收到消息后马上执行，代码中消息本身作为事件的data属性进行使用。这里我们简单的对这2个数字作乘法处理并再次使用postMessage()方法，将结果回传给主线程。\r\n\r\n回到主线程，我们再次使用onmessage以响应worker回传的消息：\r\n\r\n``` js\r\nmyWorker.onmessage = function(e) {\r\n  result.textContent = e.data;\r\n  console.log('Message received from worker');\r\n}\r\n```\r\n\r\n在这里我们获取消息事件的data，并且将它设置为result的textContent，所以用户可以直接看到运算的结果。\r\n\r\n不过在worker内，不能直接操作DOM节点，也不能使用window对象的默认方法和属性。然而你可以使用大量window对象之下的东西，包括WebSockets，IndexedDB以及FireFox OS专用的Data Store API等数据存储机制。\r\n\r\n参考资料：\r\n\r\n- [Web Workers](https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers)\r\n\r\n### 19. 使用位操作\r\n\r\nJavaScript 中的数字都使用 IEEE-754 标准以 64 位格式存储。但是在位操作中，数字被转换为有符号的 32 位格式。即使需要转换，位操作也比其他数学运算和布尔操作快得多。\r\n\r\n#### 取模\r\n\r\n由于偶数的最低位为 0，奇数为 1，所以取模运算可以用位操作来代替。\r\n\r\n``` js\r\nif (value % 2) {\r\n    // 奇数\r\n} else {\r\n    // 偶数\r\n}\r\n// 位操作\r\nif (value \u0026 1) {\r\n    // 奇数\r\n} else {\r\n    // 偶数\r\n}\r\n```\r\n\r\n#### 取整\r\n\r\n``` js\r\n~~10.12 // 10\r\n~~10 // 10\r\n~~'1.5' // 1\r\n~~undefined // 0\r\n~~null // 0\r\n```\r\n\r\n#### 位掩码\r\n\r\n``` js\r\nconst a = 1\r\nconst b = 2\r\nconst c = 4\r\nconst options = a | b | c\r\n```\r\n\r\n通过定义这些选项，可以用按位与操作来判断 a/b/c 是否在 options 中。\r\n\r\n``` js\r\n// 选项 b 是否在选项中\r\nif (b \u0026 options) {\r\n  // ...\r\n}\r\n```\r\n\r\n### 20. 不要覆盖原生方法\r\n\r\n无论你的 JavaScript 代码如何优化，都比不上原生方法。因为原生方法是用低级语言写的（C/C++），并且被编译成机器码，成为浏览器的一部分。当原生方法可用时，尽量使用它们，特别是数学运算和 DOM 操作。\r\n\r\n### 21. 降低 CSS 选择器的复杂性\r\n\r\n#### (1). 浏览器读取选择器，遵循的原则是从选择器的右边到左边读取\r\n\r\n看个示例\r\n\r\n``` css\r\n#block .text p {\r\n    color: red;\r\n}\r\n```\r\n\r\n1. 查找所有 P 元素。\r\n2. 查找结果 1 中的元素是否有类名为 text 的父元素\r\n3. 查找结果 2 中的元素是否有 id 为 block 的父元素\r\n\r\n#### (2). CSS 选择器优先级\r\n\r\n```\r\n内联 \u003e ID选择器 \u003e 类选择器 \u003e 标签选择器\r\n```\r\n\r\n根据以上两个信息可以得出结论。\r\n\r\n1. 选择器越短越好。\r\n2. 尽量使用高优先级的选择器，例如 ID 和类选择器。\r\n3. 避免使用通配符 *。\r\n\r\n最后要说一句，据我查找的资料所得，CSS 选择器没有优化的必要，因为最慢和慢快的选择器性能差别非常小。\r\n\r\n### 22. 使用 flexbox 而不是较早的布局模型\r\n\r\n在早期的 CSS 布局方式中我们能对元素实行绝对定位、相对定位或浮动定位。而现在，我们有了新的布局方式 [flexbox](https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Flexible_Box_Layout/Basic_Concepts_of_Flexbox)，它比起早期的布局方式来说有个优势，那就是性能比较好。\r\n\r\n下面的截图显示了在 1300 个框上使用浮动的布局开销：\r\n\r\n![float布局的元素](https://user-images.githubusercontent.com/8088864/125547454-c911b26b-4a1c-44d8-9044-e83a09dc618d.jpg)\r\n\r\n然后我们用 flexbox 来重现这个例子：\r\n\r\n![flexbox布局的元素](https://user-images.githubusercontent.com/8088864/125547509-ecf25fd0-a9ef-438c-827a-987ea0bb9ae5.jpg)\r\n\r\n现在，对于相同数量的元素和相同的视觉外观，布局的时间要少得多（本例中为分别 3.5 毫秒和 14 毫秒）。\r\n\r\n不过 flexbox 兼容性还是有点问题，不是所有浏览器都支持它，所以要谨慎使用。\r\n\r\n各浏览器兼容性：\r\n\r\n- Chrome 29+\r\n- Firefox 28+\r\n- Internet Explorer 11\r\n- Opera 17+\r\n- Safari 6.1+ (prefixed with -webkit-)\r\n- Android 4.4+\r\n- iOS 7.1+ (prefixed with -webkit-)\r\n\r\n但是在可能的情况下，至少应研究布局模型对网站性能的影响，并且采用最大程度减少网页执行开销的模型。\r\n\r\n在任何情况下，不管是否选择 Flexbox，都应当在应用的高压力点期间尝试完全避免触发布局！\r\n\r\n### 23. 使用 transform 和 opacity 属性更改来实现动画\r\n\r\n在 CSS 中，transforms 和 opacity 这两个属性更改不会触发重排与重绘，它们是可以由合成器（composite）单独处理的属性。\r\n\r\n![使用 transform 和 opacity 属性更改来实现动画](https://user-images.githubusercontent.com/8088864/125547800-ab61c27b-23fb-45bd-9d6a-2585df8d804e.jpeg)\r\n\r\n### 24. 合理使用规则，避免过度优化\r\n\r\n性能优化主要分为两类：\r\n\r\n1. 加载时优化\r\n2. 运行时优化\r\n\r\n上述 23 条建议中，属于加载时优化的是前面 10 条建议，属于运行时优化的是后面 13 条建议。通常来说，没有必要 23 条性能优化规则都用上，根据网站用户群体来做针对性的调整是最好的，节省精力，节省时间。\r\n\r\n在解决问题之前，得先找出问题，否则无从下手。所以在做性能优化之前，最好先调查一下网站的加载性能和运行性能。\r\n\r\n#### 检查加载性能\r\n\r\n一个网站加载性能如何主要看白屏时间和首屏时间。\r\n\r\n- 白屏时间：指从输入网址，到页面开始显示内容的时间。\r\n- 首屏时间：指从输入网址，到页面完全渲染的时间。\r\n\r\n将以下脚本放在 \\\u003c/head\u003e 前面就能获取白屏时间。\r\n\r\n``` html\r\n\u003cscript\u003e\r\n  new Date() - performance.timing.navigationStart\r\n\u003c/script\u003e\r\n```\r\n\r\n在 `window.onload` 事件里执行 `new Date() - performance.timing.navigationStart` 即可获取首屏时间。\r\n\r\n#### 检查运行性能\r\n\r\n配合 chrome 的开发者工具，我们可以查看网站在运行时的性能。\r\n\r\n打开网站，按 F12 选择 performance，点击左上角的灰色圆点，变成红色就代表开始记录了。这时可以模仿用户使用网站，在使用完毕后，点击 stop，然后你就能看到网站运行期间的性能报告。如果有红色的块，代表有掉帧的情况；如果是绿色，则代表 FPS 很好。performance 的具体使用方法请用搜索引擎搜索一下，毕竟篇幅有限。\r\n\r\n通过检查加载和运行性能，相信你对网站性能已经有了大概了解。所以这时候要做的事情，就是使用上述 23 条建议尽情地去优化你的网站，加油！\r\n\r\n参考资料：\r\n\r\n- [performance.timing.navigationStart](https://developer.mozilla.org/zh-CN/docs/Web/API/PerformanceTiming/navigationStart)\r\n\r\n其他参考资料\r\n\r\n- 高性能网站建设指南\r\n- Web性能权威指南\r\n- 高性能JavaScript\r\n- [高效前端：Web高效编程与优化实践](https://book.douban.com/subject/30170670/)","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/interview/issues/4/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/interview/issues/4/timeline","performed_via_github_app":null,"state_reason":null},"menus":["### 1. 减少 HTTP 请求","### 2. 使用 HTTP2","#### 解析速度快","#### 多路复用","#### 首部压缩","#### 优先级","#### 流量控制","#### 服务器推送","### 3. 使用服务端渲染","#### 客户端渲染过程","#### 服务端渲染过程","### 4. 静态资源使用 CDN","#### CDN 原理","### 5. 将 CSS 放在文件头部，JavaScript 文件放在底部","### 6. 使用字体图标 iconfont 代替图片图标","#### 压缩字体文件","### 7. 善用缓存，不重复加载相同的资源","### 8. 压缩文件","### 9. 图片优化","#### (1). 图片延迟加载","#### (2). 响应式图片","#### (3). 调整图片大小","#### (4). 降低图片质量","#### (5). 尽可能利用 CSS3 效果代替图片","#### (6). 使用 webp 格式的图片","### 10. 通过 webpack 按需加载代码，提取第三库代码，减少 ES6 转为 ES5 的冗余代码","#### 根据文件内容生成文件名，结合 import 动态引入组件实现按需加载","#### 提取第三方库","#### 减少 ES6 转为 ES5 的冗余代码","### 11. 减少重绘重排","#### 重排","#### 重绘","### 12. 使用事件委托","### 13. 注意程序的局部性","### 14. if-else 对比 switch","### 15. 查找表","### 16. 避免页面卡顿","### 17. 使用 requestAnimationFrame 来实现视觉变化","### 18. 使用 Web Workers","### 19. 使用位操作","#### 取模","#### 取整","#### 位掩码","### 20. 不要覆盖原生方法","### 21. 降低 CSS 选择器的复杂性","#### (1). 浏览器读取选择器，遵循的原则是从选择器的右边到左边读取","#### (2). CSS 选择器优先级","### 22. 使用 flexbox 而不是较早的布局模型","### 23. 使用 transform 和 opacity 属性更改来实现动画","### 24. 合理使用规则，避免过度优化","#### 检查加载性能","#### 检查运行性能"]},"__N_SSG":true},"page":"/questions/[id]","query":{"id":"4"},"buildId":"tROOKkd8JQS2v5FcY7ODr","assetPrefix":"/frontend","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>