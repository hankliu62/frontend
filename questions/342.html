<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>前端小技术集合 - H.L Frontend</title><link rel="icon" href="/frontend/favicon.ico"/><meta name="description" content="H.L Frontend，前端技术和工具网站，提供了一系列实用的前端开发工具和功能，技术网站汇总，旨在帮助开发者更加高效地进行前端开发。"/><meta name="keywords" content="前端工具,前端开发,前端开发工具,前端开发工具集合,toolbox,frontend,卡鲁秋,Hank,HankLiu"/><meta name="author" content="Hank.Liu"/><meta name="copyright" content="卡鲁秋"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="next-head-count" content="9"/><link rel="stylesheet" href="/frontend/styles/animate.css/@4.1.1/animate.css"/><link rel="preload" href="/frontend/_next/static/css/48e12760546808a2.css" as="style"/><link rel="stylesheet" href="/frontend/_next/static/css/48e12760546808a2.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/frontend/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/frontend/_next/static/chunks/webpack-93c0980eb9a5a364.js" defer=""></script><script src="/frontend/_next/static/chunks/framework-0e8d27528ba61906.js" defer=""></script><script src="/frontend/_next/static/chunks/main-d236bc00457e5dc2.js" defer=""></script><script src="/frontend/_next/static/chunks/pages/_app-d90534c1986642b8.js" defer=""></script><script src="/frontend/_next/static/chunks/5367-33ed0c98355cb6dc.js" defer=""></script><script src="/frontend/_next/static/chunks/4853-4e02ebf21637e379.js" defer=""></script><script src="/frontend/_next/static/chunks/3239-4699acf95684b42e.js" defer=""></script><script src="/frontend/_next/static/chunks/1664-e769dc1505626ddd.js" defer=""></script><script src="/frontend/_next/static/chunks/418-4f5393ca512af857.js" defer=""></script><script src="/frontend/_next/static/chunks/7202-08c1445bfc3a1826.js" defer=""></script><script src="/frontend/_next/static/chunks/pages/questions/%5Bid%5D-41ea2e32e7cffd3d.js" defer=""></script><script src="/frontend/_next/static/MQUtFiptr90W41domt60c/_buildManifest.js" defer=""></script><script src="/frontend/_next/static/MQUtFiptr90W41domt60c/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex h-full min-h-[100vh] w-full flex-col" style="flex-direction:column;min-height:100vh"><main class="flex flex-1 grow-[1] flex-col" style="flex:1"><div class="flex h-full flex-1 flex-col" style="position:relative"><div class="flex space-x-6 bg-white p-6"><div class="flex-1"><div class="ant-card ant-card-bordered article-card min-h-full !border-[#d9d9d9] css-1okl62o"><div class="ant-card-body"><article><header><h1 class="mb-5 text-4xl font-bold">Redux应用场景</h1></header><section class="mb-12 flex items-center space-x-8"><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small group cursor-pointer"><div class="ant-space-item"><span role="img" aria-label="branches" class="anticon anticon-branches group-hover:text-[#1171ee]"><svg viewBox="64 64 896 896" focusable="false" data-icon="branches" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"></path></svg></span></div><div class="ant-space-item"><span class="group-hover:text-[#1171ee]">#342</span></div></div><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small group cursor-pointer"><div class="ant-space-item"><span class="group-hover:text-sky-500">hankliu62</span></div></div><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small"><div class="ant-space-item"><span class="text-[#8a919f]">2024-02-12 08:31:52</span></div></div><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small"><div class="ant-space-item"><div class="flex items-center justify-start"><span class="ant-tag ant-tag-has-color css-1okl62o" style="background-color:#0052CC">react</span></div></div></div><div class="ant-space css-1okl62o ant-space-horizontal ant-space-align-center ant-space-gap-row-small ant-space-gap-col-small"><div class="ant-space-item"><ul class="ant-rate css-1okl62o ant-rate-disabled" tabindex="-1" role="radiogroup"><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="1" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="2" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="3" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="4" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li><li class="ant-rate-star ant-rate-star-zero"><div role="radio" aria-checked="false" aria-posinset="5" aria-setsize="5" tabindex="-1"><div class="ant-rate-star-first"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div><div class="ant-rate-star-second"><span role="img" aria-label="star" class="anticon anticon-star"><svg viewBox="64 64 896 896" focusable="false" data-icon="star" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3z"></path></svg></span></div></div></li></ul></div></div></section><section><div><div class="ant-skeleton ant-skeleton-active css-1okl62o"><div class="ant-skeleton-content"><h3 class="ant-skeleton-title" style="width:38%"></h3><ul class="ant-skeleton-paragraph"><li></li><li></li><li style="width:61%"></li></ul></div></div></div></section></article></div></div></div><div class="w-64 bg-white"><div><div class=""><div class="ant-collapse ant-collapse-icon-position-end question-menus-collapse css-1okl62o"><div class="ant-collapse-item ant-collapse-item-active"><div class="ant-collapse-header" aria-expanded="true" aria-disabled="false" role="button" tabindex="0"><div class="ant-collapse-expand-icon"><span role="img" aria-label="right" class="anticon anticon-right ant-collapse-arrow"><svg viewBox="64 64 896 896" focusable="false" style="-ms-transform:rotate(90deg);transform:rotate(90deg)" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></div><span class="ant-collapse-header-text"><span class="text-base">目录</span></span><div class="ant-collapse-extra"><div class="-mr-2">收起</div></div></div><div class="ant-collapse-content ant-collapse-content-active"><div class="ant-collapse-content-box"><ul class="max-h-[620px] list-none space-y-3 overflow-y-auto text-slate-500 dark:text-slate-400"><li id="### 1. Redux应用场景" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base !border-sky-500"><a class="w-full overflow-hidden !text-[#515767] !text-sky-500" href="/frontend/questions/342#1.-redux%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><div class="truncate" style="padding-left:16px">1. Redux应用场景</div></a></li><li id="### 2. Redux设计思想" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#2.-redux%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3"><div class="truncate" style="padding-left:16px">2. Redux设计思想</div></a></li><li id="### 3. Redux应用的三大原则" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#3.-redux%E5%BA%94%E7%94%A8%E7%9A%84%E4%B8%89%E5%A4%A7%E5%8E%9F%E5%88%99"><div class="truncate" style="padding-left:16px">3. Redux应用的三大原则</div></a></li><li id="### 4. 源码实现" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#4.-%E6%BA%90%E7%A0%81%E5%AE%9E%E7%8E%B0"><div class="truncate" style="padding-left:16px">4. 源码实现</div></a></li><li id="#### 4.1 createStore" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#4.1-createstore"><div class="truncate" style="padding-left:32px">4.1 createStore</div></a></li><li id="#### 4.2 bindActionCreators" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#4.2-bindactioncreators"><div class="truncate" style="padding-left:32px">4.2 bindActionCreators</div></a></li><li id="#### 4.3 combineReducer" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#4.3-combinereducer"><div class="truncate" style="padding-left:32px">4.3 combineReducer</div></a></li><li id="### react-redux Provider和connect" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#react-redux-provider%E5%92%8Cconnect"><div class="truncate" style="padding-left:16px">react-redux Provider和connect</div></a></li><li id="#### 4.5 redux 中间件middlewares" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#4.5-redux-%E4%B8%AD%E9%97%B4%E4%BB%B6middlewares"><div class="truncate" style="padding-left:32px">4.5 redux 中间件middlewares</div></a></li><li id="##### 4.5.1 日志中间件" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#4.5.1-%E6%97%A5%E5%BF%97%E4%B8%AD%E9%97%B4%E4%BB%B6"><div class="truncate" style="padding-left:48px">4.5.1 日志中间件</div></a></li><li id="##### 4.5.2 thunk中间件" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#4.5.2-thunk%E4%B8%AD%E9%97%B4%E4%BB%B6"><div class="truncate" style="padding-left:48px">4.5.2 thunk中间件</div></a></li><li id="##### 4.5.3 级联中间件" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/frontend/questions/342#4.5.3-%E7%BA%A7%E8%81%94%E4%B8%AD%E9%97%B4%E4%BB%B6"><div class="truncate" style="padding-left:48px">4.5.3 级联中间件</div></a></li></ul></div></div></div></div></div></div></div></div></div><div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"url":"https://api.github.com/repos/hankliu62/interview/issues/342","repository_url":"https://api.github.com/repos/hankliu62/interview","labels_url":"https://api.github.com/repos/hankliu62/interview/issues/342/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/interview/issues/342/comments","events_url":"https://api.github.com/repos/hankliu62/interview/issues/342/events","html_url":"https://github.com/hankliu62/interview/issues/342","id":2129637526,"node_id":"I_kwDOLNphd85-77CW","number":342,"title":"Redux应用场景","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":6547468371,"node_id":"LA_kwDOLNphd88AAAABhkJwUw","url":"https://api.github.com/repos/hankliu62/interview/labels/react","name":"react","color":"0052CC","default":false,"description":"React相关"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-02-12T08:31:52Z","updated_at":"2024-02-12T08:31:53Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"### 1. Redux应用场景\r\n\r\n在react中，数据在组件中单向流动的，数据只能从父组件向子组件流通（通过props），而两个非父子关系的组件之间通信就比较麻烦，redux的出现就是为了解决这个问题，它将组件之间需要共享的数据存储在一个store里面，其他需要这些数据的组件通过订阅的方式来刷新自己的视图。\r\n\r\n### 2. Redux设计思想\r\n它将整个应用状态存储到store里面，组件可以派发（dispatch）修改数据（state）的行为（action）给store，store内部修改之后，其他组件可以通过订阅（subscribe）中的状态state来刷新（render）自己的视图。\r\n\r\n\r\n### 3. Redux应用的三大原则\r\n\r\n- 单一数据源\r\n我们可以把Redux的状态管理理解成一个全局对象，那么这个全局对象是唯一的，所有的状态都在全局对象store下进行统一”配置”，这样做也是为了做统一管理，便于调试与维护。\r\n\r\n- State是只读的\r\n与React的setState相似，直接改变组件的state是不会触发render进行渲染组件的。同样，在Redux中唯一改变state的方法就是触发action，action是一个用于描述发生了什么的“关键词”，而具体使action在state上更新生效的是reducer，用来描述事件发生的详细过程，reducer充当了发起一个action连接到state的桥梁。这样做的好处是当开发者试图去修改状态时，Redux会记录这个动作是什么类型的、具体完成了什么功能等（更新、传播过程），在调试阶段可以为开发者提供完整的数据流路径。\r\n\r\n- Reducer必须是一个纯函数\r\nReducer用来描述action如何改变state，接收旧的state和action，返回新的state。Reducer内部的执行操作必须是无副作用的，不能对state进行直接修改，当状态发生变化时，需要返回一个全新的对象代表新的state。这样做的好处是，状态的更新是可预测的，另外，这与Redux的比较分发机制相关，阅读Redux判断状态更新的源码部分(combineReducers)，发现Redux是对新旧state直接用==来进行比较，也就是浅比较，如果我们直接在state对象上进行修改，那么state所分配的内存地址其实是没有变化的，“==”是比较对象间的内存地址，因此Redux将不会响应我们的更新。之所以这样处理是避免对象深层次比较所带来的性能损耗（需要递归遍历比较）。\r\n\r\n### 4. 源码实现\r\n\r\n#### 4.1 createStore\r\n\r\n``` js\r\nexport default function createStore(reducer, initialState) {\r\n    let state = initialState //状态\r\n    let listeners = []\r\n    //获取当前状态\r\n    function getState() {\r\n      return state\r\n    }\r\n    //派发修改指令给reducer\r\n    function dispatch(action) {\r\n      //reducer修改之后返回新的state\r\n      state = reducer(state,action)\r\n      //执行所有的监听函数\r\n      listeners.forEach(listener =\u003e listener())\r\n    }\r\n\r\n    //订阅 状态state变化之后需要执行的监听函数\r\n    function subscribe(listener) {\r\n      listeners.push(listener) //监听事件\r\n      return function () {\r\n        let index = listeners.indexOf(listener)\r\n        listeners.splice(index,1)\r\n      }\r\n    }\r\n    //在仓库创建完成之后会先派发一次动作，目的是给初始化状态赋值\r\n    dispatch({type:'@@REDUX_INIT'})\r\n    return {\r\n      getState,\r\n      dispatch,\r\n      subscribe\r\n    }\r\n  }\r\n```\r\n\r\naction_type.js\r\n\r\n``` js\r\nexport const ADD = 'ADD'\r\nexport const MINUS = 'MINUS'\r\n```\r\n\r\nreducer.js\r\n\r\n``` js\r\nimport * as TYPES from './actions_type'\r\nlet initialState = {number: 0}\r\nexport default function reducer (state = initialState, action) {\r\n    switch (action.type) {\r\n        case TYPES.ADD:\r\n            return {number: state.number + 1}\r\n         case TYPES.MINUS:\r\n            return {number: state.number - 1}\r\n         default:\r\n             return state\r\n    }\r\n}\r\n```\r\n\r\nstore.js\r\n\r\n``` js\r\nimport {createStore} from 'redux'\r\nimport reducer from './reducer'\r\nconst store = createStore(reducer)\r\nexport default store\r\n```\r\n\r\n组件Counter.js\r\n\r\n``` jsx\r\nimport React, {useState,useEffect} from 'react'\r\nimport store from '../store'\r\nimport * as TYPES from '../store/actions_type'\r\n//类组件写法：\r\nexport default class Counter extends React.Component {\r\n    state = {number: store.getState().number}\r\n    componentDidMount() {\r\n        //当状态发生变化后会让订阅函数执行，会更新当前组件状态，状态更新之后就会刷新组件\r\n        this.unSubscribe = store.subscribe( () =\u003e {\r\n            this.setState({number: store.getState().number})\r\n        })\r\n    }\r\n    //组件销毁的时候取消监听函数\r\n    componentWillUnmount() {\r\n        this.unSubscribe()\r\n    }\r\n    render() {\r\n        return (\r\n            \u003cdiv\u003e\r\n                \u003cp\u003e{this.state.number}\u003c/p\u003e\r\n                \u003cbutton onClick={()=\u003e store.dispatch({type:TYPES.ADD})}\u003e+\u003c/button\u003e\r\n                \u003cbutton onClick={()=\u003e store.dispatch({type:TYPES.MINUS})}\u003e-\u003c/button\u003e\r\n            \u003c/div\u003e\r\n        )\r\n    }\r\n}\r\n//函数组件写法：\r\nexport default function Counter (props) {\r\n    let [number,setNumber] = useState(store.getState().number)\r\n    //订阅\r\n    useEffect(() =\u003e {\r\n        return store.subscribe(() =\u003e { //这个函数会返回一个销毁函数，此销毁函数会自动在组件销毁的时候调用\r\n            setNumber(store.getState().number)\r\n        })\r\n    },[]) // useEffect的第二个参数是依赖变量的数组，当这个依赖数组发生变化的时候才会执行函数\r\n    // 传入空数组，只会执行一遍\r\n    return (\r\n        \u003cdiv\u003e\r\n            \u003cp\u003e{store.getState().number}\u003c/p\u003e\r\n            \u003cbutton onClick={()=\u003e store.dispatch({type:TYPES.ADD})}\u003e+\u003c/button\u003e\r\n            \u003cbutton onClick={()=\u003e store.dispatch({type:TYPES.MINUS})}\u003e-\u003c/button\u003e\r\n        \u003c/div\u003e\r\n    )\r\n }\r\n /**\r\n  * 对于组件来说仓库有两个作用\r\n  * 1.输出：把仓库中的状态在组件中显示\r\n  * 2.输入：在组件里可以派发动作给仓库，从而修改仓库中的状态\r\n  * 3.组件需要订阅状态变化事件，当仓库中的状态发生改变之后需要刷新组件\r\n  */\r\n```\r\n\r\n#### 4.2 bindActionCreators\r\n\r\n简易版\r\n\r\n``` js\r\nexport default function (actionCreators, dispatch) {\r\n    let boundActionsCreators = {}\r\n    //循环遍历重写action\r\n    for(let key in actionCreators) {\r\n        boundActionsCreators[key] = function(...args) {\r\n            //其实dispatch方法会返回派发的action\r\n            return dispatch(actionCreators[key](...args))\r\n        }\r\n    }\r\n    return boundActionsCreators\r\n}\r\n```\r\n\r\n源码版\r\n``` js\r\nfunction bindActionCreator(actionCreator, dispatch) {\r\n  return function () {\r\n    return dispatch(actionCreator.apply(this, arguments))\r\n  }\r\n}\r\n\r\n/**\r\n    参数说明：\r\n        actionCreators: action create函数，可以是一个单函数，也可以是一个对象，这个对象的所有元素都是action create函数\r\n        dispatch: store.dispatch方法\r\n*/\r\nexport default function bindActionCreators(actionCreators, dispatch) {\r\n  // 如果actionCreators是一个函数的话，就调用bindActionCreator方法对action create函数和dispatch进行绑定\r\n  if (typeof actionCreators === 'function') {\r\n    return bindActionCreator(actionCreators, dispatch)\r\n  }\r\n  // actionCreators必须是函数或者对象中的一种，且不能是null\r\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\r\n    throw new Error(\r\n      `bindActionCreators expected an object or a function, instead received ${actionCreators === null ? 'null' : typeof actionCreators}. ` +\r\n      `Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?`\r\n    )\r\n  }\r\n\r\n  // 获取所有action create函数的名字\r\n  const keys = Object.keys(actionCreators)\r\n  // 保存dispatch和action create函数进行绑定之后的集合\r\n  const boundActionCreators = {}\r\n  for (let i = 0; i \u003c keys.length; i++) {\r\n    const key = keys[i]\r\n    const actionCreator = actionCreators[key]\r\n    // 排除值不是函数的action create\r\n    if (typeof actionCreator === 'function') {\r\n      // 进行绑定\r\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)\r\n    }\r\n  }\r\n  // 返回绑定之后的对象\r\n  /**\r\n      boundActionCreators的基本形式就是\r\n      {\r\n      actionCreator: function() {dispatch(actionCreator.apply(this, arguments))}\r\n      }\r\n  */\r\n  return boundActionCreators\r\n}\r\n```\r\n\r\nCounter.js\r\n``` js\r\nimport React, {useState,useEffect} from 'react'\r\nimport store from '../store'\r\nimport actions from '../store/actions_type'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nlet boundActions = bindActionCreators(actions, store.dispatch)\r\n//类组件\r\nexport default class Counter extends React.Component {\r\n    state = {number: store.getState().number}\r\n    componentDidMount() {\r\n        //当状态发生变化后会让订阅函数执行，会更新当前组件状态，状态更新之后就会刷新组件\r\n        this.unSubscribe = store.subscribe( () =\u003e {\r\n            this.setState({number: store.getState().number})\r\n        })\r\n    }\r\n    //组件销毁的时候取消监听函数\r\n    componentWillUnmount() {\r\n        this.unSubscribe()\r\n    }\r\n    render() {\r\n        return (\r\n            \u003cdiv\u003e\r\n                \u003cp\u003e{this.state.number}\u003c/p\u003e\r\n                \u003cbutton onClick={boundActions.add}\u003e+\u003c/button\u003e\r\n                \u003cbutton onClick={boundActions.minus}\u003e-\u003c/button\u003e\r\n            \u003c/div\u003e\r\n        )\r\n    }\r\n}\r\n\r\n```\r\n\r\n#### 4.3 combineReducer\r\n\r\n``` js\r\n/**\r\n * 合并reducer\r\n * 1.拿到子reducer，然后合并成一个reducer\r\n * @param {*} state\r\n * @param {*} action\r\n */\r\nexport default  function combineReducers(reducers) {\r\n    //state是合并后得state = {counter1:{number:0},counter2:{number:0}}\r\n    return function (state={}, action) {\r\n        let nextState = {}\r\n        // debugger\r\n        for(let key in reducers) {\r\n            let reducerForKey = reducers[key] //key = counter1,\r\n            //老状态\r\n            let previousStateForKey = state[key] //{number:0}\r\n            let nextStateForKey = reducerForKey(previousStateForKey,action) //执行reducer，返回新得状态\r\n            nextState[key] = nextStateForKey //{number: 1}\r\n        }\r\n        return nextState\r\n    }\r\n}\r\n```\r\n\r\n### react-redux Provider和connect\r\n\r\nProvider.js\r\n\r\n``` js\r\nimport React from 'react'\r\nimport ReactReduxContext from './context'\r\n/**\r\n * Provider 有个store属性，需要向下传递这个属性\r\n * @param {*} props\r\n */\r\nexport default function (props) {\r\n    return (\r\n        \u003cReactReduxContext.Provider value={{store:props.store}}\u003e\r\n            {props.children}\r\n        \u003c/ReactReduxContext.Provider\u003e\r\n    )\r\n}\r\n```\r\n\r\nconnect.js\r\n\r\n``` js\r\nimport React, {useContext, useState, useEffect} from 'react'\r\nimport ReactReduxContext from './context'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nexport default function (mapStateToProps,mapDispatchToProps) {\r\n    return function(OldComponent){\r\n        //返回一个组件\r\n        return function(props) {\r\n            //获取state\r\n            let context = useContext(ReactReduxContext) //context.store\r\n            let [state,setState] = useState(mapStateToProps(context.store.getState()))\r\n            //利用useState只会在初始化的时候绑定一次\r\n            let [boundActions] = useState(() =\u003e bindActionCreators(mapDispatchToProps,context.store.dispatch))\r\n            //订阅事件\r\n            useEffect(() =\u003e {\r\n                return context.store.subscribe(() =\u003e {\r\n                    setState(mapStateToProps(context.store.getState()))\r\n                })\r\n            },[])\r\n            //派发事件 这种方式派发事件的时候每次render都会进行一次事件的绑定，耗费性能\r\n            // let boundActions = bindActionCreators(mapDispatchToProps,context.store.dispatch)\r\n            //返回组件\r\n            return \u003cOldComponent {...props} {...state} {...boundActions} /\u003e\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n#### 4.5 redux 中间件middlewares\r\n\r\n正常我们的redux是这样的工作流程，action -\u003e reducer ，这相当于是同步操作，由dispatch触发action之后直接去reducer执行相应的操作。但有时候我们会实现一些异步任务，像点击按钮 -\u003e 获取服务器数据 -\u003e渲染视图，这个时候就需要引入中间件改变redux同步执行流程，形成异步流程来实现我们的任务。有了中间件redux的工作流程就是action -\u003e 中间件 -\u003e reducer ，点击按钮就相当于dispatch 触发action，接着就是服务器获取数据middlewares执行，成功获取数据后触发reducer对应的操作，更新需要渲染的视图数据。\r\n\r\n中间件的机制就是改变数据流，实现异步action，日志输出，异常报告等功能。\r\n\r\n##### 4.5.1 日志中间件\r\n\r\n``` js\r\nimport {createStore} from 'redux'\r\nimport reducer from './reducers/Counter'\r\nconst store = createStore(reducer)\r\n//1.备份原生的dispatch方法\r\n// let dispatch = store.dispatch\r\n// //2.重写dispatch方法 做一些额外操作\r\n// store.dispatch = function (action) {\r\n//     console.log('老状态',store.getState())\r\n//     //触发原生dispatch方法\r\n//     dispatch(action)\r\n//     console.log('新状态', store.getState())\r\n// }\r\n\r\nfunction logger ({dispatch, getState}) { //dispatch是重写后的dispatch\r\n    return function (next) { //next代表原生的dispatch方法，调用下一个中间件或者store.dispatch 级联\r\n        //改写后的dispatch方法\r\n        return function (action) {\r\n            console.log('老状态', getState())\r\n            next(action) //store.dispatch(action)\r\n            console.log('新状态', getState())\r\n            // dispatch(action) //此时的dispatch是重写后的dispatch方法，这样会造成死循环\r\n        }\r\n    }\r\n}\r\n\r\nfunction applyMiddleware(middleware) { //middleware = logger\r\n    return function(createStore) {\r\n        return function (reducer) {\r\n            let store = createStore(reducer) // 返回的是原始的未修改后的store\r\n            let dispatch\r\n            middleware = middleware({ //logger执行 需要传参getState 和 dispatch 此时的 middleware = function(next)\r\n                getState: store.getState,\r\n                dispatch: action =\u003e dispatch(action) //指向改写后的新的dispatch 不能是store.dispatch\r\n            })\r\n            dispatch = middleware(store.dispatch) //执行上面返回的middleware ，store.dispatch 代表next\r\n            return {\r\n                ...store,\r\n                dispatch\r\n            }\r\n        }\r\n    }\r\n}\r\nlet store = applyMiddleware(logger)(createStore)(reducer)\r\nexport default store\r\n```\r\n\r\n##### 4.5.2 thunk中间件\r\n\r\n``` js\r\nfunction thunk ({dispatch, getState}) {\r\n    return function (next) {\r\n        return function (action) {\r\n            if(typeof action === 'function') {\r\n                action(dispatch, getState)\r\n            }else {\r\n                next(action)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction applyMiddleware(middleware) { //middleware = logger\r\n    return function(createStore) {\r\n        return function (reducer) {\r\n            let store = createStore(reducer) // 返回的是原始的未修改锅的store\r\n            let dispatch\r\n            middleware = middleware({ //logger执行 需要传参getState 和 dispatch 此时的 middleware = function(next)\r\n                getState: store.getState,\r\n                dispatch: action =\u003e dispatch(action) //指向改写后的新的dispatch 不能是store.dispatch\r\n            })\r\n            dispatch = middleware(store.dispatch) //执行上面返回的middleware ，store.dispatch 代表next\r\n            return {\r\n                ...store,\r\n                dispatch\r\n            }\r\n        }\r\n    }\r\n}\r\nlet store = applyMiddleware(thunk)(createStore)(reducer)\r\nexport default store\r\n```\r\n\r\n##### 4.5.3 级联中间件\r\n\r\n上面我们调用的中间件都是单个调用，传进applyMiddleware的参数也是单个的，但是我们要想一次调用多个中间件，那么传到applyMiddleware的参数就是个数组，这个时候就需要级联处理，让他们一次执行。\r\n\r\n``` js\r\nfunction compose(...funcs) {\r\n  if (funcs.length === 0) {\r\n    return (arg) =\u003e arg\r\n  }\r\n\r\n  if (funcs.length === 1) {\r\n    return funcs[0]\r\n  }\r\n\r\n  return funcs.reduce((a, b) =\u003e (...args) =\u003e a(b(...args)))\r\n}\r\n\r\n\r\nfunction applyMiddleware(...middlewares) { //middleware = logger\r\n    return function(createStore) {\r\n        return function (reducer) {\r\n            let store = createStore(reducer) // 返回的是原始的未修改锅的store\r\n            let dispatch = () =\u003e {\r\n              throw new Error(\r\n                'Dispatching while constructing your middleware is not allowed. ' +\r\n                  'Other middleware would not be applied to this dispatch.'\r\n              )\r\n            }\r\n            let middlewareAPI = {\r\n                getState: store.getState,\r\n                dispatch: action =\u003e dispatch(action) //指向改写后的新的dispatch 不能是store.dispatch\r\n            }\r\n            chain= middlewares.map(middleware =\u003e middleware(middlewareAPI))\r\n            dispatch = compose(...chain)(store.dispatch)\r\n            // dispatch = middleware(store.dispatch) //执行上面返回的middleware ，store.dispatch 代表next\r\n            return {\r\n                ...store,\r\n                dispatch\r\n            }\r\n        }\r\n    }\r\n}\r\nlet store = applyMiddleware(promise,thunk, logger)(createStore)(reducer)\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/interview/issues/342/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/interview/issues/342/timeline","performed_via_github_app":null,"state_reason":null},"menus":["### 1. Redux应用场景","### 2. Redux设计思想","### 3. Redux应用的三大原则","### 4. 源码实现","#### 4.1 createStore","#### 4.2 bindActionCreators","#### 4.3 combineReducer","### react-redux Provider和connect","#### 4.5 redux 中间件middlewares","##### 4.5.1 日志中间件","##### 4.5.2 thunk中间件","##### 4.5.3 级联中间件"]},"__N_SSG":true},"page":"/questions/[id]","query":{"id":"342"},"buildId":"MQUtFiptr90W41domt60c","assetPrefix":"/frontend","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>