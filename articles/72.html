<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>卡鲁秋 - 前端小工具集合</title><link rel="icon" href="/toolbox-frontend/favicon.ico"/><meta name="description" content="卡鲁秋的前端工具网站，提供了一系列实用的前端开发工具和功能，技术网站汇总，旨在帮助开发者更加高效地进行前端开发。"/><meta name="keywords" content="前端工具,前端开发,前端开发工具,前端开发工具集合,toolbox,frontend,卡鲁秋"/><meta name="author" content="Hank.Liu"/><meta name="next-head-count" content="7"/><link rel="stylesheet" href="/toolbox-frontend/styles/animate.css/@4.1.1/animate.css"/><link rel="preload" href="/toolbox-frontend/_next/static/css/9666f2751d5f4cfa.css" as="style"/><link rel="stylesheet" href="/toolbox-frontend/_next/static/css/9666f2751d5f4cfa.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/toolbox-frontend/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/toolbox-frontend/_next/static/chunks/webpack-b2686fccc3362873.js" defer=""></script><script src="/toolbox-frontend/_next/static/chunks/framework-aec4381329cec0e4.js" defer=""></script><script src="/toolbox-frontend/_next/static/chunks/main-82d23b26b43cd32b.js" defer=""></script><script src="/toolbox-frontend/_next/static/chunks/pages/_app-baf3db6f3e140b26.js" defer=""></script><script src="/toolbox-frontend/_next/static/chunks/6396-e9161609a76be07a.js" defer=""></script><script src="/toolbox-frontend/_next/static/chunks/8490-2f2be535c5ee8413.js" defer=""></script><script src="/toolbox-frontend/_next/static/chunks/1664-f865873e77459860.js" defer=""></script><script src="/toolbox-frontend/_next/static/chunks/pages/articles/%5Bid%5D-f54ba9d880ba11c9.js" defer=""></script><script src="/toolbox-frontend/_next/static/rQDidgBY5jj2zjb_Ap18Y/_buildManifest.js" defer=""></script><script src="/toolbox-frontend/_next/static/rQDidgBY5jj2zjb_Ap18Y/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="flex h-full min-h-[100vh] w-full flex-col" style="flex-direction:column;min-height:100vh"><main class="flex flex-1 grow-[1] flex-col" style="flex:1"><div class="flex h-full flex-1 flex-col" style="position:relative"><div class="flex space-x-6 bg-white p-6"><div class="flex-1 overflow-x-hidden"><div class="ant-card ant-card-bordered article-card min-h-full !border-[#d9d9d9] css-12jzuas"><div class="ant-card-body"><article><div class="mx-auto mb-[36px] max-w-[1045px] px-[30px] lg:mb-[52px] lg:flex lg:px-0"><div id="banner" class="media-wrapper image-media-wrapper w-full rounded-[8px] border-[1px] border-solid border-[#1D2129] lg:ml-0 lg:h-[320px] lg:w-[500px]"><div class="hidden before"></div><div class="hidden after"></div><div class="scale-103 h-full w-full border-[8px] border-solid border-white lg:scale-100 cover-wrapper"><img class="h-full w-full rounded-md object-cover cover" src="/toolbox-frontend/dashboard/images/banner.png" alt=""/></div></div><div class="mt-[60px] overflow-hidden lg:ml-[32px] lg:mt-0 lg:flex-1"><h1 class="leading-130 montserrat-bold mb-[9px] text-[36px] font-medium text-[#1D2129] lg:mb-[8px]">Taro 开发问题记录</h1><div class="mb-[9px] flex whitespace-nowrap lg:mb-[10px]"><div class="leading-120 cursor-pointer truncate text-[24px] font-normal text-[#1D2129] underline-offset-2 hover:underline lg:text-[20px]" aria-hidden="true"># VOL.<!-- -->72</div><div class="leading-120 ml-[48px] text-[24px] font-normal text-[#1D2129] lg:ml-[32px] lg:text-[20px]">2023/07/04</div></div><div class="mb-[12px] flex flex-wrap lg:mb-0"><div class="leading-150 mb-[12px] mr-[18px] rounded-[30px] border border-solid border-[#1D2129] px-[24px] py-[6px] text-[20px] font-normal text-[#1D2129] lg:mb-[12px] lg:mr-[10px] lg:rounded-[20px] lg:px-[16px] lg:py-[4px] lg:text-[14px]">blog</div></div><div class="my-[30px] hidden w-[213px] border border-[#1D2129] lg:mb-[20px] lg:mt-[8px] lg:block"></div><div class="lg:rounded-0 rounded-[12px] bg-white/30 p-[36px] lg:flex lg:bg-transparent lg:p-0"><div class="float-left h-[118px] w-[118px] lg:float-none lg:h-[112px] lg:w-[112px]"><img src="https://avatars.githubusercontent.com/u/8088864?v=4" class="h-full w-full rounded-[8px] object-cover lg:rounded-[12px]" alt=""/></div><div class="lg:ml-[32px] lg:flex-1 lg:overflow-hidden"><div class="mb-[10px] flex h-[118px] flex-col justify-center pl-[36px] lg:h-auto lg:flex-row lg:items-center lg:justify-between lg:pl-0"><div class="leading-130 montserrat-bold mb-[12px] w-full truncate text-[30px] font-medium text-[#1D2129] lg:mb-0 lg:flex-1 lg:text-[24px]">hankliu62</div><a class="leading-170 ml-0 whitespace-pre-wrap text-[20px] font-normal !text-[#1D2129] !underline hover:!text-[#1D2129] hover:!underline focus:!text-[#1D2129] lg:ml-[5px] lg:text-[14px]" href="https://github.com/hankliu62" target="_blank" rel="noreferrer">TA的个人名片</a></div><div class="leading-170 text-[20px] font-normal text-[#4E5969] lg:text-[14px]">HankLiu前端开发工程师，精通前端，涉猎后端，对前端有着浓厚的兴趣，希望能够在前端这条路上一直走下去。努力去听风的声音，不必在意风的方向。</div></div></div></div></div><div class="ant-divider css-12jzuas ant-divider-horizontal !mt-0 !border-[#bfc3c7]" role="separator"></div><section><div><div class="ant-skeleton ant-skeleton-active css-12jzuas"><div class="ant-skeleton-content"><h3 class="ant-skeleton-title" style="width:38%"></h3><ul class="ant-skeleton-paragraph"><li></li><li></li><li style="width:61%"></li></ul></div></div></div></section></article></div></div></div><div class="w-64 bg-white"><div><div class=""><div class="ant-collapse ant-collapse-icon-position-end question-menus-collapse css-12jzuas"><div class="ant-collapse-item ant-collapse-item-active"><div class="ant-collapse-header" aria-expanded="true" aria-disabled="false" role="button" tabindex="0"><div class="ant-collapse-expand-icon"><span role="img" aria-label="right" class="anticon anticon-right ant-collapse-arrow"><svg viewBox="64 64 896 896" focusable="false" style="-ms-transform:rotate(90deg);transform:rotate(90deg)" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></div><span class="ant-collapse-header-text"><span class="text-base">目录</span></span><div class="ant-collapse-extra"><div class="-mr-2">收起</div></div></div><div class="ant-collapse-content ant-collapse-content-active"><div class="ant-collapse-content-box"><ul class="max-h-[620px] list-none space-y-3 overflow-y-auto text-slate-500 dark:text-slate-400"><li id="### 1.编译较慢5s左右" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base !border-sky-500"><a class="w-full overflow-hidden !text-[#515767] !text-sky-500" href="/toolbox-frontend/articles/72#1.%E7%BC%96%E8%AF%91%E8%BE%83%E6%85%A25s%E5%B7%A6%E5%8F%B3"><div class="truncate" style="padding-left:16px">1.编译较慢5s左右</div></a></li><li id="### 2.用vscode实时预览小程序模拟器，暂时没有解决方案【TODO】" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#2.%E7%94%A8vscode%E5%AE%9E%E6%97%B6%E9%A2%84%E8%A7%88%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A8%A1%E6%8B%9F%E5%99%A8%E6%9A%82%E6%97%B6%E6%B2%A1%E6%9C%89%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%90todo%E3%80%91"><div class="truncate" style="padding-left:16px">2.用vscode实时预览小程序模拟器，暂时没有解决方案【TODO】</div></a></li><li id="### 3.路由直接在app.config.ts中配置，使用" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#3.%E8%B7%AF%E7%94%B1%E7%9B%B4%E6%8E%A5%E5%9C%A8app.config.ts%E4%B8%AD%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8"><div class="truncate" style="padding-left:16px">3.路由直接在app.config.ts中配置，使用</div></a></li><li id="### 4.安装组件库taro-ui" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#4.%E5%AE%89%E8%A3%85%E7%BB%84%E4%BB%B6%E5%BA%93taro-ui"><div class="truncate" style="padding-left:16px">4.安装组件库taro-ui</div></a></li><li id="### 5.使用react hook" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#5.%E4%BD%BF%E7%94%A8react-hook"><div class="truncate" style="padding-left:16px">5.使用react hook</div></a></li><li id="### 6.设置别名alias，无需eject出config/webpack.config.js" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#6.%E8%AE%BE%E7%BD%AE%E5%88%AB%E5%90%8Dalias%E6%97%A0%E9%9C%80eject%E5%87%BAconfig/webpack.config.js"><div class="truncate" style="padding-left:16px">6.设置别名alias，无需eject出config/webpack.config.js</div></a></li><li id="### 7.taro无法使用相对路径引用本地图片资源" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#7.taro%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E5%BC%95%E7%94%A8%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90"><div class="truncate" style="padding-left:16px">7.taro无法使用相对路径引用本地图片资源</div></a></li><li id="###  8.引用taro-ui组件报错 “xxxx”不能用作 JSX 组件" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#-8.%E5%BC%95%E7%94%A8taro-ui%E7%BB%84%E4%BB%B6%E6%8A%A5%E9%94%99-xxxx%E4%B8%8D%E8%83%BD%E7%94%A8%E4%BD%9C-jsx-%E7%BB%84%E4%BB%B6"><div class="truncate" style="padding-left:16px"> 8.引用taro-ui组件报错 “xxxx”不能用作 JSX 组件</div></a></li><li id="### 9.报错 解决升级taro-ui" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#9.%E6%8A%A5%E9%94%99-%E8%A7%A3%E5%86%B3%E5%8D%87%E7%BA%A7taro-ui"><div class="truncate" style="padding-left:16px">9.报错 解决升级taro-ui</div></a></li><li id="### 10.jsx runtime" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#10.jsx-runtime"><div class="truncate" style="padding-left:16px">10.jsx runtime</div></a></li><li id="### 11.ts报错 " class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#11.ts%E6%8A%A5%E9%94%99-"><div class="truncate" style="padding-left:16px">11.ts报错 </div></a></li><li id="### 12.微信小程序页面，底部横向滚动条，去除方法【todo】" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#12.%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E5%BA%95%E9%83%A8%E6%A8%AA%E5%90%91%E6%BB%9A%E5%8A%A8%E6%9D%A1%E5%8E%BB%E9%99%A4%E6%96%B9%E6%B3%95%E3%80%90todo%E3%80%91"><div class="truncate" style="padding-left:16px">12.微信小程序页面，底部横向滚动条，去除方法【todo】</div></a></li><li id="### 13.tsconfig.ts文件编译属性 " class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#13.tsconfig.ts%E6%96%87%E4%BB%B6%E7%BC%96%E8%AF%91%E5%B1%9E%E6%80%A7-"><div class="truncate" style="padding-left:16px">13.tsconfig.ts文件编译属性 </div></a></li><li id="### 14.底部固定标签栏使用reducer" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#14.%E5%BA%95%E9%83%A8%E5%9B%BA%E5%AE%9A%E6%A0%87%E7%AD%BE%E6%A0%8F%E4%BD%BF%E7%94%A8reducer"><div class="truncate" style="padding-left:16px">14.底部固定标签栏使用reducer</div></a></li><li id="### 15.引入iconfont图标，不得不说taro-ui的图标真的太少了xd" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#15.%E5%BC%95%E5%85%A5iconfont%E5%9B%BE%E6%A0%87%E4%B8%8D%E5%BE%97%E4%B8%8D%E8%AF%B4taro-ui%E7%9A%84%E5%9B%BE%E6%A0%87%E7%9C%9F%E7%9A%84%E5%A4%AA%E5%B0%91%E4%BA%86xd"><div class="truncate" style="padding-left:16px">15.引入iconfont图标，不得不说taro-ui的图标真的太少了xd</div></a></li><li id="### 16. icon调节亮度，可以起到加深颜色的效果" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#16.-icon%E8%B0%83%E8%8A%82%E4%BA%AE%E5%BA%A6%E5%8F%AF%E4%BB%A5%E8%B5%B7%E5%88%B0%E5%8A%A0%E6%B7%B1%E9%A2%9C%E8%89%B2%E7%9A%84%E6%95%88%E6%9E%9C"><div class="truncate" style="padding-left:16px">16. icon调节亮度，可以起到加深颜色的效果</div></a></li><li id="### 17. 引入taro-ui报错" class="border-0 !border-l-2 border-solid border-transparent pr-[16px] text-base"><a class="w-full overflow-hidden !text-[#515767] !hover:text-slate-600 !dark:hover:text-slate-300" href="/toolbox-frontend/articles/72#17.-%E5%BC%95%E5%85%A5taro-ui%E6%8A%A5%E9%94%99"><div class="truncate" style="padding-left:16px">17. 引入taro-ui报错</div></a></li></ul></div></div></div></div></div></div></div></div></div><div style="position:fixed;z-index:9999;top:16px;left:16px;right:16px;bottom:16px;pointer-events:none"></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/72","repository_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com","labels_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/72/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/72/comments","events_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/72/events","html_url":"https://github.com/hankliu62/hankliu62.github.com/issues/72","id":1787404541,"node_id":"I_kwDOBiJZIc5qiaD9","number":72,"title":"Taro 开发问题记录","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":688950687,"node_id":"MDU6TGFiZWw2ODg5NTA2ODc=","url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/labels/blog","name":"blog","color":"1677ff","default":false,"description":"博客文章"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2023-07-04T08:12:32Z","updated_at":"2023-07-05T03:24:26Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"### 1.编译较慢5s左右\r\n\r\n```\r\nyarn dev:weapp\r\n\r\nwarnning:\r\n1. 预览模式生成的文件较大，设置 NODE_ENV 为 production 可以开启压缩。\r\nExample:\r\n$ NODE_ENV=production taro build --type weapp --watch\r\n2. 建议开启持久化缓存功能，能有效提升二次编译速度，详情请参考: https://docs.taro.zone/docs/config-detail#cache。\r\n\r\nsolve:\r\n1.修改package.json内容：\r\n\"scripts\": {\r\n   \"dev:weapp\": \"taro build --type weapp --watch --env production\"\r\n}\r\n\r\n2.webpack5持久化https://juejin.cn/post/7055109923746611208\r\n```\r\n\r\n### 2.用vscode实时预览小程序模拟器，暂时没有解决方案【TODO】\r\n\r\n### 3.路由直接在app.config.ts中配置，使用\r\n``` tsx\r\nimport Taro from '@tarojs/taro'\r\nTaro.redirectTo({\r\n    url: '/pages/cartPage/index',\r\n  })\r\n```\r\n\r\n### 4.安装组件库taro-ui\r\n``` bash\r\nyarn global add @tarojs/cli\r\n\r\nimport 'taro-ui/dist/style/index.scss' // 样式全局引入一次即可\r\n```\r\n\r\n### 5.使用react hook\r\n\r\n原因：[https://zhuanlan.zhihu.com/p/137183261](https://links.jianshu.com/go?to=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F137183261)\r\n\r\n- Component非UI逻辑复用困难。\r\n- 组件的生命周期函数不适合side effect逻辑的管理。\r\n- 不友好的Class Component\r\n\r\n### 6.设置别名alias，无需eject出config/webpack.config.js\r\n\r\n[https://juejin.cn/post/6892636779850137608](https://links.jianshu.com/go?to=https%3A%2F%2Fjuejin.cn%2Fpost%2F6892636779850137608)\r\n\r\n### 7.taro无法使用相对路径引用本地图片资源\r\n[https://blog.csdn.net/qzw752890913/article/details/111395962](https://links.jianshu.com/go?to=https%3A%2F%2Fblog.csdn.net%2Fqzw752890913%2Farticle%2Fdetails%2F111395962)\r\n\r\n###  8.引用taro-ui组件报错 “xxxx”不能用作 JSX 组件\r\n\r\n解决React中遇到的 “xxxx”不能用作 JSX 组件 问题 \r\n\r\n![4b2b951d5af24defb06f2254205bc085~tplv-k3u1fbpfcp-zoom-crop-mark_1304_1304_1304_734](https://github.com/hankliu62/hankliu62.github.com/assets/8088864/874ac1fe-d92c-48ab-a33c-678f236fdbfb)\r\n\r\n2022 年 3 月 29 日，React 18 正式版发布，带来很多新的能力，React 终于不再支持 IE（前端界的努力，让 IE 去死）。新的版本发布，React 的整体生态圈也会同步更新支持，也就导致 npm 包的依赖不可避免的产生一些混乱。记录下今天小伙伴抛出来的问题。\r\n\r\n问题背景\r\n最近公司新立了一些新项目，我就用项目中公共的脚手架模版进行了复制，但是我对其中很多包也同步做了升级，并将yarn.lock文件做了删除，重新更新了依赖（本来打算将react也升级到18，但是发现 craco 并没有明确支持 React 18， antd也还在对React 18做适配支持，所以也就停留在了 17）。\r\n\r\n然后问题就来了： \r\n\r\n\r\n```\r\n“SplitPane”不能用作 JSX 组件。\r\n  其实例类型 \"SplitPane\" 不是有效的 JSX 元素。\r\n    在这些类型中，\"render()\" 返回的类型不兼容。\r\n      不能将类型“React.ReactNode”分配给类型“import(\"/Users/tulies/data/test/my-app/node_modules/@testing-library/react/node_modules/@types/react/index\").ReactNode”。\r\n        不能将类型“{}”分配给类型“ReactNode”。ts(2786)\r\n```\r\n\r\n```\r\n'SplitPane' cannot be used as a JSX component.\r\n  Its instance type 'SplitPane' is not a valid JSX element.\r\n    The types returned by 'render()' are incompatible between these types.\r\n      Type 'React.ReactNode' is not assignable to type 'import(\"/Users/tulies/data/test/my-app/node_modules/@testing-library/react/node_modules/@types/react/index\").ReactNode'.\r\n        Type '{}' is not assignable to type 'ReactNode'.ts(2786)\r\nreact-split-pane 和 antd 的一些组件都报 “xxxxx”不能用作 JSX 组件。\r\n```\r\n\r\n分析原因\r\n先看下出问题之前的 package.json 的 dependencies 和 devDependencies 配置：\r\n``` json\r\n\"dependencies\": {\r\n    \"antd\": \"^4.19.5\",\r\n    \"react\": \"^17.0.2\",\r\n    \"react-dom\": \"^17.0.2\",\r\n    \"react-split-pane\": \"^0.1.92\",\r\n    \"typescript\": \"4.1.2\",\r\n    \"web-vitals\": \"^2.1.4\"\r\n  },\r\n  \"devDependencies\": {\r\n    \"@testing-library/jest-dom\": \"^5.16.4\",\r\n    \"@testing-library/react\": \"^13.1.1\",\r\n    \"@testing-library/user-event\": \"^13.5.0\",\r\n    \"@types/jest\": \"^27.4.1\",\r\n    \"@types/node\": \"^16.11.27\",\r\n    \"@types/react\": \"^17.0.44\",\r\n    \"@types/react-dom\": \"^17.0.15\"\r\n  }\r\n```\r\n因为是删除了 yarn.lock 文件之后发生的问题，所以肯定是npm包的依赖出现了问题。脚手架中的几个核心包我都是一直同步最新的包更新，所以应该不是这些包的问题，所以想到会不会是 React 18 的问题。 虽然想到了这点了，但是起初也没到想到会是 @types/react-dom 的问题，经过很笨的的排除法终于找到这点。\r\n\r\n@types/react-dom 的 package.json 中，dependencies 设置了@types/react 版本为 '*'，但是现在最新版本已经是 18. 虽然在 package.json 中指定了 ^17.0.44，但是 @types/react-dom 还是会安装自己的依赖包。 \r\n\r\n![2105ae7676924db29efd58147323c952~tplv-k3u1fbpfcp-zoom-in-crop-mark_1304_0_0_0](https://github.com/hankliu62/hankliu62.github.com/assets/8088864/2a3e8537-164b-4d03-8abb-6a7a5d0afd9d)\r\n\r\n解决办法\r\n通过 resolutions 指定版本\r\n\r\n``` json\r\n\"resolutions\": {\r\n  \"@types/react\": \"17.0.44\"\r\n},\r\n```\r\ntips: 我用的是 yarn ，如果您使用的是npm 的话，您还需要在 package.json 的 script 中添加如下 preinstall，通过使用[npm-force-resolutions](https://link.juejin.cn/?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fnpm-force-resolutions)包来根据 resolutions 进行版本限定。\r\n``` sh\r\n\"preinstall\": \"npm install --package-lock-only --ignore-scripts \u0026\u0026 npx npm-force-resolutions\"\r\n```\r\n[http://www.whaleal.com/thread?topicId=102](https://links.jianshu.com/go?to=http%3A%2F%2Fwww.whaleal.com%2Fthread%3FtopicId%3D102)\r\n\r\n### 9.报错 解决升级taro-ui\r\n[https://blog.csdn.net/qq_28827635/article/details/122725509](https://links.jianshu.com/go?to=https%3A%2F%2Fblog.csdn.net%2Fqq_28827635%2Farticle%2Fdetails%2F122725509)\r\n\r\n### 10.jsx runtime\r\n\r\n[https://developer.aliyun.com/article/1130017](https://links.jianshu.com/go?to=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F1130017)\r\n\r\n[https://blog.csdn.net/qq_42592823/article/details/125498832](https://links.jianshu.com/go?to=https%3A%2F%2Fblog.csdn.net%2Fqq_42592823%2Farticle%2Fdetails%2F125498832)\r\n\r\n### 11.ts报错 \r\n\r\n[类型“Readonly＜{}＞”上不存在属性_范天缘的博客-CSDN博客](https://links.jianshu.com/go?to=https%3A%2F%2Fblog.csdn.net%2Fweixin_42821697%2Farticle%2Fdetails%2F117716428)\r\n\r\n### 12.微信小程序页面，底部横向滚动条，去除方法【todo】\r\n\r\n### 13.tsconfig.ts文件编译属性 \r\n\r\n[TSConfig 之 include、exclude 和 files 选项 - 掘金 (juejin.cn)](https://links.jianshu.com/go?to=https%3A%2F%2Fjuejin.cn%2Fpost%2F6924264635218542605)\r\n\r\n### 14.底部固定标签栏使用reducer\r\n\r\n[https://juejin.cn/post/6844904168382005256#heading-7](https://links.jianshu.com/go?to=https%3A%2F%2Fjuejin.cn%2Fpost%2F6844904168382005256%23heading-7)\r\n\r\n### 15.引入iconfont图标，不得不说taro-ui的图标真的太少了xd\r\n``` tsx\r\n    \u003cAtIcon prefixClass='icon' value='daifukuan' size='30' color='#F00'\u003e\u003c/AtIcon\u003e\r\n    \u003cView className='icon'\u003e\u0026#xe600;\u003c/View\u003e\r\n    \u003cAtTabBar\r\n     tabList={[\r\n        { title: '待付款', iconPrefixClass:'icon', iconType: 'daifukuan'}\r\n      ]}\r\n   /\u003e\r\n```\r\n更新图库：\r\n下载iconfont替换如下文件即可\r\n\r\n![18100762-b12f1c0b69d411ad](https://github.com/hankliu62/hankliu62.github.com/assets/8088864/bf593d75-bdb4-4528-9484-8f89855b6062)\r\n\r\n### 16. icon调节亮度，可以起到加深颜色的效果\r\n参考：[https://www.codenong.com/1625681/](https://links.jianshu.com/go?to=https%3A%2F%2Fwww.codenong.com%2F1625681%2F)\r\n\r\nfilter: brightness(85%);\r\n\r\n### 17. 引入taro-ui报错\r\n```\r\n✘ [ERROR] [plugin entry] Can't resolve './style/index.scss' in '/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+taro-ui@2.3.4/node_modules/taro-ui/dist/weapp'\r\n\r\n    node_modules/.pnpm/registry.npmmirror.com+enhanced-resolve@5.15.0/node_modules/enhanced-resolve/lib/Resolver.js:369:17:\r\n      369 │       const error = new Error(\"Can't \" + message);\r\n          ╵                     ^\r\n\r\n    at finishWithoutResolve (/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+enhanced-resolve@5.15.0/node_modules/enhanced-resolve/lib/Resolver.js:369:18)\r\n    at /Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+enhanced-resolve@5.15.0/node_modules/enhanced-resolve/lib/Resolver.js:461:15\r\n    at /Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+enhanced-resolve@5.15.0/node_modules/enhanced-resolve/lib/Resolver.js:519:5\r\n    at eval (eval at create (/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+tapable@2.2.1/node_modules/tapable/lib/HookCodeFactory.js:33:10), \u003canonymous\u003e:15:1)\r\n    at /Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+enhanced-resolve@5.15.0/node_modules/enhanced-resolve/lib/Resolver.js:519:5\r\n    at eval (eval at create (/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+tapable@2.2.1/node_modules/tapable/lib/HookCodeFactory.js:33:10), \u003canonymous\u003e:27:1)\r\n    at /Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+enhanced-resolve@5.15.0/node_modules/enhanced-resolve/lib/DescriptionFilePlugin.js:89:43\r\n    at /Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+enhanced-resolve@5.15.0/node_modules/enhanced-resolve/lib/Resolver.js:519:5\r\n    at eval (eval at create (/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+tapable@2.2.1/node_modules/tapable/lib/HookCodeFactory.js:33:10), \u003canonymous\u003e:16:1)\r\n    at /Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+enhanced-resolve@5.15.0/node_modules/enhanced-resolve/lib/forEachBail.js:39:13\r\n\r\n  This error came from the \"onResolve\" callback registered here:\r\n\r\n    node_modules/.pnpm/registry.npmmirror.com+esbuild@0.14.54/node_modules/esbuild/lib/main.js:855:22:\r\n      855 │         let promise = setup({\r\n          ╵                       ^\r\n\r\n    at setup (/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+@tarojs+webpack5-prebundle@3.6.8_@types+react@17.0.44_webpack@5.78.0/node_modules/@tarojs/webpack5-prebundle/src/prebundle/bundle.ts:114:13)\r\n    at handlePlugins (/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+esbuild@0.14.54/node_modules/esbuild/lib/main.js:855:23)\r\n    at Object.buildOrServe (/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+esbuild@0.14.54/node_modules/esbuild/lib/main.js:1149:7)\r\n    at /Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+esbuild@0.14.54/node_modules/esbuild/lib/main.js:2110:17\r\n    at new Promise (\u003canonymous\u003e)\r\n    at Object.build (/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+esbuild@0.14.54/node_modules/esbuild/lib/main.js:2109:14)\r\n    at Object.build (/Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+esbuild@0.14.54/node_modules/esbuild/lib/main.js:1956:51)\r\n    at /Users/xxxxxx/Workspace/xxxxxx/hackathon_2022/lazy/lazy-miniprogram/node_modules/.pnpm/registry.npmmirror.com+@tarojs+webpack5-prebundle@3.6.8_@types+react@17.0.44_webpack@5.78.0/node_modules/@tarojs/webpack5-prebundle/src/prebundle/bundle.ts:68:18\r\n    at Generator.next (\u003canonymous\u003e)\r\n\r\n  The plugin \"entry\" was triggered by this import\r\n\r\n    node_modules/.pnpm/registry.npmmirror.com+taro-ui@2.3.4/node_modules/taro-ui/dist/weapp/index.ts:2:7:\r\n      2 │ import './style/index.scss'\r\n```\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/72/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/72/timeline","performed_via_github_app":null,"state_reason":null},"menus":["### 1.编译较慢5s左右","### 2.用vscode实时预览小程序模拟器，暂时没有解决方案【TODO】","### 3.路由直接在app.config.ts中配置，使用","### 4.安装组件库taro-ui","### 5.使用react hook","### 6.设置别名alias，无需eject出config/webpack.config.js","### 7.taro无法使用相对路径引用本地图片资源","###  8.引用taro-ui组件报错 “xxxx”不能用作 JSX 组件","### 9.报错 解决升级taro-ui","### 10.jsx runtime","### 11.ts报错 ","### 12.微信小程序页面，底部横向滚动条，去除方法【todo】","### 13.tsconfig.ts文件编译属性 ","### 14.底部固定标签栏使用reducer","### 15.引入iconfont图标，不得不说taro-ui的图标真的太少了xd","### 16. icon调节亮度，可以起到加深颜色的效果","### 17. 引入taro-ui报错"]},"__N_SSG":true},"page":"/articles/[id]","query":{"id":"72"},"buildId":"rQDidgBY5jj2zjb_Ap18Y","assetPrefix":"/toolbox-frontend","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>