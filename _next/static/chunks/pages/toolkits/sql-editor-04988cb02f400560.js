(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3171],{20640:function(t,e,n){"use strict";var r=n(11742),i={"text/plain":"Text","text/html":"Url",default:"Text"};t.exports=function(t,e){var n,o,s,a,l,c,u,f,h=!1;e||(e={}),s=e.debug||!1;try{if(l=r(),c=document.createRange(),u=document.getSelection(),(f=document.createElement("span")).textContent=t,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(n){if(n.stopPropagation(),e.format){if(n.preventDefault(),void 0===n.clipboardData){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=i[e.format]||i.default;window.clipboardData.setData(r,t)}else n.clipboardData.clearData(),n.clipboardData.setData(e.format,t)}e.onCopy&&(n.preventDefault(),e.onCopy(n.clipboardData))}),document.body.appendChild(f),c.selectNodeContents(f),u.addRange(c),!document.execCommand("copy"))throw Error("copy command was unsuccessful");h=!0}catch(r){s&&console.error("unable to copy using execCommand: ",r),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),h=!0}catch(r){s&&console.error("unable to copy using clipboardData: ",r),s&&console.error("falling back to prompt"),n="message"in e?e.message:"Copy to clipboard: #{key}, Enter",o=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",a=n.replace(/#{\s*key\s*}/g,o),window.prompt(a,t)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),f&&document.body.removeChild(f),l()}return h}},69654:function(t){var e;e=function(){function t(e,n,r){return this.id=++t.highestId,this.name=e,this.symbols=n,this.postprocess=r,this}function e(t,e,n,r){this.rule=t,this.dot=e,this.reference=n,this.data=[],this.wantedBy=r,this.isComplete=this.dot===t.symbols.length}function n(t,e){this.grammar=t,this.index=e,this.states=[],this.wants={},this.scannable=[],this.completed={}}function r(t,e){this.rules=t,this.start=e||this.rules[0].name;var n=this.byName={};this.rules.forEach(function(t){n.hasOwnProperty(t.name)||(n[t.name]=[]),n[t.name].push(t)})}function i(){this.reset("")}function o(t,e,o){if(t instanceof r)var s=t,o=e;else var s=r.fromCompiled(t,e);for(var a in this.grammar=s,this.options={keepHistory:!1,lexer:s.lexer||new i},o||{})this.options[a]=o[a];this.lexer=this.options.lexer,this.lexerState=void 0;var l=new n(s,0);this.table=[l],l.wants[s.start]=[],l.predict(s.start),l.process(),this.current=0}function s(t){var e=typeof t;if("string"===e)return t;if("object"===e){if(t.literal)return JSON.stringify(t.literal);if(t instanceof RegExp)return t.toString();if(t.type)return"%"+t.type;if(t.test)return"<"+String(t.test)+">";else throw Error("Unknown symbol type: "+t)}}return t.highestId=0,t.prototype.toString=function(t){var e=void 0===t?this.symbols.map(s).join(" "):this.symbols.slice(0,t).map(s).join(" ")+" ● "+this.symbols.slice(t).map(s).join(" ");return this.name+" → "+e},e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(t){var n=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return n.left=this,n.right=t,n.isComplete&&(n.data=n.build(),n.right=void 0),n},e.prototype.build=function(){var t=[],e=this;do t.push(e.right.data),e=e.left;while(e.left);return t.reverse(),t},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))},n.prototype.process=function(t){for(var e=this.states,n=this.wants,r=this.completed,i=0;i<e.length;i++){var s=e[i];if(s.isComplete){if(s.finish(),s.data!==o.fail){for(var a=s.wantedBy,l=a.length;l--;){var c=a[l];this.complete(c,s)}if(s.reference===this.index){var u=s.rule.name;(this.completed[u]=this.completed[u]||[]).push(s)}}}else{var u=s.rule.symbols[s.dot];if("string"!=typeof u){this.scannable.push(s);continue}if(n[u]){if(n[u].push(s),r.hasOwnProperty(u))for(var f=r[u],l=0;l<f.length;l++){var h=f[l];this.complete(s,h)}}else n[u]=[s],this.predict(u)}}},n.prototype.predict=function(t){for(var n=this.grammar.byName[t]||[],r=0;r<n.length;r++){var i=n[r],o=this.wants[t],s=new e(i,0,this.index,o);this.states.push(s)}},n.prototype.complete=function(t,e){var n=t.nextState(e);this.states.push(n)},r.fromCompiled=function(e,n){var i=e.Lexer;e.ParserStart&&(n=e.ParserStart,e=e.ParserRules);var e=e.map(function(e){return new t(e.name,e.symbols,e.postprocess)}),o=new r(e,n);return o.lexer=i,o},i.prototype.reset=function(t,e){this.buffer=t,this.index=0,this.line=e?e.line:1,this.lastLineBreak=e?-e.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var t=this.buffer[this.index++];return"\n"===t&&(this.line+=1,this.lastLineBreak=this.index),{value:t}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(t,e){var n=this.buffer;if("string"!=typeof n)return e+" at index "+(this.index-1);var r=n.split("\n").slice(Math.max(0,this.line-5),this.line),i=n.indexOf("\n",this.index);-1===i&&(i=n.length);var o=this.index-this.lastLineBreak,s=String(this.line).length;return e+(" at line "+this.line+" col "+o+":\n\n"+r.map(function(t,e){return a(this.line-r.length+e+1,s)+" "+t},this).join("\n")+"\n"+a("",s+o))+"^\n";function a(t,e){var n=String(t);return Array(e-n.length+1).join(" ")+n}},o.fail={},o.prototype.feed=function(t){var e,r=this.lexer;for(r.reset(t,this.lexerState);;){try{if(!(e=r.next()))break}catch(t){var o=new n(this.grammar,this.current+1);this.table.push(o);var s=Error(this.reportLexerError(t));throw s.offset=this.current,s.token=t.token,s}var a=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var l=this.current+1,o=new n(this.grammar,l);this.table.push(o);for(var c=void 0!==e.text?e.text:e.value,u=r.constructor===i?e.value:e,f=a.scannable,h=f.length;h--;){var d=f[h],p=d.rule.symbols[d.dot];if(p.test?p.test(u):p.type?p.type===e.type:p.literal===c){var y=d.nextState({data:u,token:e,isToken:!0,reference:l-1});o.states.push(y)}}if(o.process(),0===o.states.length){var s=Error(this.reportError(e));throw s.offset=this.current,s.token=e,s}this.options.keepHistory&&(a.lexerState=r.save()),this.current++}return a&&(this.lexerState=r.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(t){var e,n,r=t.token;return r?(e="input "+JSON.stringify(r.text[0])+" (lexer error)",n=this.lexer.formatError(r,"Syntax error")):(e="input (lexer error)",n=t.message),this.reportErrorCommon(n,e)},o.prototype.reportError=function(t){var e=(t.type?t.type+" token: ":"")+JSON.stringify(void 0!==t.value?t.value:t),n=this.lexer.formatError(t,"Syntax error");return this.reportErrorCommon(n,e)},o.prototype.reportErrorCommon=function(t,e){var n=[];n.push(t);var r=this.table.length-2,i=this.table[r],o=i.states.filter(function(t){var e=t.rule.symbols[t.dot];return e&&"string"!=typeof e});return 0===o.length?(n.push("Unexpected "+e+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(i.states,n)):(n.push("Unexpected "+e+". Instead, I was expecting to see one of the following:\n"),o.map(function(t){return this.buildFirstStateStack(t,[])||[t]},this).forEach(function(t){var e=t[0],r=e.rule.symbols[e.dot],i=this.getSymbolDisplay(r);n.push("A "+i+" based on:"),this.displayStateStack(t,n)},this)),n.push(""),n.join("\n")},o.prototype.displayStateStack=function(t,e){for(var n,r=0,i=0;i<t.length;i++){var o=t[i],s=o.rule.toString(o.dot);s===n?r++:(r>0&&e.push("    ^ "+r+" more lines identical to this"),r=0,e.push("    "+s)),n=s}},o.prototype.getSymbolDisplay=function(t){return function(t){var e=typeof t;if("string"===e)return t;if("object"===e){if(t.literal)return JSON.stringify(t.literal);if(t instanceof RegExp)return"character matching "+t;if(t.type)return t.type+" token";if(t.test)return"token matching "+String(t.test);else throw Error("Unknown symbol type: "+t)}}(t)},o.prototype.buildFirstStateStack=function(t,e){if(-1!==e.indexOf(t))return null;if(0===t.wantedBy.length)return[t];var n=t.wantedBy[0],r=[t].concat(e),i=this.buildFirstStateStack(n,r);return null===i?null:[t].concat(i)},o.prototype.save=function(){var t=this.table[this.current];return t.lexerState=this.lexerState,t},o.prototype.restore=function(t){var e=t.index;this.current=e,this.table[e]=t,this.table.splice(e+1),this.lexerState=t.lexerState,this.results=this.finish()},o.prototype.rewind=function(t){if(!this.options.keepHistory)throw Error("set option `keepHistory` to enable rewinding");this.restore(this.table[t])},o.prototype.finish=function(){var t=[],e=this.grammar.start;return this.table[this.table.length-1].states.forEach(function(n){n.rule.name===e&&n.dot===n.rule.symbols.length&&0===n.reference&&n.data!==o.fail&&t.push(n)}),t.map(function(t){return t.data})},{Parser:o,Grammar:r,Rule:t}},t.exports?t.exports=e():this.nearley=e()},17624:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/toolkits/sql-editor",function(){return n(40697)}])},64484:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(87462),i=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},s=n(36936),a=i.forwardRef(function(t,e){return i.createElement(s.Z,(0,r.Z)({},t,{ref:e,icon:o}))})},3677:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(87462),i=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"},s=n(36936),a=i.forwardRef(function(t,e){return i.createElement(s.Z,(0,r.Z)({},t,{ref:e,icon:o}))})},7892:function(t,e,n){"use strict";var r=n(4486),i=n(20640),o=n.n(i),s=n(67294);class a extends s.Component{render(){let{children:t,tag:e}=this.props;return s.createElement(e,{onClick:this.onClick},t)}constructor(...t){super(...t),this.onClick=t=>{let{children:e,text:n,onSuccess:r,options:i}=this.props,a=s.Children.only(e),l="function"==typeof n?n():n,c=o()(l,i);r&&r(l,c),(null==a?void 0:a.props)&&"function"==typeof a.props.onClick&&a.props.onClick(t)}}}a.defaultProps={tag:"span",text:"",onSuccess(){r.ZP.success("已将内容复制到剪贴板")},options:{}},e.Z=Object.assign(a,{copy:o()})},40697:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return N}});var r=n(85893),i=n(3677),o=n(64484),s=n(48951),a=n(4486),l=n(67294);function c(){return(c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var u=["shift","alt","meta","mod","ctrl"],f={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function h(t){return(f[t]||t).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function d(t,e){return void 0===e&&(e=","),t.split(e)}function p(t,e,n){void 0===e&&(e="+");var r=t.toLocaleLowerCase().split(e).map(function(t){return h(t)}),i={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},o=r.filter(function(t){return!u.includes(t)});return c({},i,{keys:o,description:n})}"undefined"!=typeof document&&(document.addEventListener("keydown",function(t){void 0!==t.key&&v([h(t.key),h(t.code)])}),document.addEventListener("keyup",function(t){void 0!==t.key&&g([h(t.key),h(t.code)])})),"undefined"!=typeof window&&window.addEventListener("blur",function(){y.clear()});var y=new Set;function m(t){return Array.isArray(t)}function v(t){var e=Array.isArray(t)?t:[t];y.has("meta")&&y.forEach(function(t){return!u.includes(t)&&y.delete(t.toLowerCase())}),e.forEach(function(t){return y.add(t.toLowerCase())})}function g(t){var e=Array.isArray(t)?t:[t];"meta"===t?y.clear():e.forEach(function(t){return y.delete(t.toLowerCase())})}function b(t,e){var n=t.target;void 0===e&&(e=!1);var r=n&&n.tagName;return m(e)?!!(r&&e&&e.some(function(t){return t.toLowerCase()===r.toLowerCase()})):!!(r&&e&&!0===e)}var x=function(t,e,n){void 0===n&&(n=!1);var r,i=e.alt,o=e.meta,s=e.mod,a=e.shift,l=e.ctrl,c=e.keys,u=t.key,f=t.code,d=t.ctrlKey,p=t.metaKey,v=t.shiftKey,g=t.altKey,b=h(f),x=u.toLowerCase();if(!(null!=c&&c.includes(b))&&!(null!=c&&c.includes(x))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(b))return!1;if(!n){if(!g===i&&"alt"!==x||!v===a&&"shift"!==x)return!1;if(s){if(!p&&!d)return!1}else if(!p===o&&"meta"!==x&&"os"!==x||!d===l&&"ctrl"!==x&&"control"!==x)return!1}return!!(c&&1===c.length&&(c.includes(x)||c.includes(b)))||(c?(void 0===r&&(r=","),(m(c)?c:c.split(r)).every(function(t){return y.has(t.trim().toLowerCase())})):!c)},w=(0,l.createContext)(void 0),k=(0,l.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),S=function(t){t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},C="undefined"!=typeof window?l.useLayoutEffect:l.useEffect,E=n(69983),L=n(7892),j=n(5152);let R=n.n(j)()(()=>Promise.all([n.e(9282),n.e(2793),n.e(1599),n.e(8764),n.e(8657),n.e(9878),n.e(8570),n.e(5674)]).then(n.bind(n,15674)),{loadableGenerated:{webpack:()=>[15674]},ssr:!1});function N(){var t,e,n,c,u,f,y,j,N,D,O,A,P,H,K;let[M,Z]=(0,l.useState)(),U=(0,l.useRef)(),_=(0,l.useCallback)(t=>{t?Z((0,E.WU)(t)):M&&Z((0,E.WU)(M))},[M]);return t="cmd+shift+o",e=()=>{_()},n=[_],u=(0,l.useRef)(null),f=(0,l.useRef)(!1),y=n instanceof Array?c:n,j=m(t)?t.join(null==y?void 0:y.splitKey):t,N=n instanceof Array?n:c instanceof Array?c:void 0,D=(0,l.useCallback)(e,null!=N?N:[]),O=(0,l.useRef)(D),N?O.current=D:O.current=e,!function t(e,n){return e&&n&&"object"==typeof e&&"object"==typeof n?Object.keys(e).length===Object.keys(n).length&&Object.keys(e).reduce(function(r,i){return r&&t(e[i],n[i])},!0):e===n}((A=(0,l.useRef)(void 0)).current,y)&&(A.current=y),P=A.current,H=(0,l.useContext)(k).enabledScopes,K=(0,l.useContext)(w),C(function(){if((null==P?void 0:P.enabled)!==!1&&(t=null==P?void 0:P.scopes,0===H.length&&t?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!!(!t||H.some(function(e){return t.includes(e)})||H.includes("*")))){var t,e=function(t,e){var n;if(void 0===e&&(e=!1),!b(t,["input","textarea","select"])||b(t,null==P?void 0:P.enableOnFormTags)){if(null!==u.current){var r=u.current.getRootNode();if((r instanceof Document||r instanceof ShadowRoot)&&r.activeElement!==u.current&&!u.current.contains(r.activeElement)){S(t);return}}(null==(n=t.target)||!n.isContentEditable||null!=P&&P.enableOnContentEditable)&&d(j,null==P?void 0:P.splitKey).forEach(function(n){var r,i,o,s=p(n,null==P?void 0:P.combinationKey);if(x(t,s,null==P?void 0:P.ignoreModifiers)||null!=(o=s.keys)&&o.includes("*")){if(null!=P&&null!=P.ignoreEventWhen&&P.ignoreEventWhen(t)||e&&f.current)return;if(("function"==typeof(r=null==P?void 0:P.preventDefault)&&r(t,s)||!0===r)&&t.preventDefault(),"function"==typeof(i=null==P?void 0:P.enabled)?!i(t,s):!0!==i&&void 0!==i){S(t);return}O.current(t,s),e||(f.current=!0)}})}},n=function(t){void 0!==t.key&&(v(h(t.code)),((null==P?void 0:P.keydown)===void 0&&(null==P?void 0:P.keyup)!==!0||null!=P&&P.keydown)&&e(t))},r=function(t){void 0!==t.key&&(g(h(t.code)),f.current=!1,null!=P&&P.keyup&&e(t,!0))},i=u.current||(null==y?void 0:y.document)||document;return i.addEventListener("keyup",r),i.addEventListener("keydown",n),K&&d(j,null==P?void 0:P.splitKey).forEach(function(t){return K.addHotkey(p(t,null==P?void 0:P.combinationKey,null==P?void 0:P.description))}),function(){i.removeEventListener("keyup",r),i.removeEventListener("keydown",n),K&&d(j,null==P?void 0:P.splitKey).forEach(function(t){return K.removeHotkey(p(t,null==P?void 0:P.combinationKey,null==P?void 0:P.description))})}}},[j,P,H]),(0,r.jsx)("div",{className:"bg-white p-6",children:(0,r.jsx)("div",{className:"flex flex-col space-y-6",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between pb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-medium leading-[32px]",children:"SQL"}),(0,r.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,r.jsx)(s.ZP,{className:"!inline-flex items-center",icon:(0,r.jsx)(i.Z,{}),onClick:()=>{_()},children:"格式化"}),(0,r.jsx)(L.Z,{text:M,onSuccess:()=>{a.ZP.success("复制成功")},children:(0,r.jsx)(s.ZP,{className:"!inline-flex items-center",icon:(0,r.jsx)(o.Z,{}),children:"拷贝"})})]})]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(R,{value:M,onChange:t=>{Z(t)},onMount:(t,e)=>{U.current=t,U.current.addCommand(e.KeyMod.CtrlCmd|e.KeyMod.Shift|e.KeyCode.KeyF,function(){console.log("cmd+shift+F",t.getValue()),_(t.getValue())})}})})]})})})}},11742:function(t){t.exports=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,n=[],r=0;r<t.rangeCount;r++)n.push(t.getRangeAt(r));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||n.forEach(function(e){t.addRange(e)}),e&&e.focus()}}}},function(t){t.O(0,[1403,8991,8951,4486,2888,9774,179],function(){return t(t.s=17624)}),_N_E=t.O()}]);