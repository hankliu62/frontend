{"pageProps":{"issue":{"url":"https://api.github.com/repos/hankliu62/interview/issues/415","repository_url":"https://api.github.com/repos/hankliu62/interview","labels_url":"https://api.github.com/repos/hankliu62/interview/issues/415/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/interview/issues/415/comments","events_url":"https://api.github.com/repos/hankliu62/interview/issues/415/events","html_url":"https://github.com/hankliu62/interview/issues/415","id":2129655251,"node_id":"I_kwDOLNphd85-7_XT","number":415,"title":"setStateæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":6547468371,"node_id":"LA_kwDOLNphd88AAAABhkJwUw","url":"https://api.github.com/repos/hankliu62/interview/labels/react","name":"react","color":"0052CC","default":false,"description":"Reactç›¸å…³"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/hankliu62/interview/milestones/4","html_url":"https://github.com/hankliu62/interview/milestone/4","labels_url":"https://api.github.com/repos/hankliu62/interview/milestones/4/labels","id":10707687,"node_id":"MI_kwDOLNphd84Ao2Ln","number":4,"title":"4","description":"æè¿°é—®é¢˜éš¾åº¦ï¼Œéš¾åº¦4ğŸŒŸ","creator":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"open_issues":11,"closed_issues":0,"state":"open","created_at":"2024-03-20T03:36:32Z","updated_at":"2024-05-04T04:54:14Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2024-02-12T08:44:44Z","updated_at":"2024-04-26T07:47:28Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"### v18ä¹‹å‰\r\n\r\n- Reactæ˜¯å¸Œæœ›setStateè¡¨ç°ä¸ºå¼‚æ­¥çš„ï¼Œå› ä¸ºæ‰¹é‡æ›´æ–°å¯ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚å› æ­¤åœ¨Reactèƒ½å¤Ÿç®¡æ§åˆ°çš„åœ°æ–¹ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸé’©å­å’Œåˆæˆäº‹ä»¶å›è°ƒå‡½æ•°å†…ï¼Œè¡¨ç°ä¸ºå¼‚æ­¥ã€‚\r\n- åœ¨å®šæ—¶å™¨å’ŒåŸç”Ÿäº‹ä»¶é‡Œï¼Œå› ä¸ºReactç®¡æ§ä¸åˆ°ï¼Œæ‰€ä»¥è¡¨ç°ä¸ºåŒæ­¥ã€‚\r\n- åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦ç«‹å³è·å–æ›´æ–°åçš„çŠ¶æ€ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨ç¬¬äºŒä¸ªå¯é€‰å‚æ•°callbackï¼Œåœ¨çŠ¶æ€æ›´æ–°åç«‹å³æ‰§è¡Œå›è°ƒå‡½æ•°æ¥è·å–æ›´æ–°åçš„çŠ¶æ€ã€‚ä¾‹å¦‚ï¼š\r\n\r\n``` javascript\r\nthis.setState({ counter: this.state.counter + 1 }, () => {\r\n  console.log(this.state.counter); // è¾“å‡ºæ›´æ–°åçš„å€¼\r\n});\r\n```\r\n\r\n### v18ä¹‹å\r\n\r\n- React18ä¹‹åï¼Œé»˜è®¤æ‰€æœ‰çš„æ“ä½œéƒ½æ”¾åˆ°æ‰¹å¤„ç†ä¸­ï¼Œå› æ­¤setStateä¸ç®¡åœ¨é‚£å„¿è°ƒç”¨éƒ½æ˜¯å¼‚æ­¥çš„äº†ã€‚\r\n- å¦‚æœå¸Œæœ›åŒæ­¥æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨flushSyncè¿™ä¸ªAPIã€‚\r\n\r\n### react18ä¹‹å‰ç‰ˆæœ¬çš„è§£é‡Š\r\n\r\nåœ¨Reactä¸­ï¼Œå¦‚æœæ˜¯ç”±Reactå¼•å‘çš„äº‹ä»¶å¤„ç†ï¼ˆæ¯”å¦‚é€šè¿‡onClickå¼•å‘çš„äº‹ä»¶å¤„ç†ï¼‰ï¼Œè°ƒç”¨setStateä¸ä¼šåŒæ­¥æ›´æ–°this.stateï¼Œé™¤æ­¤ä¹‹å¤–çš„setStateè°ƒç”¨ä¼šåŒæ­¥æ‰§è¡Œthis.state ã€‚æ‰€è°“â€œé™¤æ­¤ä¹‹å¤–â€ï¼ŒæŒ‡çš„æ˜¯ç»•è¿‡Reacté€šè¿‡addEventListenerç›´æ¥æ·»åŠ çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¿˜æœ‰é€šè¿‡setTimeout/setIntervaläº§ç”Ÿçš„å¼‚æ­¥è°ƒç”¨ã€‚\r\n\r\n**åŸå› ï¼š** åœ¨Reactçš„setStateå‡½æ•°å®ç°ä¸­ï¼Œä¼šæ ¹æ®ä¸€ä¸ªå˜é‡isBatchingUpdatesåˆ¤æ–­æ˜¯ç›´æ¥æ›´æ–°this.stateè¿˜æ˜¯æ”¾åˆ°é˜Ÿåˆ—ä¸­å›å¤´å†è¯´ï¼Œè€ŒisBatchingUpdatesé»˜è®¤æ˜¯falseï¼Œä¹Ÿå°±è¡¨ç¤ºsetStateä¼šåŒæ­¥æ›´æ–°this.stateï¼Œä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªå‡½æ•°batchedUpdatesï¼Œè¿™ä¸ªå‡½æ•°ä¼šæŠŠisBatchingUpdatesä¿®æ”¹ä¸ºtrueï¼Œè€Œå½“Reactåœ¨è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°ä¹‹å‰å°±ä¼šè°ƒç”¨è¿™ä¸ªbatchedUpdatesï¼Œé€ æˆçš„åæœï¼Œå°±æ˜¯ç”±Reactæ§åˆ¶çš„äº‹ä»¶å¤„ç†è¿‡ç¨‹setStateä¸ä¼šåŒæ­¥æ›´æ–°this.stateã€‚\r\n\r\n**æ³¨æ„ï¼š** setStateçš„â€œå¼‚æ­¥â€å¹¶ä¸æ˜¯è¯´å†…éƒ¨ç”±å¼‚æ­¥ä»£ç å®ç°ï¼Œå…¶å®æœ¬èº«æ‰§è¡Œçš„è¿‡ç¨‹å’Œä»£ç éƒ½æ˜¯åŒæ­¥çš„ï¼Œåªæ˜¯åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°çš„è°ƒç”¨é¡ºåºåœ¨æ›´æ–°ä¹‹å‰ï¼Œå¯¼è‡´åœ¨åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­æ²¡æ³•ç«‹é©¬æ‹¿åˆ°æ›´æ–°åçš„å€¼ï¼Œå½¢å¼äº†æ‰€è°“çš„â€œå¼‚æ­¥â€ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•° setState(partialState, callback) ä¸­çš„callbackæ‹¿åˆ°æ›´æ–°åçš„ç»“æœã€‚","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/interview/issues/415/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/interview/issues/415/timeline","performed_via_github_app":null,"state_reason":null},"menus":["### v18ä¹‹å‰","### v18ä¹‹å","### react18ä¹‹å‰ç‰ˆæœ¬çš„è§£é‡Š"]},"__N_SSG":true}