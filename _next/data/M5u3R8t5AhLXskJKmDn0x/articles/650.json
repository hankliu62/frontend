{"pageProps":{"article":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/650","repository_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com","labels_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/650/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/650/comments","events_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/650/events","html_url":"https://github.com/hankliu62/hankliu62.github.com/issues/650","id":2229121447,"node_id":"I_kwDOBiJZIc6E3bGn","number":650,"title":"MacOS 和 Linux 的 Homebrew 安装与卸载","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":688950687,"node_id":"MDU6TGFiZWw2ODg5NTA2ODc=","url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/labels/blog","name":"blog","color":"1677ff","default":false,"description":"博客文章"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-04-06T07:25:19Z","updated_at":"2024-04-06T07:42:21Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"## MacOS 和 Linux 的 Homebrew 安装与卸载\n\n### Homebrew\n\nmacOS（或 Linux）缺失的软件包的管理器\n\n#### 安装 Homebrew\n\n``` bash\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n```\n\n脚本会在执行前暂停，并说明它将做什么。高级安装选项在 [这里](https://docs.brew.sh/Installation)。\n\n#### Homebrew 能干什么?\n\n1. 使用 `Homebrew` 安装 `Mac`（或您的 `Linux` 系统）没有预装但 [你需要的东西](https://formulae.brew.sh/formula/)。\n\n``` bash\nbrew install wget\n```\n\n2. `Homebrew` 会将软件包安装到独立目录，并将其文件软链接至 `/opt/homebrew` 。\n\n``` bash\ncd /opt/homebrew\nfind Cellar\n\n# Cellar/wget/1.16.1\n# Cellar/wget/1.16.1/bin/wget\n# Cellar/wget/1.16.1/share/man/man1/wget.1\n\nls -l bin\n# bin/wget -> ../Cellar/wget/1.16.1/bin/wget\n```\n\n3. `Homebrew` 不会将文件安装到它本身目录之外，所以您可将 `Homebrew` 安装到任意位置。\n\n4. 轻松创建你自己的 `Homebrew` 包。\n\n``` bash\nbrew create https://foo.com/foo-1.0.tgz\n# Created /opt/homebrew/Library/Taps/homebrew/homebrew-core/Formula/foo.rb\n```\n\n5. 完全基于 `Git` 和 `Ruby`，所以自由修改的同时你仍可以轻松撤销你的变更或与上游更新合并。\n\n``` bash\nbrew edit wget # 使用 $EDITOR 编辑!\n```\n\n6. `Homebrew` 的配方都是简单的 `Ruby` 脚本：\n\n``` ruby\nclass Wget < Formula\n  homepage \"https://www.gnu.org/software/wget/\"\n  url \"https://ftp.gnu.org/gnu/wget/wget-1.15.tar.gz\"\n  sha256 \"52126be8cf1bddd7536886e74c053ad7d0ed2aa89b4b630f76785bac21695fcd\"\n\n  def install\n    system \"./configure\", \"--prefix=#{prefix}\"\n    system \"make\", \"install\"\n  end\nend\n```\n\n7. `Homebrew` 使 `macOS`（或您的 `Linux` 系统）更完整。使用 `gem` 来安装 `RubyGems`、用 `brew` 来安装那些依赖包。\n\n8. “要安装，请拖动此图标……”不会再出现了。使用 `Homebrew Cask` 安装 `macOS` 应用程序、字体和插件以及其他非开源软件。\n\n``` bash\nbrew install --cask firefox\n```\n\n9. 制作一个 `cask` 就像创建一个配方一样简单。\n\n``` bash\nbrew create --cask https://foo.com/foo-1.0.dmg\n# Editing /opt/homebrew/Library/Taps/homebrew/homebrew-cask/Casks/foo.rb\n```\n\n### 国内源安装\n\n国内安装 `Homebrew` 可能很慢，所以我们推荐使用国内的源来进行安装\n\n#### macOS\n\n- 常规安装（推荐）：\n\n``` base\n/bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\"\n```\n\n- 极速安装（精简版）：\n\n``` base\n/bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\" speed\n```\n\n- 卸载\n\n``` base\n/bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)\"\n```\n\n### Linux\n\n- 安装\n``` base\nrm Homebrew.sh; wget https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh; bash Homebrew.sh\n```\n\n- 卸载\n\n``` base\nrm HomebrewUninstall.sh; wget https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh; bash HomebrewUninstall.sh\n```\n\n### macOS 常见错误说明\n\n> [官方表示只支持最新的三个Mac os版本](https://brew.sh/blog/),老的Mac系统可以试试MacPorts。\n\n> 首先确保运行的`/bin/zsh -c \"$(curl -fsSL https://gitee.com/ **cunkai** /HomebrewCN/raw/master/Homebrew.sh)\"` 中间那个 **cunkai** 不是别的。\n\n**1.** 如果遇到安装软件报错 **404** ，切换网络如果还不行：\n\n查看下官方更新记录` https://brew.sh/blog/ ` 如果近期有更新，可以发我邮箱cunkai.wang@foxmail.com。我看看是否官方修改了某些代码。\n\n**2.** 不小心改动了brew文件夹里面的内容，如何重置，运行：\n```\nbrew update-reset\n```\n\n**3.** 报错提示中如果有  **git -c xxxxxxx xxx xxx**  等类似语句。\n\n  如果有这种提示，把报错中提供的解决语句（git -C ....）逐句运行一般就可以解决。\n\n**4.** 如果遇到报错中含有errno  **54**  /  **443**  / 的问题：\n\n  这种一般切换源以后没有问题，因为都是公益服务器，不稳定性很大。\n\n**5.** 检测到你不是最新系统，需要自动升级 Ruby 后失败的：\n\n\n```\nHOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles\n\nrm -rf /Users/$(whoami)/Library/Caches/Homebrew/\n\nbrew update\n```\n\n**6.** 如果报错  **command not found : brew**\n\n先运行此命令`/usr/local/Homebrew/bin/brew -v` ，如果是ARM架构的芯片运行`/opt/homebrew/bin/brew -v` 看是否能出来Homebrew的版本号。\n\n如果能用就是电脑PATH配置问题，重启终端运行 `echo $PATH` 打印出来自己分析一下。\n\n**7.** Error: Running Homebrew as root is extremely dangerous and no longer supported.\nAs Homebrew does not drop privileges on installation you would be giving all\n **build scripts full access to your system.**\n\n此报错原因是执行过su命令，把账户切换到了root权限，退出root权限即可。一般关闭终端重新打开即可，或者输入命令exit回车 或者su - 用户名\n\n**8.** /usr/local/bin/brew:  **bad interpreter: /bin/bash^M: no such file or directory**\n\n`git config --global core.autocrlf`\n\n如果显示true那就运行下面这句话可以解决：\n\n`git config --global core.autocrlf input`\n\n运行完成后，需要重新运行安装脚本。\n\n**9.** from /usr/local/Homebrew/Library/Homebrew/ **brew.rb:23:in `<main>'**\n\n`brew update-reset`\n\n**10.** M1芯片电脑运行which brew如果显示/usr/local/Homebrew/bin/brew\n\n解决方法，手动删除/usr/local目录，重新安装：\n\n```\n/bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\"\n\n```\n\n**11.** The x86_64 architecture is required\n这句话意思是，这个软件不支持M1芯片，只支持x86_64架构的CPU。\n\n**12.** Warning: No remote 'origin' in /usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask, skipping update!\n\n看评论区说解决方法（我未测试）：https://gitee.com/cunkai/HomebrewCN/issues/I5A7RV\n\n**13.** fatal: not in a git directory   Error: Command failed with exit 128: git\n\n```\ngit config --global http.sslVerify false\n```\n\n**14.** /usr/local/Homebrew/Library/Homebrew/cmd/vendor-install.sh:1ine245:./3.1.4/bin/ruby:BadCPUtype inexecutable\n\n如果你是苹果的M芯片有这种报错，说明你电脑有两个brew，简单粗暴的方法是删除`/usr/local/Homebrew`目录，保留`/opt/homebrew`即可。\n（提示：如何去指定访达，屏幕左上角找到前往->前往文件夹然后输入`/usr/local`回车把Homebrew删除即可。反之如果你是英特尔处理器就保留`/usr/local`下的去opt目录删除）\n温和的方法是分别运行下面三句话，看看是否包含`/usr/local/Homebrew`的字符串，删掉整行保存。\n\n```\nopen ${HOME}/.zprofile\nopen $HOME/.bash_profile\nopen ${HOME}/.profile\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/650/timeline","performed_via_github_app":null,"state_reason":null},"menus":["## MacOS 和 Linux 的 Homebrew 安装与卸载\n\n### Homebrew\n\nmacOS（或 Linux）缺失的软件包的管理器\n\n#### 安装 Homebrew\n\n``` bash\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n```\n\n脚本会在执行前暂停，并说明它将做什么。高级安装选项在 [这里](https://docs.brew.sh/Installation)。\n\n#### Homebrew 能干什么?\n\n1. 使用 `Homebrew` 安装 `Mac`（或您的 `Linux` 系统）没有预装但 [你需要的东西](https://formulae.brew.sh/formula/)。\n\n``` bash\nbrew install wget\n```\n\n2. `Homebrew` 会将软件包安装到独立目录，并将其文件软链接至 `/opt/homebrew` 。\n\n``` bash\ncd /opt/homebrew\nfind Cellar\n\n# Cellar/wget/1.16.1\n# Cellar/wget/1.16.1/bin/wget\n# Cellar/wget/1.16.1/share/man/man1/wget.1\n\nls -l bin\n# bin/wget -> ../Cellar/wget/1.16.1/bin/wget\n```\n\n3. `Homebrew` 不会将文件安装到它本身目录之外，所以您可将 `Homebrew` 安装到任意位置。\n\n4. 轻松创建你自己的 `Homebrew` 包。\n\n``` bash\nbrew create https://foo.com/foo-1.0.tgz\n# Created /opt/homebrew/Library/Taps/homebrew/homebrew-core/Formula/foo.rb\n```\n\n5. 完全基于 `Git` 和 `Ruby`，所以自由修改的同时你仍可以轻松撤销你的变更或与上游更新合并。\n\n``` bash\nbrew edit wget # 使用 $EDITOR 编辑!\n```\n\n6. `Homebrew` 的配方都是简单的 `Ruby` 脚本：\n\n``` ruby\nclass Wget < Formula\n  homepage \"https://www.gnu.org/software/wget/\"\n  url \"https://ftp.gnu.org/gnu/wget/wget-1.15.tar.gz\"\n  sha256 \"52126be8cf1bddd7536886e74c053ad7d0ed2aa89b4b630f76785bac21695fcd\"\n\n  def install\n    system \"./configure\", \"--prefix=#{prefix}\"\n    system \"make\", \"install\"\n  end\nend\n```\n\n7. `Homebrew` 使 `macOS`（或您的 `Linux` 系统）更完整。使用 `gem` 来安装 `RubyGems`、用 `brew` 来安装那些依赖包。\n\n8. “要安装，请拖动此图标……”不会再出现了。使用 `Homebrew Cask` 安装 `macOS` 应用程序、字体和插件以及其他非开源软件。\n\n``` bash\nbrew install --cask firefox\n```\n\n9. 制作一个 `cask` 就像创建一个配方一样简单。\n\n``` bash\nbrew create --cask https://foo.com/foo-1.0.dmg\n# Editing /opt/homebrew/Library/Taps/homebrew/homebrew-cask/Casks/foo.rb\n```\n\n### 国内源安装\n\n国内安装 `Homebrew` 可能很慢，所以我们推荐使用国内的源来进行安装\n\n#### macOS\n\n- 常规安装（推荐）：\n\n``` base\n/bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\"\n```\n\n- 极速安装（精简版）：\n\n``` base\n/bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\" speed\n```\n\n- 卸载\n\n``` base\n/bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh)\"\n```\n\n### Linux\n\n- 安装\n``` base\nrm Homebrew.sh; wget https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh; bash Homebrew.sh\n```\n\n- 卸载\n\n``` base\nrm HomebrewUninstall.sh; wget https://gitee.com/cunkai/HomebrewCN/raw/master/HomebrewUninstall.sh; bash HomebrewUninstall.sh\n```\n\n### macOS 常见错误说明\n\n> [官方表示只支持最新的三个Mac os版本](https://brew.sh/blog/),老的Mac系统可以试试MacPorts。\n\n> 首先确保运行的`/bin/zsh -c \"$(curl -fsSL https://gitee.com/ **cunkai** /HomebrewCN/raw/master/Homebrew.sh)\"` 中间那个 **cunkai** 不是别的。\n\n**1.** 如果遇到安装软件报错 **404** ，切换网络如果还不行：\n\n查看下官方更新记录` https://brew.sh/blog/ ` 如果近期有更新，可以发我邮箱cunkai.wang@foxmail.com。我看看是否官方修改了某些代码。\n\n**2.** 不小心改动了brew文件夹里面的内容，如何重置，运行：\n```\nbrew update-reset\n```\n\n**3.** 报错提示中如果有  **git -c xxxxxxx xxx xxx**  等类似语句。\n\n  如果有这种提示，把报错中提供的解决语句（git -C ....）逐句运行一般就可以解决。\n\n**4.** 如果遇到报错中含有errno  **54**  /  **443**  / 的问题：\n\n  这种一般切换源以后没有问题，因为都是公益服务器，不稳定性很大。\n\n**5.** 检测到你不是最新系统，需要自动升级 Ruby 后失败的：\n\n\n```\nHOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles\n\nrm -rf /Users/$(whoami)/Library/Caches/Homebrew/\n\nbrew update\n```\n\n**6.** 如果报错  **command not found : brew**\n\n先运行此命令`/usr/local/Homebrew/bin/brew -v` ，如果是ARM架构的芯片运行`/opt/homebrew/bin/brew -v` 看是否能出来Homebrew的版本号。\n\n如果能用就是电脑PATH配置问题，重启终端运行 `echo $PATH` 打印出来自己分析一下。\n\n**7.** Error: Running Homebrew as root is extremely dangerous and no longer supported.\nAs Homebrew does not drop privileges on installation you would be giving all\n **build scripts full access to your system.**\n\n此报错原因是执行过su命令，把账户切换到了root权限，退出root权限即可。一般关闭终端重新打开即可，或者输入命令exit回车 或者su - 用户名\n\n**8.** /usr/local/bin/brew:  **bad interpreter: /bin/bash^M: no such file or directory**\n\n`git config --global core.autocrlf`\n\n如果显示true那就运行下面这句话可以解决：\n\n`git config --global core.autocrlf input`\n\n运行完成后，需要重新运行安装脚本。\n\n**9.** from /usr/local/Homebrew/Library/Homebrew/ **brew.rb:23:in `<main>'**\n\n`brew update-reset`\n\n**10.** M1芯片电脑运行which brew如果显示/usr/local/Homebrew/bin/brew\n\n解决方法，手动删除/usr/local目录，重新安装：\n\n```\n/bin/zsh -c \"$(curl -fsSL https://gitee.com/cunkai/HomebrewCN/raw/master/Homebrew.sh)\"\n\n```\n\n**11.** The x86_64 architecture is required\n这句话意思是，这个软件不支持M1芯片，只支持x86_64架构的CPU。\n\n**12.** Warning: No remote 'origin' in /usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask, skipping update!\n\n看评论区说解决方法（我未测试）：https://gitee.com/cunkai/HomebrewCN/issues/I5A7RV\n\n**13.** fatal: not in a git directory   Error: Command failed with exit 128: git\n\n```\ngit config --global http.sslVerify false\n```\n\n**14.** /usr/local/Homebrew/Library/Homebrew/cmd/vendor-install.sh:1ine245:./3.1.4/bin/ruby:BadCPUtype inexecutable\n\n如果你是苹果的M芯片有这种报错，说明你电脑有两个brew，简单粗暴的方法是删除`/usr/local/Homebrew`目录，保留`/opt/homebrew`即可。\n（提示：如何去指定访达，屏幕左上角找到前往->前往文件夹然后输入`/usr/local`回车把Homebrew删除即可。反之如果你是英特尔处理器就保留`/usr/local`下的去opt目录删除）\n温和的方法是分别运行下面三句话，看看是否包含`/usr/local/Homebrew`的字符串，删掉整行保存。\n\n```\nopen ${HOME}/.zprofile\nopen $HOME/.bash_profile\nopen ${HOME}/.profile\n```"]},"__N_SSG":true}