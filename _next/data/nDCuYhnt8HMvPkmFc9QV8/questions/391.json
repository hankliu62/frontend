{"pageProps":{"issue":{"url":"https://api.github.com/repos/hankliu62/interview/issues/391","repository_url":"https://api.github.com/repos/hankliu62/interview","labels_url":"https://api.github.com/repos/hankliu62/interview/issues/391/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/interview/issues/391/comments","events_url":"https://api.github.com/repos/hankliu62/interview/issues/391/events","html_url":"https://github.com/hankliu62/interview/issues/391","id":2129652050,"node_id":"I_kwDOLNphd85-7-lS","number":391,"title":"手写Ajax","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":6547468054,"node_id":"LA_kwDOLNphd88AAAABhkJvFg","url":"https://api.github.com/repos/hankliu62/interview/labels/handwritten","name":"handwritten","color":"faad14","default":false,"description":"手写题相关"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-02-12T08:42:32Z","updated_at":"2024-03-04T14:18:31Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"``` javascript\r\nfunction ajax(method, url, data, successCallback, errorCallback) {\r\n  // 创建 XMLHttpRequest 对象\r\n  const xhr = new XMLHttpRequest();\r\n\r\n  // 监听 readyState 变化事件\r\n  xhr.onreadystatechange = function() {\r\n    if (xhr.readyState === 4) {\r\n      if (xhr.status === 200) {\r\n        // 请求成功，执行成功回调函数\r\n        successCallback(xhr.responseText);\r\n      } else {\r\n        // 请求失败，执行错误回调函数\r\n        errorCallback(xhr.status);\r\n      }\r\n    }\r\n  };\r\n\r\n  // 初始化请求\r\n  xhr.open(method, url, true);\r\n\r\n  // 设置请求头\r\n  xhr.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\r\n\r\n  // 发送请求\r\n  xhr.send(data);\r\n}\r\n```\r\n\r\n1. 定义一个 ajax 函数，它接受五个参数：请求方法（method）、请求地址（url）、请求数据（data）、成功回调函数（successCallback）和错误回调函数（errorCallback）。\r\n2. 创建一个 XMLHttpRequest 对象，并设置它的 readyState 变化事件的回调函数。在回调函数中，判断 readyState 是否为 4，以及状态码是否为 200。如果是，则执行成功回调函数，并将响应文本作为参数传入；否则，执行错误回调函数，并将状态码作为参数传入。\r\n3. 接着，调用 open 方法初始化请求，并调用 setRequestHeader 方法设置请求头。最后，我们调用 send 方法发送请求，并将请求数据作为参数传入。","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/interview/issues/391/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/interview/issues/391/timeline","performed_via_github_app":null,"state_reason":null},"menus":[]},"__N_SSG":true}