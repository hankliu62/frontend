{"pageProps":{"issue":{"url":"https://api.github.com/repos/hankliu62/interview/issues/611","repository_url":"https://api.github.com/repos/hankliu62/interview","labels_url":"https://api.github.com/repos/hankliu62/interview/issues/611/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/interview/issues/611/comments","events_url":"https://api.github.com/repos/hankliu62/interview/issues/611/events","html_url":"https://github.com/hankliu62/interview/issues/611","id":2252009824,"node_id":"I_kwDOLNphd86GOvFg","number":611,"title":"vite 如何处理 commonjs","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":6547468588,"node_id":"LA_kwDOLNphd88AAAABhkJxLA","url":"https://api.github.com/repos/hankliu62/interview/labels/webpack","name":"webpack","color":"923874","default":false,"description":"Webpack相关"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/hankliu62/interview/milestones/3","html_url":"https://github.com/hankliu62/interview/milestone/3","labels_url":"https://api.github.com/repos/hankliu62/interview/milestones/3/labels","id":10707686,"node_id":"MI_kwDOLNphd84Ao2Lm","number":3,"title":"3","description":"描述问题难度，难度3🌟","creator":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"open_issues":14,"closed_issues":0,"state":"open","created_at":"2024-03-20T03:36:24Z","updated_at":"2024-04-19T04:15:32Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2024-04-19T03:36:38Z","updated_at":"2024-04-19T03:36:38Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"Vite 默认不支持 CommonJS 模块，因为它采用 ES 模块作为主要的模块系统。但是，你可以通过一些方式来处理 CommonJS 模块：\r\n\r\n1. **使用插件：** Vite 提供了 `@vitejs/plugin-vue` 和 `@vitejs/plugin-react-refresh` 等插件来处理 Vue 和 React 应用中的 CommonJS 模块。你可以尝试使用这些插件来支持你的项目中的 CommonJS 模块。\r\n\r\n2. **手动转换：** 如果你的项目中只有少量的 CommonJS 模块，你可以手动将它们转换成 ES 模块。你可以使用工具如 `esm` 或 `rollup-plugin-commonjs` 等来进行转换。\r\n\r\n3. **使用 Vite 的 `transform` 钩子：** Vite 提供了一个 `transform` 钩子，你可以在这里自定义代码转换的逻辑。你可以编写自己的转换插件来处理 CommonJS 模块。\r\n\r\n下面是一个使用 Vite `transform` 钩子处理 CommonJS 模块的简单示例：\r\n\r\n```javascript\r\n// vite.config.js\r\nimport { defineConfig } from 'vite';\r\n\r\nexport default defineConfig({\r\n  plugins: [],\r\n  build: {\r\n    rollupOptions: {\r\n      plugins: [\r\n        {\r\n          transform(code, id) {\r\n            if (id.endsWith('.js') && code.includes('require(')) {\r\n              // 使用正则表达式或其他方式来转换 CommonJS 模块\r\n              code = code.replace(/require\\(/g, 'import(');\r\n            }\r\n            return {\r\n              code,\r\n              map: null // 如果不需要 sourcemap，可以返回 null\r\n            };\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n});\r\n```\r\n上面的代码是一个简单的 `Vite` 配置文件，它使用了 `transform` 钩子来查找并替换 `JavaScript` 代码中的 `require(`，将其转换为 `ES` 模块的 `import(`。你可以根据自己的需求编写更复杂的转换逻辑。\r\n\r\n总的来说，虽然 `Vite` 默认不支持 `CommonJS` 模块，但你可以通过使用插件、手动转换或自定义转换逻辑来处理你的项目中的 `CommonJS` 模块。\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/interview/issues/611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/interview/issues/611/timeline","performed_via_github_app":null,"state_reason":null},"menus":[]},"__N_SSG":true}