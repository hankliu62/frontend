{"pageProps":{"issue":{"url":"https://api.github.com/repos/hankliu62/interview/issues/588","repository_url":"https://api.github.com/repos/hankliu62/interview","labels_url":"https://api.github.com/repos/hankliu62/interview/issues/588/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/interview/issues/588/comments","events_url":"https://api.github.com/repos/hankliu62/interview/issues/588/events","html_url":"https://github.com/hankliu62/interview/issues/588","id":2234727264,"node_id":"I_kwDOLNphd86FMztg","number":588,"title":"vue2和vue3 diff算法原理","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":6547468546,"node_id":"LA_kwDOLNphd88AAAABhkJxAg","url":"https://api.github.com/repos/hankliu62/interview/labels/vue","name":"vue","color":"0E8A16","default":false,"description":"Vue相关"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/hankliu62/interview/milestones/4","html_url":"https://github.com/hankliu62/interview/milestone/4","labels_url":"https://api.github.com/repos/hankliu62/interview/milestones/4/labels","id":10707687,"node_id":"MI_kwDOLNphd84Ao2Ln","number":4,"title":"4","description":"描述问题难度，难度4🌟","creator":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"open_issues":2,"closed_issues":0,"state":"open","created_at":"2024-03-20T03:36:32Z","updated_at":"2024-04-10T04:22:01Z","due_on":null,"closed_at":null},"comments":0,"created_at":"2024-04-10T04:22:01Z","updated_at":"2024-04-10T04:22:01Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"### Vue 2 的 diff 算法原理\r\n\r\n在 Vue 2 中，采用的是一种基于双向深度优先遍历的 diff 算法。其主要思想是比较新旧虚拟 DOM 树，并找出最小量的更新来修改真实 DOM。Vue 2 的 diff 算法大致流程如下：\r\n\r\n1. 首先，将新旧虚拟 DOM 树的根节点进行比较。\r\n2. 如果新旧节点类型不同，则直接将旧节点替换为新节点。\r\n3. 如果新旧节点类型相同，则比较它们的属性，并更新不同的属性值。\r\n4. 对比新旧节点的子节点列表，使用双指针遍历算法进行遍历，查找出新增、删除和更新的节点。\r\n5. 对于新增的节点，将其插入到旧节点对应位置之前。\r\n6. 对于删除的节点，直接将其从 DOM 中移除。\r\n7. 对于更新的节点，递归调用 diff 算法进行进一步的比较。\r\n\r\nVue 2 的 diff 算法虽然简单高效，但在处理大型列表或复杂页面时，可能会出现性能问题。\r\n\r\n### Vue 3 的 diff 算法原理\r\n\r\nVue 3 在 diff 算法方面进行了一些优化和改进。Vue 3 使用了一种称为“静态标记”的技术，通过在编译阶段对模板进行静态分析，生成优化的渲染函数。这些渲染函数中包含了节点的静态标记信息，使得在 diff 过程中能够跳过静态节点的比较，从而减少了 diff 的开销。\r\n\r\n此外，Vue 3 还引入了一种基于“新的比较策略”的 diff 算法。该算法在 diff 过程中通过动态规划的方式寻找最优的节点匹配方案，从而减少了不必要的 DOM 操作，提高了性能。\r\n\r\n总的来说，Vue 3 的 diff 算法在处理大型列表和复杂页面时，性能表现更好，并且在渲染函数的生成和优化方面也做出了改进，使得整体的性能得到提升。\r\n","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/interview/issues/588/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/interview/issues/588/timeline","performed_via_github_app":null,"state_reason":null},"menus":["### Vue 2 的 diff 算法原理","### Vue 3 的 diff 算法原理"]},"__N_SSG":true}