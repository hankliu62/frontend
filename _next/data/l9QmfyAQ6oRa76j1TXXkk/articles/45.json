{"pageProps":{"article":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/45","repository_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com","labels_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/45/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/45/comments","events_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/45/events","html_url":"https://github.com/hankliu62/hankliu62.github.com/issues/45","id":465645662,"node_id":"MDU6SXNzdWU0NjU2NDU2NjI=","number":45,"title":"ZM MYSQL","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":688950687,"node_id":"MDU6TGFiZWw2ODg5NTA2ODc=","url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/labels/blog","name":"blog","color":"1677ff","default":false,"description":"博客文章"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2019-07-09T08:34:24Z","updated_at":"2019-07-11T07:36:54Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"## 工单查询\r\n```sql\r\nSELECT start_time, COUNT(DISTINCT lesson_uid) AS count FROM (SELECT FROM_UNIXTIME(s.start_time / 1000, '%Y-%m-%d') AS start_time, s.lesson_uid AS lesson_uid FROM `audio_xx_tickets_summary` s JOIN `audio_xx_tickets_detail` d ON d.ticket_id = s.ticket_id WHERE s.start_time BETWEEN 1561939200000 AND 1562630399000 AND s.ticket_bu = 2 AND d.message_page LIKE '%杂音%') temp1 GROUP BY start_time ORDER BY start_time DESC\r\n\r\nSELECT start_time, COUNT(DISTINCT lesson_uid) AS count FROM (SELECT FROM_UNIXTIME(s.start_time / 1000, '%Y-%m-%d') AS start_time, s.lesson_uid AS lesson_uid FROM `audio_xx_tickets_summary` s JOIN `audio_xx_tickets_detail` d ON d.ticket_id = s.ticket_id WHERE s.start_time BETWEEN 1561939200000 AND 1562630399000 AND s.ticket_bu = 2 AND d.message_page LIKE '%回音%') temp1 GROUP BY start_time ORDER BY start_time DESC\r\n\r\nSELECT start_time, COUNT(DISTINCT lesson_uid) AS count FROM (SELECT FROM_UNIXTIME(s.start_time / 1000, '%Y-%m-%d') AS start_time, s.lesson_uid AS lesson_uid FROM `audio_xx_tickets_summary` s JOIN `audio_xx_tickets_detail` d ON d.ticket_id = s.ticket_id WHERE s.start_time BETWEEN 1561939200000 AND 1562630399000 AND s.ticket_bu = 2) temp1 GROUP BY start_time ORDER BY start_time DESC\r\n```\r\n\r\n# 音频设备使用量TOP20-工单占比\r\n``` sql\r\nSELECT \r\n  i.stat_date AS \"time\", \r\n  ROUND(COUNT(i.id) / temp2.total * 100, 2) AS \"value\", \r\n  IF(i.audio_name='','Unknown',i.audio_name) AS \"metric\"\r\nFROM `tb_avs_xx_day_ticket_info` i\r\nLEFT JOIN (\r\n  SELECT \r\n    stat_date,\r\n    COUNT(id) AS total \r\n  FROM `tb_avs_xx_day_ticket_info` \r\n  GROUP BY stat_date\r\n) temp2\r\nON i.stat_date = temp2.stat_date\r\nWHERE \r\n  i.audio_name IN (\r\n    SELECT \r\n      audio_name \r\n    FROM (\r\n      SELECT \r\n        COUNT(id) AS count, \r\n        audio_name \r\n      FROM `tb_avs_xx_day_ticket_info` \r\n      GROUP BY audio_name \r\n      ORDER BY count DESC \r\n      LIMIT 0, 20\r\n    ) temp1\r\n  )\r\nGROUP BY i.stat_date, i.audio_name\r\nORDER BY i.stat_date DESC\r\n```\r\n\r\n## 网络类型TOP20-工单量\r\n``` sql\r\nSELECT \r\n  time,\r\n  COUNT(ticket_id) as value,\r\n  IF(isp='','Unknown',isp) AS metric\r\nFROM (\r\n  SELECT * FROM (\r\n    SELECT \r\n      t.stat_date AS \"time\",\r\n      t.ticket_id AS ticket_id,\r\n      if(i.isp IS NULL,'', i.isp) AS isp \r\n    FROM tb_avs_xx_day_ticket_info AS t\r\n    LEFT JOIN tb_avs_xx_day_launch_info AS i \r\n    ON t.user_id = i.user_id AND t.stat_date = i.stat_date\r\n    WHERE t.stat_date BETWEEN FROM_UNIXTIME(1562224610) AND FROM_UNIXTIME(1562829410)\r\n    ORDER BY t.stat_date\r\n  ) temp3\r\n  WHERE isp IN (\r\n      SELECT \r\n        isp\r\n      FROM (\r\n        SELECT \r\n          isp, \r\n          COUNT(isp) AS \"num\" \r\n        FROM `tb_avs_xx_day_launch_info` \r\n        GROUP BY isp \r\n        ORDER BY num DESC \r\n        LIMIT 0, 20\r\n      ) temp1\r\n    )\r\n) temp\r\nGROUP BY time, isp\r\n```","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/45/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/45/timeline","performed_via_github_app":null,"state_reason":null},"menus":["## 工单查询","## 网络类型TOP20-工单量"]},"__N_SSG":true}