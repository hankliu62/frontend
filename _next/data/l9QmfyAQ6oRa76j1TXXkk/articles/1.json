{"pageProps":{"article":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/1","repository_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com","labels_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/1/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/1/comments","events_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/1/events","html_url":"https://github.com/hankliu62/hankliu62.github.com/issues/1","id":256598533,"node_id":"MDU6SXNzdWUyNTY1OTg1MzM=","number":1,"title":"常用的shell命令","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":688950687,"node_id":"MDU6TGFiZWw2ODg5NTA2ODc=","url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/labels/blog","name":"blog","color":"1677ff","default":false,"description":"博客文章"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2017-09-11T06:52:08Z","updated_at":"2024-02-07T05:42:10Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"## 一、SSH到服务器上再执行shell命令\r\n``` shell\r\n  ssh -t root@192.168.222.127 \\\r\n    \"sudo cp -rf ${REMOTE_DESTS[$key]#*:}/${NGINX_CONF_FILENAME} /etc/nginx/sites-available/ &&\r\n    sudo rm -rf ${REMOTE_DESTS[$key]#*:}/${NGINX_CONF_FILENAME} &&\r\n    sudo ln -sf /etc/nginx/sites-available/${NGINX_CONF_FILENAME} /etc/nginx/sites-enabled/${NGINX_CONF_FILENAME} &&\r\n    sudo service nginx reload\"\r\n```\r\n\r\n## 二、查看或修改监控文件系统(Inotify)的watch数目\r\n``` shell\r\n# 设置\r\nsudo sysctl fs.inotify.max_user_watches=524288\r\n\r\n# 查看\r\nsysctl -a | grep inotify\r\n```\r\n\r\n## 三、查看Ubuntu操作系统位数及版本\r\n``` shell\r\n# 查看Ubuntu操作系统位数\r\n# 方法一: getconf\r\ngetconf LONG_BIT \r\n# 64 or 32\r\n\r\n# 方法二: uname -a\r\nuname -a\r\n# Linux user-3020 3.13.0-48-generic #80-Ubuntu SMP Thu Mar 12 11:16:15 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\r\n# i686表示32位, x86_64表示64位\r\n\r\n# 查看Ubuntu操作系统版本\r\nlsb_release -a\r\n# Distributor ID:\tUbuntu\r\n# Description:\tUbuntu 14.04.2 LTS\r\n# Release:\t14.04\r\n# Codename:\ttrusty\r\n```\r\n\r\n## 四、动态查看一个文件\r\n``` shell\r\ntail -f filename\r\n```\r\n\r\n## 五、sudo操作手动输入密码\r\n``` shell\r\necho \"abc123_\" | sudo -S sh -c \"cp /home/user/hosts /etc/hosts\"\r\n```\r\n\r\n## 六、替换变量中字符\r\n### 第一种方式\r\n\r\n``` shell\r\nCOMMIT_MSG=$(COMMIT_MSG//feat/build) # 将COMMIT_MSG中所有的feat替换成build\r\n```\r\n\r\n### 第二种方式: sed\r\n\r\n``` shell\r\nCOMMIT_MSG=$(echo $COMMIT_MSG | sed 's/^ //g') #去除COMMIT_MSG变量中所有左边的空格\r\n```\r\n\r\n### 第三种方式： tr命令\r\n*tr命令*可以对来自标准输入的字符进行替换、压缩和删除。它可以将一组字符变成另一组字符，经常用来编写优美的单行命令，作用很强大。\r\n\r\n#### 语法\r\n\r\n``` shell\r\ntr(选项)(参数)\r\n```\r\n\r\n#### 选项\r\n* -c或——complerment：取代所有不属于第一字符集的字符； \r\n* -d或——delete：删除所有属于第一字符集的字符； \r\n* -s或--squeeze-repeats：把连续重复的字符以单独一个字符表示； \r\n* -t或--truncate-set1：先删除第一字符集较第二字符集多出的字符。\r\n\r\n#### 参数\r\n* 字符集1：指定要转换或删除的原字符集。当执行转换操作时，必须使用参数“字符集2”指定转换的目标字符集。但执行删除操作时，不需要参数“字符集2”； \r\n\r\n*字符集2：指定要转换成的目标字符集。\r\n\r\n#### 实例\r\n将输入字符由大写转换为小写： \r\n\r\n``` shell\r\necho \"HELLO WORLD\" | tr 'A-Z' 'a-z' \r\nhello world \r\n```\r\n\r\n'A-Z' 和 'a-z'都是集合，集合是可以自己制定的，例如：'ABD-}'、'bB.,'、'a-de-h'、'a-c0-9'都属于集合，集合里可以使用'\\n'、'\\t'，可以可以使用其他ASCII字符。\r\n\r\n更详细的[tr实例](http://man.linuxde.net/tr)\r\n\r\n## 七、if指令详解(TODO)\r\n### 判断文件夹是否存在\r\n\r\n``` shell\r\n# 如果文件夹不存在，创建文件夹\r\nif [ ! -d \"/myfolder\" ]; then\r\n  mkdir /myfolder\r\nfi\r\n\r\n# shell判断文件,目录是否存在或者具有权限\r\n\r\nfolder=\"/var/www/\"\r\nfile=\"/var/www/log\"\r\n\r\n# -x 参数判断 $folder 是否存在并且是否具有可执行权限\r\nif [ ! -x \"$folder\"]; then\r\n  mkdir \"$folder\"\r\nfi\r\n\r\n# -d 参数判断 $folder 是否存在\r\nif [ ! -d \"$folder\"]; then\r\n  mkdir \"$folder\"\r\nfi\r\n\r\n# -f 参数判断 $file 是否存在\r\nif [ ! -f \"$file\" ]; then\r\n  touch \"$file\"\r\nfi\r\n\r\n# -n 判断一个变量是否有值\r\nif [ ! -n \"$var\" ]; then\r\n  echo \"$var is empty\"\r\n  exit 0\r\nfi\r\n\r\n# 判断两个变量是否相等\r\nif [ \"$var1\" = \"$var2\" ]; then\r\n  echo '$var1 eq $var2'\r\nelse\r\n  echo '$var1 not eq $var2'\r\nfi\r\n```\r\n## 八、开始行和结束行的内容\r\n``` shell\r\n# 文件最后100行\r\ntail -n 100 file \r\n\r\n# 文件开头100行\r\nhead -n 100 file\r\n\r\n# 文件指定开始行和结束行的内容(包头不包尾)\r\nsed '1,100p' file\r\n\r\n# 文件有多少行\r\nwc -l file\r\n```\r\n\r\n## 九、用来从文件或者变量中提取字段(awk)\r\nawk 用来从文本文件中提取字段。缺省地，字段分割符是空格，可以使用-F指定其他分割符。\r\n``` shell\r\necho \"Adam Bor, 34, IndiaKerry Miller, 22, USA\" | awk -F, '{print $1 \",\" $3 }'\r\n# Adam Bor, IndiaKerry Miller, USA\r\n```\r\n这里我们使用，作为字段分割符，同时打印第一个和第三个字段\r\n\r\n## 十、输出不换行(echo)\r\n\r\necho的参数中, -e表示开启转义, /c表示不换行,脚本如下:\r\n\r\n``` shel\r\n#!/bin/sh\r\n#filename: 1\r\necho -e \"please input a value:\\c\"\r\nread value\r\n# echo \"what you input is:\" $valuel\r\n```\r\n\r\n脚本2:\r\n\r\n``` shell\r\n#!/bin/sh\r\n#filename: 1\r\necho -n \"please input a value:\"\r\nread value\r\necho \"what you input is:\" $value\r\n```\r\n\r\n## 十一、字符串大小写不敏感的比较\r\n通用的方法是将字符串先转换成小写后再比较\r\n\r\n``` shell\r\n#!/bin/bash\r\n\r\nxxx=\"Temp\" \r\nyyy=\"temp\"\r\n\r\nx_tmp=$(echo $xxx | tr [A-Z] [a-z]) \r\ny_tmp=$(echo $yyy | tr [A-Z] [a-z])\r\n\r\nif [ \"$x_tmp \" = \"$y_tmp \" ]; then\r\n  echo   \"PASS\"\r\nelse\r\n  echo   \"FAIL\"\r\nfi\r\n```\r\n\r\n## 十二、**&&** 运算符\r\n\r\n语法格式：\r\n``` sh\r\ncommand1 && command2 [&& command3 ...]\r\n```\r\n \r\n&&左边的命令（命令1）返回真(即返回0，成功被执行）后，&&右边的命令（命令2）才能够被执行；换句话说，“如果这个命令执行成功&&那么执行这个命令”。 \r\n\r\n1 命令之间使用 && 连接，实现逻辑与的功能。\r\n2 只有在 && 左边的命令返回真（命令返回值 $? == 0），&& 右边的命令才会被执行。\r\n3 只要有一个命令返回假（命令返回值 $? == 1），后面的命令就不会被执行。\r\n\r\n## 十三、**||** 运算符\r\n\r\n语法格式:\r\n\r\n``` sh\r\ncommand1 || command2 [|| command3 ...]\r\n ```\r\n\r\n||则与&&相反。如果||左边的命令（命令1）未执行成功，那么就执行||右边的命令（命令2）；或者换句话说，“如果这个命令执行失败了||那么就执行这个命令。\r\n\r\n1 命令之间使用 || 连接，实现逻辑或的功能。\r\n2 只有在 || 左边的命令返回假（命令返回值 $? == 1），|| 右边的命令才会被执行。这和 c 语言中的逻辑或语法功能相同，即实现短路逻辑或操作。\r\n3 只要有一个命令返回真（命令返回值 $? == 0），后面的命令就不会被执行。\r\n\r\n## 十四、判断变量中是否包含某个字符串\r\n\r\n3 只要有一个命令返回真（命令返回值 $? == 0），后面的命令就不会被执行。\r\n``` shell\r\nstr=\"this is a string\"  \r\n[[ $str =~ \"this\" ]] && echo \"$str contains this\"   \r\n[[ $str =~ \"that\" ]] || echo \"$str does NOT contain that\"\r\n```\r\n\r\n结果为：\r\nthis is a string contains this\r\nthis is a string does NOT contains that\r\n\"[[\" 判断命令和 \"=~\"正则式匹配符号\r\n\r\n## 十五、shell中 **[ ]** 和 **[[ ]]** 的区别\r\nhttp://blog.csdn.net/ysdaniel/article/details/7905818\r\n\r\n## 十六、shell中 **''** , **\"\"** 和 **``** 的区别\r\nhttp://www.cnblogs.com/Skyar/p/5914942.html\r\n\r\n## 参考地址：\r\n[基础语法](http://www.cnblogs.com/xuejie/archive/2013/01/31/2886552.html)\r\n[echo指令](http://man.linuxde.net/echo)","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/1/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/1/timeline","performed_via_github_app":null,"state_reason":null},"menus":["## 一、SSH到服务器上再执行shell命令","## 二、查看或修改监控文件系统(Inotify)的watch数目","## 三、查看Ubuntu操作系统位数及版本","## 四、动态查看一个文件","## 五、sudo操作手动输入密码","## 六、替换变量中字符","### 第一种方式","### 第二种方式: sed","### 第三种方式： tr命令","#### 语法","#### 选项","#### 参数","#### 实例","## 七、if指令详解(TODO)","### 判断文件夹是否存在","## 八、开始行和结束行的内容","## 九、用来从文件或者变量中提取字段(awk)","## 十、输出不换行(echo)","## 十一、字符串大小写不敏感的比较","## 十二、**&&** 运算符","## 十三、**||** 运算符","## 十四、判断变量中是否包含某个字符串","## 十五、shell中 **[ ]** 和 **[[ ]]** 的区别","## 十六、shell中 **''** , **\"\"** 和 **``** 的区别","## 参考地址："]},"__N_SSG":true}