{"pageProps":{"article":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/517","repository_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com","labels_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/517/labels{/name}","comments_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/517/comments","events_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/517/events","html_url":"https://github.com/hankliu62/hankliu62.github.com/issues/517","id":2126496470,"node_id":"I_kwDOBiJZIc5-v8LW","number":517,"title":"有没有写过自定义的plugin？","user":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"labels":[{"id":6527252877,"node_id":"LA_kwDOBiJZIc8AAAABhQ35jQ","url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/labels/interview%20questions","name":"interview questions","color":"722ed1","default":false,"description":"面试题"},{"id":6536123165,"node_id":"LA_kwDOBiJZIc8AAAABhZVTHQ","url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/labels/webpack","name":"webpack","color":"923874","default":false,"description":"分类-Webpack相关"}],"state":"open","locked":false,"assignee":{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false},"assignees":[{"login":"hankliu62","id":8088864,"node_id":"MDQ6VXNlcjgwODg4NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/8088864?v=4","gravatar_id":"","url":"https://api.github.com/users/hankliu62","html_url":"https://github.com/hankliu62","followers_url":"https://api.github.com/users/hankliu62/followers","following_url":"https://api.github.com/users/hankliu62/following{/other_user}","gists_url":"https://api.github.com/users/hankliu62/gists{/gist_id}","starred_url":"https://api.github.com/users/hankliu62/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hankliu62/subscriptions","organizations_url":"https://api.github.com/users/hankliu62/orgs","repos_url":"https://api.github.com/users/hankliu62/repos","events_url":"https://api.github.com/users/hankliu62/events{/privacy}","received_events_url":"https://api.github.com/users/hankliu62/received_events","type":"User","site_admin":false}],"milestone":null,"comments":0,"created_at":"2024-02-09T05:24:08Z","updated_at":"2024-02-09T05:24:08Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"body":"自定义plugin本质是一个类，这个类实现了apply方法，在apply方法中，通过compiler对象注册一个或多个Webpack生命周期事件的监听器，然后在监听器函数中，实现自定义的逻辑。\r\n\r\n举个简单的例子：\r\n\r\n``` javascript\r\nclass MyPlugin {\r\n  apply(compiler) {\r\n    compiler.hooks.done.tap('MyPlugin', (stats) => {\r\n      console.log('Bundle is now finished!\\n');\r\n      console.log(stats.toString());\r\n    });\r\n  }\r\n}\r\n\r\nmodule.exports = MyPlugin;\r\n```\r\n使用这个plugin：\r\n\r\n``` javascript\r\nconst MyPlugin = require('./my-plugin');\r\n\r\nmodule.exports = {\r\n  // ...\r\n  plugins: [\r\n    new MyPlugin(),\r\n  ],\r\n};\r\n```\r\n\r\n当然，一般自定义的plugin不会这么简单，还需要使用一些进阶技巧，比如：\r\n\r\n1. 合理使用Webpack的生命周期事件：\r\nWebpack提供了许多生命周期事件，可以通过这些事件来监听Webpack构建过程中的各个阶段。在编写自定义插件时，需要选择合适的生命周期事件来监听，并在其中执行自定义逻辑。例如，如果需要在Webpack构建完成后输出一份打包报告，可以使用done事件来实现。\r\n\r\n2. 使用Webpack提供的钩子函数：\r\nWebpack提供了一些钩子函数，可以方便地实现一些常见的功能，如资源解析、模块加载等。在编写自定义插件时，可以通过调用这些钩子函数来实现自定义逻辑。例如，如果需要在Webpack解析模块时，修改模块的路径或内容，可以使用normalModuleFactory钩子函数来实现。\r\n\r\n3. 使用Webpack提供的工具函数和API：\r\nWebpack提供了许多工具函数和API，可以帮助开发者更加方便地操作Webpack构建过程中的各种资源。在编写自定义插件时，可以使用这些工具函数和API来实现自定义逻辑。例如，如果需要将某些资源复制到输出目录下，可以使用copy-webpack-plugin插件提供的copyWebpackPlugin函数来实现。\r\n\r\n4. 使用Webpack提供的配置项：\r\nWebpack提供了许多配置项，可以用来控制Webpack的构建行为。在编写自定义插件时，可以通过配置这些选项来实现一些特定的构建需求。例如，如果需要在Webpack打包时生成SourceMap文件，可以使用devtool配置项来实现。\r\n\r\n当然，想要实现能用于生产解决问题的自定义plugin的难度并不小，在后续我也会出相关的课程和专栏，来讲解如何实现真正生产可用的自定义plugin。","closed_by":null,"reactions":{"url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hankliu62/hankliu62.github.com/issues/517/timeline","performed_via_github_app":null,"state_reason":null},"menus":[]},"__N_SSG":true}